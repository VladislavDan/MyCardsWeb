(this["webpackJsonpmy-cards-web"]=this["webpackJsonpmy-cards-web"]||[]).push([[0],{163:function(e,n,t){},164:function(e,n,t){},165:function(e,n,t){},175:function(e,n,t){},176:function(e,n,t){},178:function(e,n,t){},179:function(e,n,t){},180:function(e,n,t){},181:function(e,n,t){},182:function(e,n,t){},183:function(e,n,t){},184:function(e,n,t){},185:function(e,n,t){},186:function(e,n,t){},188:function(e,n,t){"use strict";t.r(n);var r,a=t(1),i=t.n(a),c=t(60),o=t.n(c),s=(t(163),t(14)),u=t(11),l=t(85),d=(t(164),t(15)),h=t(16),p=t(50),j={path:"/google-auth",name:"Auth Google"},b={path:"/google-backups",name:"Google Backups"},f={path:"/cards-groups",name:"Cards Groups"},g={path:"/cards-list",name:"Cards"},O={path:"/cards-repeater",name:"Repeat Card"},C={path:"/cards-editor",name:"Edit Card"},v={path:"/local-backups",name:"Local Backups"},m={path:"/cards-group-editor",name:"Edit Group"},x={path:"/settings",name:"Settings"},k=new(function(){function e(){Object(h.a)(this,e)}return Object(p.a)(e,[{key:"getPageLabel",value:function(e){return e===j.path?j.name:e===b.path?b.name:e===f.path?f.name:e===g.path?g.name:e===O.path?O.name:e===v.path?v.name:e===x.path?x.name:"My Cards"}}]),e}()),S=t(263),D=t(265),w=t(266),I=t(90),G=t(133),y=t.n(G),E=t(134),B=t.n(E),R=(t(165),t(0)),T=function(e){var n=e.pageLabel,t=e.onClick,r=Object(d.g)(),a=Object(d.h)();return Object(R.jsx)(S.a,{position:"fixed",children:Object(R.jsxs)(D.a,{className:"toolbar",children:[Object(R.jsx)(w.a,{className:"toolbar_menu-icon",edge:"start",color:"inherit","aria-label":"menu",onClick:t,children:Object(R.jsx)(y.a,{})}),Object(R.jsx)(I.a,{className:"toolbar_label",variant:"h6",children:n}),n===g.name||n===f.name?Object(R.jsx)(w.a,{color:"inherit",onClick:function(){n===g.name?r.push({pathname:O.path,state:a.state}):r.push({pathname:O.path,state:null})},children:Object(R.jsx)(B.a,{})}):null]})})},N=t(250),F=t(257),P=function(){function e(n){Object(h.a)(this,e),this.outputSubject=void 0,this.observableCreator=void 0,this.subscriptions=[],this.outputSubject=new F.a,this.observableCreator=n}return Object(p.a)(e,[{key:"next",value:function(e){var n=this;this.subscriptions.push(this.observableCreator(e).subscribe((function(e){n.outputSubject.next(e)})))}},{key:"subscribe",value:function(e,n){var t=this.outputSubject.subscribe((function(n){e&&e(n)}),(function(e){n&&n(e),console.error(e)}));return this.subscriptions.push(t),t}},{key:"unsubscribe",value:function(){this.subscriptions.forEach((function(e){e.closed||e.unsubscribe()})),this.subscriptions=[]}}]),e}(),A=new function e(){Object(h.a)(this,e),this.navigationPanelOpenChannel=void 0,this.navigationPanelOpenChannel=new P((function(e){return Object(N.a)(e)}))},L=function(){var e=Object(d.h)(),n=Object(a.useState)(""),t=Object(u.a)(n,2),r=t[0],i=t[1];Object(a.useEffect)((function(){var n=k.getPageLabel(e.pathname);i(n)}),[e.pathname]);return Object(R.jsx)(T,{pageLabel:r,onClick:function(){A.navigationPanelOpenChannel.next("")}})},_=t(246),K=t(267),z=t(249),M=function(e){var n=e.path,t=e.name,r=e.toggleDrawer;return Object(R.jsx)(z.a,{button:!0,children:Object(R.jsx)(l.b,{to:n,onClick:r(!1),children:t})})},Q=function(e){var n=e.isOpen,t=e.toggleDrawer;return Object(R.jsx)(_.a,{anchor:"left",open:n,onClose:t(!1),onOpen:t(!0),children:Object(R.jsxs)(K.a,{children:[Object(R.jsx)(M,{path:f.path,name:f.name,toggleDrawer:t}),Object(R.jsx)(M,{path:j.path,name:j.name,toggleDrawer:t}),Object(R.jsx)(M,{path:v.path,name:v.name,toggleDrawer:t}),Object(R.jsx)(M,{path:x.path,name:x.name,toggleDrawer:t})]})})},q=function(e,n,t){var r=Object(a.useState)({subscription:null}),i=Object(u.a)(r,2),c=i[0],o=i[1];Object(a.useEffect)((function(){if(!c.subscription||c.subscription.closed){var r=e.subscribe(n,t);o(Object(s.a)(Object(s.a)({},c),{},{subscription:r}))}return function(){e.unsubscribe()}}),[])},U=function(){var e=Object(a.useState)({isOpen:!1}),n=Object(u.a)(e,2),t=n[0],r=n[1];q(A.navigationPanelOpenChannel,(function(){r(Object(s.a)(Object(s.a)({},t),{},{isOpen:!0}))}));return Object(R.jsx)(Q,{isOpen:t.isOpen,toggleDrawer:function(e){return function(n){(!n||"keydown"!==n.type||"Tab"!==n.nativeEvent.key&&"Shift"!==n.nativeEvent.key)&&r(Object(s.a)(Object(s.a)({},t),{},{isOpen:e}))}}})},H=t(258),J=t(238),V=t(259),W=t(260),Y=t(261),X=t(262),Z=function(e){var n=e.isOpen,t=e.errorMessage,r=e.handleClose;return Object(R.jsxs)(H.a,{open:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:r,children:[Object(R.jsx)(J.a,{id:"alert-dialog-title",children:"Something went wrong"}),Object(R.jsx)(V.a,{children:Object(R.jsx)(W.a,{id:"alert-dialog-description",children:t})}),Object(R.jsx)(Y.a,{children:Object(R.jsx)(X.a,{color:"primary",onClick:r,children:"Ok"})})]})},$=function(e){var n=e.errorService,t=Object(a.useState)({isOpen:!1,errorMessage:""}),r=Object(u.a)(t,2),i=r[0],c=r[1];q(n.errorChannel,(function(e){c({isOpen:!0,errorMessage:e})}));return Object(R.jsx)(Z,{isOpen:i.isOpen,errorMessage:i.errorMessage,handleClose:function(){c({isOpen:!1,errorMessage:""})}})},ee=t(268),ne=function(e){return e.isShow?Object(R.jsx)(ee.a,{color:"secondary"}):null},te=function(e){var n=e.spinnerService,t=Object(a.useState)(!1),r=Object(u.a)(t,2),i=r[0],c=r[1];return q(n.spinnerCounterChannel,(function(e){c(0!==e)})),Object(R.jsx)(ne,{isShow:i})};!function(e){e[e.TO_DO=0]="TO_DO",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.DONE=2]="DONE"}(r||(r={}));var re={height:0,width:0,updateContext:function(){}},ae="dd-MM-yyyy",ie={rangeOfKnowledge:r.IN_PROGRESS,answer:"",question:"",dateRepeating:0,id:(new Date).getTime()},ce=function(e){var n=e.onClickAgree,t=e.onClickDisagree,r=e.isOpen,a=e.message,i=e.onClose;return Object(R.jsx)("div",{children:Object(R.jsxs)(H.a,{open:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:i,children:[Object(R.jsx)(J.a,{id:"alert-dialog-title",children:"Warning"}),Object(R.jsx)(V.a,{children:Object(R.jsx)(W.a,{id:"alert-dialog-description",children:a})}),Object(R.jsxs)(Y.a,{children:[Object(R.jsx)(X.a,{onClick:t,color:"primary",children:"Disagree"}),Object(R.jsx)(X.a,{onClick:n,color:"primary",autoFocus:!0,children:"Agree"})]})]})})},oe=function(e){var n=e.confirmDialogService,t=a.useState({isOpen:!1,message:""}),r=Object(u.a)(t,2),i=r[0],c=r[1];q(n.openDialogChannel,(function(e){c(Object(s.a)({},e))}));return Object(R.jsx)(ce,{isOpen:i.isOpen,onClickAgree:function(){n.confirmationChannel.next(!0)},onClickDisagree:function(){n.confirmationChannel.next(!1)},onClose:function(){c({isOpen:!1,message:""}),n.confirmationChannel.unsubscribe()},message:i.message})},se=t(135),ue=t(106),le=(t(175),t(269)),de=t(136),he=t.n(de),pe=(t(176),function(e){var n=e.onClick;return Object(R.jsx)(le.a,{size:"medium",color:"secondary","aria-label":"add",className:"add-button",onClick:n,children:Object(R.jsx)(he.a,{})})}),je=t(103),be=t(76),fe=t(102),ge=t(271),Oe=t(270),Ce=function(e){var n=e.percent;return Object(R.jsxs)(Oe.a,{position:"relative",display:"inline-flex",children:[Object(R.jsx)(ge.a,{variant:"determinate",value:n}),Object(R.jsx)(Oe.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(R.jsx)(I.a,{variant:"caption",component:"div",color:"textSecondary",children:"".concat(Math.round(n),"%")})})]})},ve=t(101),me=t.n(ve),xe=t(141),ke=t(255),Se=function(e){var n=e.onEdit,t=e.onDelete,r=e.onResetProgress,a=i.a.useState(null),c=Object(u.a)(a,2),o=c[0],s=c[1],l=function(){s(null)};return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(xe.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:l,children:[Object(R.jsx)(ke.a,{onClick:function(){n(),l()},children:"Edit"}),Object(R.jsx)(ke.a,{onClick:function(){r(),l()},children:"Reset progress"}),Object(R.jsx)(ke.a,{onClick:function(){t(),l()},children:"Delete"})]}),Object(R.jsx)(w.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:Object(R.jsx)(me.a,{})})]})},De=(t(178),function(e){var n=e.cardsGroup,t=e.onClickItem,r=e.onEditItem,a=e.onDeleteItem,i=e.onResetProgress;return Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(z.a,{button:!0,component:"div",children:[Object(R.jsx)(be.a,{onClick:function(){return t(n.id)},children:Object(R.jsx)(Ce,{percent:n.percentRepeatedCards||0})}),Object(R.jsx)(fe.a,{className:"cards-groups-list-item_card-name",onClick:function(){return t(n.id)},primary:n.nameCardsGroup,secondary:"Last repeating date: "+Object(je.a)(n.repeatingDate?n.repeatingDate:new Date,ae)}),Object(R.jsx)(be.a,{children:Object(R.jsx)(Se,{onEdit:function(){return r(n.id)},onDelete:function(){return a(n.id)},onResetProgress:function(){return i(n.id)}})})]},n.id)})}),we=function(e){var n=e.cardsGroups,t=e.onClickItem,r=e.onEditItem,a=e.onDeleteItem,i=e.onOpenEditor,c=e.onResetProgress,o=e.height,s=e.width;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ue.a,{className:"cards-groups",itemData:n,itemSize:55,itemCount:n.length,overscanCount:5,height:o,width:s,children:function(e){var i=e.index,o=e.style,s=n[i];return Object(R.jsx)("div",{style:o,children:Object(R.jsx)(De,{cardsGroup:s,onClickItem:t,onEditItem:r,onDeleteItem:a,onResetProgress:c},s.id)})}}),Object(R.jsx)(pe,{onClick:i})]})},Ie=function(e){var n=Object(a.useRef)({isFirstRun:!1});n.current.isFirstRun||(e(),n.current.isFirstRun=!0)},Ge=t(26),ye=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1];return Object(a.useEffect)((function(){return function(){t.forEach((function(e){e.closed||e.unsubscribe()})),r([])}}),[]),{setSubscription:function(e){r([].concat(Object(Ge.a)(t),[e]))}}},Ee=function(e){var n=e.cardsGroupsListService,t=e.confirmDialogService,r=Object(a.useState)({cardsGroups:[]}),i=Object(u.a)(r,2),c=i[0],o=i[1],s=Object(d.g)(),l=Object(a.useContext)(En);q(n.groupsListChannel,(function(e){o({cardsGroups:e})})),q(n.groupDeleteChannel,(function(){n.groupsListChannel.next("")})),q(n.resetProgressChannel,(function(){n.groupsListChannel.next("")})),Ie((function(){n.groupsListChannel.next("")}));var h=ye().setSubscription;return Object(R.jsx)(we,{onClickItem:function(e){s.push({pathname:g.path,state:{cardsGroupID:e}})},onOpenEditor:function(){s.push({pathname:m.path})},onDeleteItem:function(e){var r=t.confirmationChannel.subscribe((function(r){r&&n.groupDeleteChannel.next(e),t.openDialogChannel.next({isOpen:!1,message:""})}));h(r),t.openDialogChannel.next({isOpen:!0,message:"Do you want to remove this group?"})},onEditItem:function(e){s.push({pathname:m.path,state:{cardsGroupID:e}})},onResetProgress:function(e){var r=t.confirmationChannel.subscribe((function(r){r&&n.resetProgressChannel.next(e),t.openDialogChannel.next({isOpen:!1,message:""})}));h(r),t.openDialogChannel.next({isOpen:!0,message:"Do you want to reset progress of this group?"})},height:l.height,width:l.width,cardsGroups:c.cardsGroups})},Be=t(138),Re=t.n(Be),Te=(t(179),function(e){var n=e.onSuccess,t=e.onFailure,r=e.height,a=e.width;return Object(R.jsx)("div",{className:"google-auth",style:{height:r,width:a},children:Object(R.jsx)(Re.a,{className:"google-auth_button",clientId:"627973926597-tj2la0mnorvm04cqmcosu2nj3b02g6k2.apps.googleusercontent.com",buttonText:"Login",onSuccess:n,onFailure:t,scope:"profile email https://www.googleapis.com/auth/drive"})})}),Ne=function(e){var n=e.googleAuthService,t=e.errorService,r=Object(d.g)();q(n.loginChannel,(function(){r.replace(b.path)}));var i=a.useContext(En),c=i.height,o=i.width;return Object(R.jsx)(Te,{onSuccess:function(e){n.loginChannel.next(e.accessToken)},onFailure:function(){t.errorChannel.next("Error of connection")},height:c,width:o})},Fe=function(e){var n=e.backupID,t=e.onLoad,r=e.onDelete,a=i.a.useState(null),c=Object(u.a)(a,2),o=c[0],s=c[1];return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(xe.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:function(){s(null)},children:[Object(R.jsx)(ke.a,{onClick:function(){s(null),t(n)},children:"Load"}),Object(R.jsx)(ke.a,{onClick:function(){s(null),r(n)},children:"Delete"})]}),Object(R.jsx)(w.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:Object(R.jsx)(me.a,{})})]})},Pe=function(e){var n=e.backupName,t=e.backupID,r=e.onLoad,a=e.onDelete;return Object(R.jsxs)(z.a,{children:[Object(R.jsx)(fe.a,{primary:n}),Object(R.jsx)(be.a,{children:Object(R.jsx)(Fe,{backupID:t,onLoad:r,onDelete:a})})]})},Ae=function(e){var n=e.backupsFiles,t=e.onLoad,r=e.onCreate,a=e.onDelete;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(K.a,{children:n.map((function(e){return Object(R.jsx)(Pe,{backupName:e.createdTime,onLoad:t,onDelete:a,backupID:e.id},e.id)}))}),Object(R.jsx)(pe,{onClick:r})]})},Le=function(e){var n=e.spinnerService,t=e.googleBackupsService,r=e.confirmDialogService,i=Object(d.g)(),c=Object(a.useState)({backupsFiles:[]}),o=Object(u.a)(c,2),l=o[0],h=o[1];q(t.backupsNameLoadChannel,(function(e){h(Object(s.a)(Object(s.a)({},l),{},{backupsFiles:e})),n.spinnerCounterChannel.next(-1)}),(function(){n.spinnerCounterChannel.next(-1),i.replace(j.path)})),q(t.backupLoadChannel,(function(){n.spinnerCounterChannel.next(-1)}),(function(){n.spinnerCounterChannel.next(-1),i.replace(j.path)})),q(t.backupDeleteChannel,(function(){n.spinnerCounterChannel.next(-1)})),q(t.backupUploadChannel,(function(){n.spinnerCounterChannel.next(-1)})),Ie((function(){t.backupsNameLoadChannel.next("")}));var p=ye().setSubscription;return Object(R.jsx)(Ae,{backupsFiles:l.backupsFiles,onLoad:function(e){n.spinnerCounterChannel.next(1),t.backupLoadChannel.next(e)},onDelete:function(e){t.backupLoadChannel.next(e);var a=r.confirmationChannel.subscribe((function(a){a&&(n.spinnerCounterChannel.next(1),t.backupDeleteChannel.next(e)),r.openDialogChannel.next({isOpen:!1,message:""})}));p(a),r.openDialogChannel.next({isOpen:!0,message:"Do you want to delete this backup?"})},onCreate:function(){n.spinnerCounterChannel.next(1),t.backupUploadChannel.next()}})},_e=t(139),Ke=t.n(_e),ze=(t(180),function(e){var n=e.card,t=e.onEditItem,a=e.onDeleteItem,i=e.onResetProgress,c=e.onClickItem;return Object(R.jsxs)(z.a,{button:!0,children:[Object(R.jsx)(be.a,{onClick:function(){return c(n.id)},children:Object(R.jsx)(Ke.a,{style:{color:function(e){return e.rangeOfKnowledge===r.DONE?"green":e.rangeOfKnowledge===r.IN_PROGRESS?"yellow":"red"}(n)}})}),Object(R.jsx)(fe.a,{className:"cards-list-item_card-name",onClick:function(){return c(n.id)},primary:n.question,secondary:"Last repeating date: "+Object(je.a)(n.dateRepeating?n.dateRepeating:new Date,ae)}),Object(R.jsx)(be.a,{children:Object(R.jsx)(Se,{onEdit:function(){return t(n.id)},onDelete:function(){return a(n.id)},onResetProgress:function(){return i(n.id)}})})]},n.id)}),Me=(t(181),function(e){var n=e.cards,t=e.onOpenEditor,r=e.onEditItem,a=e.onDeleteItem,i=e.onResetProgress,c=e.onClickItem,o=e.height,s=e.width;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ue.a,{className:"cards",itemData:n,itemSize:55,itemCount:n.length,overscanCount:5,height:o,width:s,children:function(e){var t=e.index,o=e.style,s=n[t];return Object(R.jsx)("div",{style:o,children:Object(R.jsx)(ze,{card:s,onEditItem:r,onDeleteItem:a,onResetProgress:i,onClickItem:c},s.id)})}}),Object(R.jsx)(pe,{onClick:t})]})}),Qe=function(e){var n=e.cardsListService,t=e.confirmDialogService,r=Object(d.h)(),i=Object(d.g)(),c=Object(a.useState)({cards:[]}),o=Object(u.a)(c,2),s=o[0],l=o[1],h=Object(a.useContext)(En);q(n.cardsChannel,(function(e){l({cards:e})})),q(n.resetCardProgressChannel,(function(e){n.cardsChannel.next(r.state.cardsGroupID)})),q(n.deleteCardChannel,(function(e){n.cardsChannel.next(r.state.cardsGroupID)})),Ie((function(){n.cardsChannel.next(r.state.cardsGroupID)}));var p=ye().setSubscription;return Object(R.jsx)(Me,{cards:s.cards,onOpenEditor:function(){i.push({pathname:C.path,state:{cardsGroupID:r.state.cardsGroupID}})},onEditItem:function(e){i.push({pathname:C.path,state:{cardsGroupID:r.state.cardsGroupID,cardID:e}})},onDeleteItem:function(e){var a=t.confirmationChannel.subscribe((function(a){a&&n.deleteCardChannel.next({cardID:e,cardsGroupID:r.state.cardsGroupID}),t.openDialogChannel.next({isOpen:!1,message:""})}));p(a),t.openDialogChannel.next({isOpen:!0,message:"Do you want to remove this card?"})},onResetProgress:function(e){n.resetCardProgressChannel.next({cardID:e,cardsGroupID:r.state.cardsGroupID})},onClickItem:function(e){i.push({pathname:O.path,state:{cardsGroupID:r.state.cardsGroupID,cardID:e}})},width:h.width,height:h.height})},qe=function(e){var n=e.statistic;return Object(R.jsxs)("div",{children:[Object(R.jsx)(X.a,{size:"small",children:Object(R.jsxs)("span",{style:{color:"red"},children:["To Do: ",n.todo]})}),Object(R.jsx)(X.a,{size:"small",children:Object(R.jsxs)("span",{style:{color:"orange"},children:["In progress: ",n.inProgress]})}),Object(R.jsx)(X.a,{size:"small",children:Object(R.jsxs)("span",{style:{color:"green"},children:["Completed: ",n.done]})})]})},Ue=t(276),He=t(275),Je=t(272),Ve=function(e){var n=e.card,t=e.onClick;return Object(R.jsx)(R.Fragment,{children:n&&n.rangeOfKnowledge!==r.DONE?Object(R.jsxs)(Je.a,{className:"cards-repeater_buttons-container",style:{height:10},children:[Object(R.jsx)(X.a,{size:"small",color:"primary",onClick:function(){return t(!0)},children:"Yes"}),Object(R.jsx)(X.a,{size:"small",color:"primary",onClick:function(){return t(!1)},children:"No"})]}):Object(R.jsx)("div",{children:"Repeated"})})},We=t(244),Ye=(t(182),function(e){var n=e.onChangeText,t=e.changeableText,r=e.label;return Object(R.jsx)(We.a,{className:"text-editor",required:!0,id:"outlined-required",label:r||"",multiline:!0,onChange:function(e){n(e.target.value)},value:t,variant:"filled"})}),Xe=function(e){var n=e.card,t=e.cardHeight,r=e.onClickText,a=e.onClick,i=e.isEditable,c=e.onChangeAnswer,o=function(){return n?n.answer:""};return Object(R.jsx)(He.a,{className:"cards-repeater",children:Object(R.jsxs)(Ue.a,{style:{height:t},children:[i?Object(R.jsx)("div",{style:{paddingTop:0,height:.5*t,overflow:"auto",whiteSpace:"pre-wrap"},children:Object(R.jsx)(K.a,{style:{paddingTop:0},children:Object(R.jsx)(Ye,{onChangeText:c,changeableText:o()})})}):Object(R.jsx)(I.a,{color:"textSecondary",gutterBottom:!0,onClick:r,style:{paddingTop:0,height:t,overflow:"auto",whiteSpace:"pre-wrap"},children:Object(R.jsx)(K.a,{style:{paddingTop:0},children:o()})}),Object(R.jsx)(Ve,{onClick:a,card:n})]})})},Ze=(t(183),t(240)),$e=t(241),en=function(e){var n=e.isQuestionSide,t=e.onSwitchEditing,r=e.isEditable;return Object(R.jsxs)("div",{className:"cards-repeater_title",children:[Object(R.jsx)(I.a,{gutterBottom:!0,variant:"h5",component:"h2",children:n?"Question":"Answer"}),Object(R.jsx)(w.a,{color:"inherit",onClick:t,children:r?Object(R.jsx)(Ze.a,{}):Object(R.jsx)($e.a,{})})]})},nn=function(e){var n=e.onBackClick;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("span",{children:"All cards repeated"}),Object(R.jsx)(X.a,{size:"small",color:"primary",onClick:n,children:"Go back"})]})},tn=function(e){var n=e.card,t=e.onClickCard,r=e.cardHeight,a=e.isEditable,i=e.onChangeQuestion,c=n?n.question:"";return Object(R.jsx)(He.a,{children:Object(R.jsx)(Ue.a,{onClick:t,style:{height:r},children:a?Object(R.jsx)("div",{style:{paddingTop:0,height:r,overflow:"auto",whiteSpace:"pre-wrap"},children:Object(R.jsx)(K.a,{style:{paddingTop:0},children:Object(R.jsx)(Ye,{onChangeText:i,changeableText:c})})}):Object(R.jsx)(I.a,{color:"textSecondary",gutterBottom:!0,children:c})})})},rn=function(e){var n=e.card,t=e.cardHeight,r=e.isQuestionSide,a=e.onClickCard,i=e.onClick,c=e.statistic,o=e.onBackClick,s=e.onSwitchEditing,u=e.isEditable,l=e.onChangeAnswer,d=e.onChangeQuestion;return n?Object(R.jsxs)("div",{className:"cards-repeater",children:[Object(R.jsx)(qe,{statistic:c}),Object(R.jsx)(en,{isQuestionSide:r,isEditable:u,onSwitchEditing:s}),r?Object(R.jsx)(tn,{card:n,onClickCard:a,cardHeight:t,isEditable:u,onChangeQuestion:d}):Object(R.jsx)(Xe,{card:n,onClickText:a,cardHeight:t,onClick:i,onChangeAnswer:l,isEditable:u})]}):Object(R.jsx)(nn,{onBackClick:o})},an=function(e){var n=e.cardsRepeaterService,t=e.cardsEditorService,r=Object(d.h)(),i=Object(d.g)(),c=Object(a.useState)({card:void 0,isQuestionSide:!0,isEditable:!1}),o=Object(u.a)(c,2),l=o[0],h=o[1],p=Object(a.useState)({inProgress:0,todo:0,done:0}),j=Object(u.a)(p,2),b=j[0],g=j[1];q(n.cardChannel,(function(e){h({card:e,isQuestionSide:!0,isEditable:!1}),n.statisticChannel.next("")})),q(t.cardEditingChannel,(function(e){h((function(n){return Object(s.a)(Object(s.a)({},n),{},{card:e})}))})),q(n.currentCardChannel,(function(e){e?h({card:e,isQuestionSide:!0,isEditable:!1}):n.cardChannel.next({cardsGroupID:r.state?r.state.cardsGroupID:null,cardID:r.state?r.state.cardID:null})})),q(n.statisticChannel,(function(e){g((function(){return e}))})),q(n.repeatingResultChannel,(function(){n.cardChannel.next({cardsGroupID:r.state.cardsGroupID,cardID:r.state.cardID})})),Ie((function(){r.state?n.currentCardChannel.next(r.state.cardsGroupID):n.currentCardChannel.next(null),n.statisticChannel.next("")}));var O=Object(a.useContext)(En);return Object(R.jsx)(rn,{cardHeight:.55*O.height,isQuestionSide:l.isQuestionSide,onClickCard:function(){l.isEditable||h(Object(s.a)(Object(s.a)({},l),{},{isQuestionSide:!l.isQuestionSide}))},onClick:function(e){l.card?n.repeatingResultChannel.next({isKnown:e,cardID:l.card.id,cardsGroupID:r.state.cardsGroupID}):h({card:void 0,isQuestionSide:!1,isEditable:!1})},card:l.card,statistic:b,onBackClick:function(){i.replace(f.path)},onSwitchEditing:function(){h(Object(s.a)(Object(s.a)({},l),{},{isEditable:!l.isEditable})),l.isEditable&&t.cardEditingChannel.next({card:l.card||ie,cardsGroupID:r.state.cardsGroupID})},isEditable:l.isEditable,onChangeQuestion:function(e){if(l.card){var n=Object(s.a)(Object(s.a)({},l.card),{},{question:e});h(Object(s.a)(Object(s.a)({},l),{},{card:n}))}},onChangeAnswer:function(e){if(l.card){var n=Object(s.a)(Object(s.a)({},l.card),{},{answer:e});h(Object(s.a)(Object(s.a)({},l),{},{card:n}))}}})},cn=function(e){var n=e.localBackupsService,t=e.confirmDialogService,r=e.spinnerService,i=Object(a.useRef)(null);q(n.localBackupChannel),q(n.loadBackupChannel,(function(){r.spinnerCounterChannel.next(-1)}));var c=ye().setSubscription;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("input",{type:"file",onChange:function(e){var a=e.target.files[0];if(a){var i=new FileReader;i.onload=function(e){var a=e.target.result,i=t.confirmationChannel.subscribe((function(e){e&&(r.spinnerCounterChannel.next(1),n.loadBackupChannel.next(a)),t.openDialogChannel.next({isOpen:!1,message:""})}));c(i),t.openDialogChannel.next({isOpen:!0,message:"Do you want to load this backup, your current changes could be removed?"})},i.readAsText(a)}}}),Object(R.jsx)("a",{ref:i}),Object(R.jsx)(X.a,{size:"small",onClick:function(){return n.localBackupChannel.next()},children:"Save"})]})},on=(t(184),function(e){var n=e.groupName,t=e.onChangeGroupName,r=e.onSaveGroup;return Object(R.jsxs)("div",{className:"group-editor",children:[Object(R.jsx)(We.a,{className:"group-editor_text",required:!0,id:"outlined-required",label:"Group name",onChange:function(e){t(e.target.value)},value:n,variant:"filled"}),Object(R.jsx)(X.a,{variant:"outlined",className:"group-editor_button",size:"small",onClick:function(){return r()},children:"Save"})]})}),sn=function(e){var n=e.cardsGroupsEditorService,t=Object(d.h)(),r=Object(d.g)(),i=Object(a.useState)({cardsGroup:{cards:[],nameCardsGroup:"",repeatingDate:(new Date).getTime(),id:(new Date).getTime(),percentRepeatedCards:0}}),c=Object(u.a)(i,2),o=c[0],l=c[1];q(n.groupEditingChannel,(function(){r.goBack()})),q(n.groupChannel,(function(e){l({cardsGroup:e})})),Ie((function(){var e=t.state?t.state.cardsGroupID:-1;n.groupChannel.next(e)}));return Object(R.jsx)(on,{groupName:o.cardsGroup.nameCardsGroup,onChangeGroupName:function(e){l({cardsGroup:Object(s.a)(Object(s.a)({},o.cardsGroup),{},{nameCardsGroup:e})})},onSaveGroup:function(){n.groupEditingChannel.next(o.cardsGroup)}})},un=t(248),ln=(t(185),function(e){var n=e.answer,t=e.question,r=e.onChangeAnswer,a=e.onChangeQuestion,i=e.onSaveCard,c=e.cardsGroups,o=e.currentCardsGroup,s=e.onChangeCardsGroup;return Object(R.jsxs)("div",{className:"cards-editor",children:[Object(R.jsx)(Ye,{onChangeText:a,changeableText:t,label:"Question"}),Object(R.jsx)(Ye,{onChangeText:r,changeableText:n,label:"Answer"}),Object(R.jsx)(un.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",className:"cards-editor_text",value:o.id.toString(),label:o.nameCardsGroup,onChange:function(e){s(Number(e.target.value))},autoWidth:!0,children:c.map((function(e){return Object(R.jsx)(ke.a,{value:e.id.toString(),children:e.nameCardsGroup},e.id)}))}),Object(R.jsx)(X.a,{variant:"outlined",className:"group-editor_button",size:"small",onClick:function(){return i()},children:"Save"})]})}),dn=function(e){var n=e.cardsEditorService,t=Object(d.h)(),r=Object(d.g)(),i=Object(a.useState)({card:ie,currentCardsGroup:{id:0,nameCardsGroup:""},cardsGroups:[]}),c=Object(u.a)(i,2),o=c[0],l=c[1];q(n.cardEditingChannel,(function(){r.goBack()})),q(n.simplifiedCardsGroupsChannel,(function(e){var n=e.currentCardsGroup,t=e.cardsGroups;l(n?function(e){return Object(s.a)(Object(s.a)({},e),{},{cardsGroups:t,currentCardsGroup:n})}:function(e){return Object(s.a)(Object(s.a)({},e),{},{currentCardsGroup:o.currentCardsGroup,cardsGroups:t})})})),q(n.cardChannel,(function(e){e&&l(Object(s.a)(Object(s.a)({},o),{},{card:e}))})),Ie((function(){var e=t.state?t.state.cardsGroupID:-1,r=t.state?t.state.cardID:-1;n.cardChannel.next({cardID:r,cardsGroupID:e}),n.simplifiedCardsGroupsChannel.next(e)}));return Object(R.jsx)(ln,{question:o.card.question,answer:o.card.answer,onChangeQuestion:function(e){l({card:Object(s.a)(Object(s.a)({},o.card),{},{question:e}),currentCardsGroup:o.currentCardsGroup,cardsGroups:o.cardsGroups})},onChangeAnswer:function(e){l({card:Object(s.a)(Object(s.a)({},o.card),{},{answer:e}),currentCardsGroup:o.currentCardsGroup,cardsGroups:o.cardsGroups})},onSaveCard:function(){n.cardEditingChannel.next({card:o.card,cardsGroupID:o.currentCardsGroup.id})},currentCardsGroup:o.currentCardsGroup,cardsGroups:o.cardsGroups,onChangeCardsGroup:function(e){n.simplifiedCardsGroupsChannel.next(e)}})},hn=(t(186),t(277)),pn=t(278),jn=t(252),bn=function(e){var n=e.settings,t=e.onChange;return Object(R.jsx)(hn.a,{className:"settings-form",children:Object(R.jsx)(pn.a,{control:Object(R.jsx)(jn.a,{checked:n.isRandomRepeating,onChange:function(e){t(Object(s.a)(Object(s.a)({},n),{},{isRandomRepeating:e.target.checked}))}}),label:"Random repeating algorithm"})})},fn=function(e){var n=e.settingsService,t=Object(a.useState)({isRandomRepeating:!1}),r=Object(u.a)(t,2),i=r[0],c=r[1];q(n.changeSettingsChannel,(function(){n.settingsChannel.next("")})),q(n.settingsChannel,(function(e){c((function(n){return Object(s.a)(Object(s.a)({},n),e)}))})),Ie((function(){n.settingsChannel.next("")}));return Object(R.jsx)(bn,{settings:i,onChange:function(e){n.changeSettingsChannel.next(e)}})},gn=function(e){var n=e.cardsGroupsListService,t=e.cardsGroupsEditorService,r=e.errorService,a=e.googleAuthService,i=e.googleBackupsService,c=e.spinnerService,o=e.confirmDialogService,s=e.cardsEditorService,u=e.cardsListService,l=e.cardsRepeaterService,h=e.settingsService,p=e.localBackupsService;return Object(R.jsxs)(d.d,{children:[Object(R.jsx)(d.a,{exact:!0,from:"/MyCardsWeb",to:f.path}),Object(R.jsx)(d.a,{exact:!0,from:"/",to:f.path}),Object(R.jsx)(d.b,{path:f.path,children:Object(R.jsx)(Ee,{cardsGroupsListService:n,confirmDialogService:o})}),Object(R.jsx)(d.b,{path:j.path,children:Object(R.jsx)(Ne,{googleAuthService:a,errorService:r})}),Object(R.jsx)(d.b,{path:b.path,children:Object(R.jsx)(Le,{googleBackupsService:i,spinnerService:c,confirmDialogService:o})}),Object(R.jsx)(d.b,{path:g.path,children:Object(R.jsx)(Qe,{cardsListService:u,confirmDialogService:o})}),Object(R.jsx)(d.b,{path:O.path,children:Object(R.jsx)(an,{cardsRepeaterService:l,cardsEditorService:s})}),Object(R.jsx)(d.b,{path:v.path,children:Object(R.jsx)(cn,{localBackupsService:p,confirmDialogService:o,spinnerService:c})}),Object(R.jsx)(d.b,{path:m.path,children:Object(R.jsx)(sn,{cardsGroupsEditorService:t})}),Object(R.jsx)(d.b,{path:C.path,children:Object(R.jsx)(dn,{cardsEditorService:s})}),Object(R.jsx)(d.b,{path:x.path,children:Object(R.jsx)(fn,{settingsService:h})})]})},On=t(242),Cn=t(243),vn=t(251),mn=function(){function e(n){var t=this;Object(h.a)(this,e),this.storageService=n,this.backupsNameLoadChannel=void 0,this.backupLoadChannel=void 0,this.backupUploadChannel=void 0,this.backupDeleteChannel=void 0,this.backupFileName="my-cards.json",this.backupFolderName="my-cards",this.googleDriveFilesAPI="https://www.googleapis.com/drive/v3/files/",this.googleDriveUploadAPI="https://www.googleapis.com/upload/drive/v3/files/",this.searchFilesURI=this.googleDriveFilesAPI+"?fields=files(id,createdTime)&q=name%20contains%20",this.searchFolderURI=this.googleDriveFilesAPI+"?q=name%20contains%20",this.getFilesAdditionalPartURI="?alt=media",this.googleDriveFolderType="application/vnd.google-apps.folder",this.backupsNameLoadChannel=new P((function(){return Object(N.a)("").pipe(Object(Cn.a)((function(){return n.getAuthToken()})),Object(Cn.a)((function(e){return t.getBackupFiles(e)})),Object(se.a)((function(e){return function(e){return e.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{createdTime:e.createdTime.slice(0,10)})}))}(e)})))})),this.backupLoadChannel=new P((function(e){return Object(N.a)("").pipe(Object(Cn.a)((function(){return t.loadBackupFile(e)})))})),this.backupUploadChannel=new P((function(){return Object(N.a)("").pipe(Object(Cn.a)((function(){return n.getAuthToken()})),Object(Cn.a)((function(e){return t.createNewBackup(e)})))})),this.backupDeleteChannel=new P((function(e){return Object(N.a)("").pipe(Object(Cn.a)((function(){return t.deleteBackupFile(e)})),Object(On.a)((function(){t.backupsNameLoadChannel.next("")})))}))}return Object(p.a)(e,[{key:"createNewBackup",value:function(e){var n=this;return this.getBackupFolder(e).pipe(Object(Cn.a)((function(t){if(t){var r=t.find((function(e){return e.mimeType===n.googleDriveFolderType}));return r?Object(N.a)(r.id):n.createBackupFolder(e)}return n.createBackupFolder(e)})),Object(Cn.a)((function(t){return n.createNewBackupFile(e,t)})),Object(Cn.a)((function(t){return n.uploadBackupFile(e,t)})),Object(On.a)((function(){n.backupsNameLoadChannel.next("")})))}},{key:"getBackupFiles",value:function(e){return Object(vn.a)({url:"".concat(this.searchFilesURI,"'").concat(this.backupFileName,"'"),headers:{Authorization:"Bearer "+e},method:"GET"}).pipe(Object(se.a)((function(e){return e.response.files})))}},{key:"loadBackupFile",value:function(e){var n=this;return this.storageService.getAuthToken().pipe(Object(Cn.a)((function(t){return Object(vn.a)({url:n.googleDriveFilesAPI+e+n.getFilesAdditionalPartURI,headers:{Authorization:"Bearer "+t},method:"GET"})})),Object(se.a)((function(e){return n.storageService.setBackup(e.response),e.response})))}},{key:"getBackupFolder",value:function(e){return Object(vn.a)({url:"".concat(this.searchFolderURI,"'").concat(this.backupFolderName,"'"),headers:{Authorization:"Bearer "+e},method:"GET"}).pipe(Object(se.a)((function(e){return e.response.files})))}},{key:"deleteBackupFile",value:function(e){var n=this;return this.storageService.getAuthToken().pipe(Object(Cn.a)((function(t){return Object(vn.a)({url:n.googleDriveFilesAPI+e,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},method:"DELETE"})})))}},{key:"createNewBackupFile",value:function(e,n){return Object(vn.a)({url:this.googleDriveFilesAPI,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:{parents:[n],name:this.backupFileName},method:"POST"}).pipe(Object(se.a)((function(e){return e.response.id})))}},{key:"createBackupFolder",value:function(e){return Object(vn.a)({url:this.googleDriveFilesAPI,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:{name:this.backupFolderName,mimeType:"application/vnd.google-apps.folder"},method:"POST"}).pipe(Object(se.a)((function(e){return e.response.id})))}},{key:"uploadBackupFile",value:function(e,n){var t=this;return this.storageService.getBackup().pipe(Object(Cn.a)((function(r){return Object(vn.a)({url:t.googleDriveUploadAPI+n,headers:{Authorization:"Bearer "+e},body:JSON.stringify(r,null,4),responseType:"text",method:"PATCH"}).pipe(Object(se.a)((function(){return n})))})))}}]),e}(),xn=t(42),kn=t.n(xn),Sn=t(62),Dn=t(104),wn=function(){function e(n){var t=this;Object(h.a)(this,e),this.dataBaseService=n,this.cardsStorageID="cards-local-storage",this.authTokenLocalStorageID="auth-token",this.settingsID="settings",this.getBackup=function(){return Object(Dn.a)(t.getBackupFromDataBase())},this.getBackupFromDataBase=Object(Sn.a)(kn.a.mark((function e(){var n;return kn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,t.dataBaseService.get(t.cardsStorageID);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",n);case 11:if(!n){e.next=15;break}return e.abrupt("return",n);case 15:return e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,7]])}))),this.setBackupToDataBase=function(){var e=Object(Sn.a)(kn.a.mark((function e(n){return kn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.dataBaseService.set(t.cardsStorageID,n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(n){return e.apply(this,arguments)}}()}return Object(p.a)(e,[{key:"setBackup",value:function(e){return Object(Dn.a)(this.setBackupToDataBase(e))}},{key:"getAuthToken",value:function(){var e=this;return Object(Dn.a)(new Promise((function(n,t){var r=localStorage.getItem(e.authTokenLocalStorageID);r?n(r):t("Auth token is empty")})))}},{key:"setAuthToken",value:function(e){var n=this;return Object(Dn.a)(new Promise((function(t){localStorage.setItem(n.authTokenLocalStorageID,e),t(e)})))}},{key:"getSettings",value:function(){var e=this;return Object(Dn.a)(new Promise((function(n,t){var r=localStorage.getItem(e.settingsID);r?n(JSON.parse(r)):t({isRandomRepeating:!1})})))}},{key:"setSettings",value:function(e){var n=this;return Object(Dn.a)(new Promise((function(t){localStorage.setItem(n.settingsID,JSON.stringify(e)),t(e)})))}}]),e}(),In=function(e,n,t){var r=e.find((function(e){return!n||e.id===n})),a=[];if(r&&(a=r.cards,t)){var i=a.find((function(e){return e.id===t}));i&&(a=[]).push(i)}return a},Gn=function(e){return 1===e.length?e[0]:null},yn=t(142),En=i.a.createContext(re),Bn=new function e(){Object(h.a)(this,e),this.errorChannel=void 0,this.errorChannel=new P((function(e){return Object(N.a)(e)}))},Rn=new function e(){var n=this;Object(h.a)(this,e),this.spinnerCounterChannel=void 0,this.spinnerCounter=0,this.spinnerCounterChannel=new P((function(e){return Object(N.a)("").pipe(Object(se.a)((function(){return n.spinnerCounter+e>=0&&(n.spinnerCounter=n.spinnerCounter+e),n.spinnerCounter})))}))},Tn=new function e(){var n=this;Object(h.a)(this,e),this.openDialogChannel=new P((function(e){return Object(N.a)(e).pipe(Object(On.a)((function(e){e.isOpen||n.confirmationChannel.unsubscribe()})))})),this.confirmationChannel=new P((function(e){return Object(N.a)(e)}))},Nn=new wn(new function e(n){var t=this;Object(h.a)(this,e),this.storeName=n,this.dataBase=void 0,this.DATA_BASE_NAME="app-data-base",this.get=function(){var e=Object(Sn.a)(kn.a.mark((function e(n){return kn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dataBase;case 2:return e.abrupt("return",e.sent.get(t.storeName,n));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.set=function(){var e=Object(Sn.a)(kn.a.mark((function e(n,r){return kn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dataBase;case 2:return e.abrupt("return",e.sent.put(t.storeName,r,n));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.dataBase=Object(yn.a)(this.DATA_BASE_NAME,1,{upgrade:function(e){e.createObjectStore(n)}})}("cards-store")),Fn=new function e(n){Object(h.a)(this,e),this.groupEditingChannel=void 0,this.groupChannel=void 0,this.groupEditingChannel=new P((function(e){return n.getBackup().pipe(Object(se.a)((function(n){return function(e,n){var t=n.findIndex((function(n){return e.id===n.id}));return t<0?n.push(e):n[t]=e,n}(e,n)})),Object(On.a)((function(e){n.setBackup(e)})))})),this.groupChannel=new P((function(e){return n.getBackup().pipe(Object(se.a)((function(n){return function(e,n){var t=n.find((function(n){return e===n.id}));return t||(t={cards:[],nameCardsGroup:"",repeatingDate:(new Date).getTime(),id:(new Date).getTime(),percentRepeatedCards:0}),t}(e,n)})))}))}(Nn),Pn=new function e(n){Object(h.a)(this,e),this.groupsListChannel=void 0,this.groupDeleteChannel=void 0,this.resetProgressChannel=void 0,this.groupsListChannel=new P((function(){return n.getBackup().pipe(Object(se.a)((function(e){return function(e){return e.map((function(e){var n=0;return e.cards.forEach((function(e){e.dateRepeating>n&&(n=e.dateRepeating)})),e.repeatingDate=n,e})),e}(e)})),Object(se.a)((function(e){return function(e){return e.sort((function(e,n){return e.repeatingDate&&n.repeatingDate?n.repeatingDate-e.repeatingDate:0}))}(e)})),Object(se.a)((function(e){return function(e){return e.map((function(e){var n=0;return e.cards.forEach((function(e){e.rangeOfKnowledge===r.DONE&&n++})),e.percentRepeatedCards=n/e.cards.length*100,e})),e}(e)})))})),this.groupDeleteChannel=new P((function(e){return n.getBackup().pipe(Object(se.a)((function(n){return function(e,n){return n.filter((function(n){return n.id!==e}))}(e,n)})),Object(On.a)((function(e){return n.setBackup(e)})))})),this.resetProgressChannel=new P((function(e){return n.getBackup().pipe(Object(se.a)((function(n){return function(e,n){var t=n.findIndex((function(n){return e===n.id}));return t<0||(n[t].cards=n[t].cards.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{rangeOfKnowledge:r.TO_DO})}))),n}(e,n)})),Object(On.a)((function(e){return n.setBackup(e)})))}))}(Nn),An=new function e(n){Object(h.a)(this,e),this.loginChannel=void 0,this.loginChannel=new P((function(e){return Object(N.a)("").pipe(Object(On.a)((function(){n.setAuthToken(e)})))}))}(Nn),Ln=new mn(Nn),_n=new function e(n){Object(h.a)(this,e),this.cardEditingChannel=void 0,this.simplifiedCardsGroupsChannel=void 0,this.cardChannel=void 0,this.cardEditingChannel=new P((function(e){var t=e.card,r=e.cardsGroupID;return n.getBackup().pipe(Object(se.a)((function(e){return function(e,n,t){var r=t.findIndex((function(n){return e===n.id})),a=-1;return r>=0&&(a=t[r].cards.findIndex((function(e){return n.id===e.id}))),r>=0&&a<0?t[r].cards.push(n):r>=0&&a>=0&&(t[r].cards[a]=n),t}(r,t,e)})),Object(On.a)((function(e){n.setBackup(e)})),Object(se.a)((function(){return t})))})),this.cardChannel=new P((function(e){var t=e.cardID,a=e.cardsGroupID;return n.getBackup().pipe(Object(se.a)((function(e){return function(e,n,t){var a=t.find((function(n){return e===n.id})),i={rangeOfKnowledge:r.TO_DO,answer:"",question:"",dateRepeating:0,id:(new Date).getTime()};return a&&(i=a.cards.find((function(e){return e.id===n}))),i}(a,t,e)})))})),this.simplifiedCardsGroupsChannel=new P((function(e){return n.getBackup().pipe(Object(se.a)((function(e){return function(e){return e.map((function(e){return{id:e.id,nameCardsGroup:e.nameCardsGroup}}))}(e)})),Object(se.a)((function(n){return function(e,n){return{currentCardsGroup:n.find((function(n){return e===n.id})),cardsGroups:n}}(e,n)})))}))}(Nn),Kn=new function e(n){var t=this;Object(h.a)(this,e),this.storageService=n,this.cardsChannel=void 0,this.resetCardProgressChannel=void 0,this.deleteCardChannel=void 0,this.cardsChannel=new P((function(e){return t.storageService.getBackup().pipe(Object(se.a)((function(n){return function(e,n){var t=n.find((function(n){return n.id===e}));return t?t.cards:[]}(e,n)})))})),this.resetCardProgressChannel=new P((function(e){var t=e.cardID,a=e.cardsGroupID;return n.getBackup().pipe(Object(se.a)((function(e){return function(e,n,t){var a=t.findIndex((function(n){return e===n.id})),i=-1;return a>=0&&(i=t[a].cards.findIndex((function(e){return n===e.id}))),a>=0&&i>=0&&(t[a].cards[i].rangeOfKnowledge=r.TO_DO),t}(a,t,e)})),Object(On.a)((function(e){n.setBackup(e)})))})),this.deleteCardChannel=new P((function(e){var t=e.cardID,r=e.cardsGroupID;return n.getBackup().pipe(Object(se.a)((function(e){return function(e,n,t){var r=t.findIndex((function(n){return e===n.id})),a=-1;return r>=0&&(a=t[r].cards.findIndex((function(e){return n===e.id}))),r>=0&&a>=0&&(t[r].cards=t[r].cards.filter((function(e){return e.id!==n}))),t}(r,t,e)})),Object(On.a)((function(e){n.setBackup(e)})))}))}(Nn),zn=new function e(n){var t=this;Object(h.a)(this,e),this.storageService=n,this.currentCardChannel=void 0,this.cardChannel=void 0,this.repeatingResultChannel=void 0,this.statisticChannel=void 0,this.statisticValue={inProgress:0,todo:0,done:0},this.cardChannel=new P((function(e){var n=e.cardsGroupID,a=void 0===n?null:n,i=e.cardID,c=void 0===i?null:i;return t.storageService.getBackup().pipe(Object(se.a)((function(e){return In(e,a,c)})),Object(Cn.a)((function(e){return t.storageService.getSettings().pipe(Object(se.a)((function(n){return n.isRandomRepeating&&(e=function(e){for(var n,t=[],r=e.length;r;)(n=Math.floor(Math.random()*e.length))in e&&(t.push(e[n]),delete e[n],r--);return t}(e)),e})))})),Object(On.a)((function(e){t.statisticValue=function(e){var n={inProgress:0,todo:0,done:0};return e.forEach((function(e){e.rangeOfKnowledge===r.IN_PROGRESS?n.inProgress=n.inProgress+1:e.rangeOfKnowledge===r.TO_DO?n.todo=n.todo+1:n.done=n.done+1})),n}(e)})),Object(se.a)((function(e){return function(e){var n=e.find((function(e){return e.rangeOfKnowledge===r.TO_DO}));return n||(n=e.find((function(e){return e.rangeOfKnowledge===r.IN_PROGRESS}))),1===e.length&&(n=e[0]),n}(e)})))})),this.repeatingResultChannel=new P((function(e){return t.storageService.getBackup().pipe(Object(se.a)((function(n){return function(e,n){return n.forEach((function(n){e.cardsGroupID&&n.id!==e.cardsGroupID||n.cards.forEach((function(n){e.cardID&&n.id!==e.cardID||(e.isKnown&&n.rangeOfKnowledge===r.IN_PROGRESS||e.isKnown&&n.rangeOfKnowledge===r.TO_DO?n.rangeOfKnowledge=r.DONE:e.isKnown||n.rangeOfKnowledge!==r.TO_DO||(n.rangeOfKnowledge=r.IN_PROGRESS))}))})),n}(e,n)})),Object(Cn.a)((function(e){return t.storageService.setBackup(e)})))})),this.currentCardChannel=new P((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t.storageService.getBackup().pipe(Object(se.a)((function(n){return In(n,e)})),Object(se.a)((function(e){return Gn(e)})))})),this.statisticChannel=new P((function(){return Object(N.a)(t.statisticValue)}))}(Nn),Mn=new function e(n){var t=this;Object(h.a)(this,e),this.storageService=n,this.localBackupChannel=void 0,this.loadBackupChannel=void 0,this.localBackupChannel=new P((function(){return t.storageService.getBackup().pipe(Object(On.a)((function(e){return function(e){var n=JSON.stringify(e,null,4),t=new Blob([n],{type:"octet/stream"}),r=window.URL.createObjectURL(t),a=document.createElement("a");a&&(a.href=r,a.download="My Cards.txt",a.click()),window.URL.revokeObjectURL(r)}(e)})))})),this.loadBackupChannel=new P((function(e){return Object(N.a)("").pipe(Object(Cn.a)((function(){return t.storageService.setBackup(JSON.parse(e))})))}))}(Nn),Qn=new function e(n){Object(h.a)(this,e),this.settingsChannel=void 0,this.changeSettingsChannel=void 0,this.settingsChannel=new P((function(){return n.getSettings()})),this.changeSettingsChannel=new P((function(e){return n.setSettings(e)}))}(Nn);var qn=function(){var e=Object(a.useState)(re),n=Object(u.a)(e,2),t=n[0],r=n[1];return Object(a.useEffect)((function(){var e=window.screen.height,n=window.screen.width;t.height===e&&t.width===n||r(Object(s.a)(Object(s.a)({},t),{},{height:e,width:n}))})),Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(En.Provider,{value:t,children:Object(R.jsx)(l.a,{children:Object(R.jsxs)("div",{children:[Object(R.jsx)($,{errorService:Bn}),Object(R.jsx)(L,{}),Object(R.jsx)(U,{}),Object(R.jsx)(oe,{confirmDialogService:Tn}),Object(R.jsxs)("div",{className:"page-container",style:{height:t.height-110,width:t.width},children:[Object(R.jsx)(te,{spinnerService:Rn}),Object(R.jsx)(gn,{cardsGroupsListService:Pn,cardsGroupsEditorService:Fn,googleAuthService:An,googleBackupsService:Ln,errorService:Bn,spinnerService:Rn,confirmDialogService:Tn,cardsEditorService:_n,cardsListService:Kn,cardsRepeaterService:zn,localBackupsService:Mn,settingsService:Qn})]})]})})})})},Un=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,279)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),r(e),a(e),i(e),c(e)}))};o.a.render(Object(R.jsx)(i.a.StrictMode,{children:Object(R.jsx)(qn,{})}),document.getElementById("root")),Un()}},[[188,1,2]]]);
//# sourceMappingURL=main.001f17f0.chunk.js.map