(this["webpackJsonpmy-cards-web"]=this["webpackJsonpmy-cards-web"]||[]).push([[0],{180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},211:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(68),c=n.n(i),o=(n(180),n(3)),s=n(14),u=n(102),l=(n(181),n(284)),d=n(286),h=n(287),b=n(92),g=n(141),f=n.n(g),p=(n(182),n(0)),j=function(e){var t=e.pageLabel,n=e.onClick;return Object(p.jsx)(l.a,{position:"fixed",children:Object(p.jsxs)(d.a,{className:"toolbar",children:[Object(p.jsx)(h.a,{className:"toolbar_menu-icon",edge:"start",color:"inherit","aria-label":"menu",onClick:n,children:Object(p.jsx)(f.a,{})}),Object(p.jsx)(b.a,{className:"toolbar_label",variant:"h6",children:t})]})})},v=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Object(r.useRef)({subscription:null});if(!i.current.subscription||i.current.subscription.closed){var c=e.subscribe(t,n,a);i.current.subscription=c}Object(r.useEffect)((function(){return function(){e.unsubscribe()}}),[e])},O=n(16),C=function(e,t,n){var a,i=Object(O.h)(),c=Object(O.g)(),o=Object(r.useState)(e),u=Object(s.a)(o,2),l=u[0],d=u[1],h=function(){var e=Object(r.useRef)([]);return Object(r.useEffect)((function(){return function(){e.current.forEach((function(e){e.closed||e.unsubscribe()})),e.current=[]}}),[]),{setSubscription:function(t){e.current.push(t)}}}().setSubscription,b={location:i,history:c,services:t,state:l,setState:d,context:Object(r.useContext)(n),setSubscription:h};return{callbackFactory:(a=b,function(e){return function(t){return e(a,t)}}),callbackSettings:b}},S=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(){return n}))},x=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(){return n}))},m=function(e){e.services.navigationPanelService.navigationPanelOpenChannel.next("")},k=function(e){var t=C("",e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.services,c=i.toolbarService,o=(i.navigationPanelService,a.state),s=a.location;v(c.toolbarExternalLabelChannel,n(S)),v(c.pageLabelChannel,n(x)),Object(r.useEffect)((function(){c.pageLabelChannel.next(s.pathname)}),[s.pathname]);var u=Object(r.useCallback)(n(m),[]);return Object(p.jsx)(j,{pageLabel:o,onClick:u})},D=n(266),w=n(288),I={path:"/google-auth",name:"Auth Google"},E={path:"/google-backups",name:"Google Backups"},y={path:"/cards-groups",name:"Cards Groups"},R={path:"/cards-list",name:"Cards"},G={path:"/cards-repeater",name:"Repeat Card"},B={path:"/cards-editor",name:"Edit Card"},N={path:"/local-backups",name:"Local Backups"},T={path:"/cards-group-editor",name:"Edit Group"},P={path:"/settings",name:"Settings"},A={path:"/card-viewer",name:"Card Preview"},K={path:"/statistic",name:"Statistic"},L=n(269),_=function(e){var t=e.path,n=e.name,r=e.toggleDrawer;return Object(p.jsx)(L.a,{button:!0,children:Object(p.jsx)(u.b,{to:t,onClick:r,children:n})})},F=function(e){var t=e.isOpen,n=e.toggleDrawer;return Object(p.jsx)(D.a,{anchor:"left",open:t,onClose:n,onOpen:n,children:Object(p.jsxs)(w.a,{children:[Object(p.jsx)(_,{path:y.path,name:y.name,toggleDrawer:n}),Object(p.jsx)(_,{path:K.path,name:K.name,toggleDrawer:n}),Object(p.jsx)(_,{path:I.path,name:I.name,toggleDrawer:n}),Object(p.jsx)(_,{path:N.path,name:N.name,toggleDrawer:n}),Object(p.jsx)(_,{path:P.path,name:P.name,toggleDrawer:n})]})})},q={isOpen:!1},M=function(e){(0,e.setState)((function(e){return Object(o.a)(Object(o.a)({},e),{},{isOpen:!0})}))},Q=function(e,t){var n=e.setState,r=t&&t.nativeEvent;(!t||"keydown"!==t.type||"Tab"!==(null===r||void 0===r?void 0:r.key)&&"Shift"!==(null===r||void 0===r?void 0:r.key))&&n((function(e){return Object(o.a)(Object(o.a)({},e),{},{isOpen:!e.isOpen})}))},H=function(e){var t=C(q,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.state,c=a.services.navigationPanelService;v(c.navigationPanelOpenChannel,n(M));var o=Object(r.useCallback)(n(Q),[]);return Object(p.jsx)(F,{isOpen:i.isOpen,toggleDrawer:o})},z=n(279),U=n(257),V=n(280),W=n(281),J=n(282),Y=n(283),$=function(e){var t=e.isOpen,n=e.errorMessage,r=e.handleClose;return Object(p.jsxs)(z.a,{open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:r,children:[Object(p.jsx)(U.a,{id:"alert-dialog-title",children:"Something went wrong"}),Object(p.jsx)(V.a,{children:Object(p.jsx)(W.a,{id:"alert-dialog-description",children:n})}),Object(p.jsx)(J.a,{children:Object(p.jsx)(Y.a,{color:"primary",onClick:r,children:"Ok"})})]})},X={isOpen:!1,errorMessage:""},Z=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(){return{isOpen:!0,errorMessage:n}}))},ee=function(e){(0,e.setState)((function(){return X}))},te=function(e){var t=C(X,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.state,c=a.services.errorService;v(c.errorChannel,n(Z));var o=Object(r.useCallback)(n(ee),[]);return Object(p.jsx)($,{isOpen:i.isOpen,errorMessage:i.errorMessage,handleClose:o})},ne=n(289),re=function(e){return e.isShow?Object(p.jsx)(ne.a,{color:"secondary"}):null},ae=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t((function(){return 0!==n}))},ie=function(e){var t=C(!1,e,ii),n=t.callbackFactory,r=t.callbackSettings,a=r.state,i=r.services.spinnerService;return v(i.spinnerCounterChannel,n(ae)),Object(p.jsx)(re,{isShow:a})},ce=(n(192),function(e){var t=e.titleBackgroundColor,n=void 0===t?"grey":t,r=e.icon,a=void 0===r?null:r;return Object(p.jsx)(U.a,{id:"alert-dialog-title",style:{backgroundColor:n,color:"white"},children:Object(p.jsxs)("div",{className:"dialog-title_value",children:["Warning ",a]})})}),oe=function(e){var t=e.onClickAgree,n=e.onClickDisagree,r=e.isOpen,a=e.message,i=e.onClose,c=e.titleBackgroundColor,o=void 0===c?"grey":c,s=e.icon,u=void 0===s?null:s;return Object(p.jsx)("div",{children:Object(p.jsxs)(z.a,{open:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:i,children:[Object(p.jsx)(ce,{titleBackgroundColor:o,icon:u}),Object(p.jsx)(V.a,{children:Object(p.jsx)(W.a,{id:"alert-dialog-description",children:a})}),Object(p.jsxs)(J.a,{children:[Object(p.jsx)(Y.a,{onClick:n,color:"primary",children:"Disagree"}),Object(p.jsx)(Y.a,{onClick:t,color:"primary",autoFocus:!0,children:"Agree"})]})]})})},se={isOpen:!1,message:"",icon:null,titleBackgroundColor:"grey"},ue=function(e){var t=e.setState,n=(e.services.confirmDialogService,arguments.length>1&&void 0!==arguments[1]?arguments[1]:se);t((function(){return Object(o.a)({},n)}))},le=function(e){var t=e.setState,n=e.services.confirmDialogService;t((function(e){return Object(o.a)(Object(o.a)({},e),{},{isOpen:!1,message:""})})),n.confirmationChannel.unsubscribe()},de=function(e){e.services.confirmDialogService.confirmationChannel.next(!0)},he=function(e){e.services.confirmDialogService.confirmationChannel.next(!1)},be=function(e){var t=C(se,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.state,c=a.services.confirmDialogService;v(c.openDialogChannel,n(ue));var o=Object(r.useCallback)(n(le),[]),s=Object(r.useCallback)(n(de),[]),u=Object(r.useCallback)(n(he),[]);return Object(p.jsx)(oe,{isOpen:i.isOpen,onClickAgree:s,onClickDisagree:u,onClose:o,message:i.message,titleBackgroundColor:i.titleBackgroundColor,icon:i.icon})},ge=n(15),fe=n(272),pe=n(142),je=n(80),ve=n(277),Oe=function(e){var t=e.value,n=e.other;return"object"!==typeof t?t===n:!(t instanceof Array&&n instanceof Array&&t.length!==n.length)&&(console.log("checked"),JSON.stringify(t)===JSON.stringify(n))},Ce=n(22),Se=function(e,t){var n=function(e){var t="(function worker() {\n            var self = this;\n            self.onmessage = function(e) {\n                const result = (".concat(e.toString(),")(e.data)\n                self.postMessage(result);\n            }\n        })()"),n=new Blob([t],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}(t);return new Ce.a((function(t){n.postMessage(e),n.onmessage=function(e){t.next(e.data),t.complete(),n.terminate()},n.onerror=function(e){t.error(e)}}))},xe=function(){function e(t){Object(ge.a)(this,e),this.outputSubject=void 0,this.observableCreator=void 0,this.subscriptions=[],this.previousEmittedValue=null,this.outputSubject=new ve.a,this.observableCreator=t}return Object(je.a)(e,[{key:"next",value:function(e){var t=this;this.subscriptions.push(this.observableCreator(e).subscribe((function(e){t.outputSubject.next(e)}),(function(e){t.outputSubject.error(e)})))}},{key:"subscribe",value:function(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.outputSubject.subscribe((function(n){t&&(a?r.deepEqual(t,n):(t(n),e.globalNextHandler()))}),(function(t){n&&n(t),e.globalErrorHandler(t)}));return this.subscriptions.push(i),i}},{key:"deepEqual",value:function(t,n){var r=this;this.previousEmittedValue||(t(n),e.globalNextHandler(),this.previousEmittedValue=n);var a=Se({value:n,other:this.previousEmittedValue},Oe).subscribe((function(a){a||(t(n),e.globalNextHandler(),r.previousEmittedValue=n)}),(function(e){console.error(e)}));this.subscriptions.push(a)}},{key:"unsubscribe",value:function(){this.subscriptions.forEach((function(e){e.closed||e.unsubscribe()})),this.subscriptions=[],this.previousEmittedValue=null}}]),e}();xe.globalErrorHandler=function(e){},xe.globalNextHandler=function(){},xe.setGlobalErrorHandler=function(e){xe.globalErrorHandler=e},xe.setGlobalNextHandler=function(e){xe.globalNextHandler=e};var me,ke=n(117),De=(n(193),n(290)),we=n(109),Ie=n.n(we),Ee=(n(194),function(e){var t=e.onClick;return Object(p.jsx)(De.a,{size:"medium",color:"secondary","aria-label":"add",className:"add-button",onClick:t,children:Object(p.jsx)(Ie.a,{})})}),ye=n(115),Re=n(73),Ge=n(111),Be=n(292),Ne=n(291),Te=function(e){var t=e.percent;return Object(p.jsxs)(Ne.a,{position:"relative",display:"inline-flex",children:[Object(p.jsx)(Be.a,{variant:"determinate",value:t}),Object(p.jsx)(Ne.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(p.jsx)(b.a,{variant:"caption",component:"div",color:"textSecondary",children:"".concat(Math.round(t),"%")})})]})},Pe=n(110),Ae=n.n(Pe),Ke=n(155),Le=n(275),_e=function(e){var t=e.onEdit,n=e.onDelete,r=e.onResetProgress,i=a.a.useState(null),c=Object(s.a)(i,2),o=c[0],u=c[1],l=function(){u(null)};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(Ke.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:l,children:[Object(p.jsx)(Le.a,{onClick:function(){t(),l()},children:"Edit"}),Object(p.jsx)(Le.a,{onClick:function(){r(),l()},children:"Reset progress"}),Object(p.jsx)(Le.a,{onClick:function(){n(),l()},children:"Delete"})]}),Object(p.jsx)(h.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},children:Object(p.jsx)(Ae.a,{})})]})},Fe=(n(196),"dd-MM-yyyy"),qe=function(e){var t=e.cardsGroup,n=e.onClickItem,r=e.onEditItem,a=e.onDeleteItem,i=e.onResetProgress;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(L.a,{button:!0,component:"div",children:[Object(p.jsx)(Re.a,{onClick:function(){return n(t.id)},children:Object(p.jsx)(Te,{percent:t.percentRepeatedCards||0})}),Object(p.jsx)(Ge.a,{className:"cards-groups-list-item_card-name",onClick:function(){return n(t.id)},primary:t.nameCardsGroup,secondary:"Last repeating date: "+Object(ye.a)(t.repeatingDate?t.repeatingDate:new Date,Fe)}),Object(p.jsx)(Re.a,{children:Object(p.jsx)(_e,{onEdit:function(){return r(t.id)},onDelete:function(){return a(t.id)},onResetProgress:function(){return i(t.id)}})})]},t.id)})},Me=n(270),Qe=n(293),He=n(264),ze=n(296),Ue=n(268),Ve=n(144),We=n.n(Ve),Je=function(e){var t=e.onChangeSearchableText,n=e.filter,r=e.onChangeSorting,a=e.sortVariants;return Object(p.jsxs)(Me.a,{children:[Object(p.jsx)(Qe.a,{expandIcon:Object(p.jsx)(We.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(p.jsx)(He.a,{className:"text-editor",required:!0,id:"outlined-required",placeholder:"Search text",onChange:function(e){t(e.target.value)},value:n.searchableText,style:{marginRight:"20px"},onClick:function(e){e.stopPropagation(),e.preventDefault()}})}),Object(p.jsx)(ze.a,{children:Object(p.jsx)(Ue.a,{value:n.sort,label:"Sorting",onChange:function(e){r(e.target.value)},children:a.map((function(e){return Object(p.jsx)(Le.a,{value:e,children:e},e)}))})})]})};!function(e){e.NONE="\u041d\u0435\u0442 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438",e.QUESTION_ASK="\u041f\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u0443 \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",e.QUESTION_DESK="\u041f\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u0443 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",e.ANSWER_ASK="\u041f\u043e \u043e\u0442\u0432\u0435\u0442\u0443 \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",e.ANSWER_DESK="\u041f\u043e \u043e\u0442\u0432\u0435\u0442\u0443 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",e.NAME_ASK="\u041f\u043e \u0438\u043c\u0435\u043d\u0438 \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",e.NAME_DESK="\u041f\u043e \u0438\u043c\u0435\u043d\u0438 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",e.STATUS_ASK="\u041f\u043e \u0441\u0442\u0441\u0430\u0442\u0443\u0441\u0443 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u043d\u044b\u0435",e.STATUS_DESK="\u041f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0435 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u043d\u044b\u0435",e.DATE_ASK="\u041f\u043e \u0434\u0430\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u044f \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u0435",e.DATE_DESK="\u041f\u043e \u0434\u0430\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u044f \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435",e.PROGRESS_ASK="\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441 \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u0435",e.PROGRESS_DESC="\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441 \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u044f \u043f\u043e\u043d\u0438\u0436\u0435\u043d\u0438\u0435"}(me||(me={}));var Ye,$e=function(e){var t=e.cardsGroups,n=e.onClickItem,r=e.onEditItem,a=e.onDeleteItem,i=e.onOpenEditor,c=e.onResetProgress,o=e.onChangeSearchableText,s=e.onChangeSorting,u=e.filter,l=e.height;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Je,{filter:u,onChangeSearchableText:o,onChangeSorting:s,sortVariants:[me.NONE,me.DATE_ASK,me.DATE_DESK,me.NAME_ASK,me.NAME_DESK,me.PROGRESS_ASK,me.PROGRESS_DESC]}),Object(p.jsx)(ke.a,{className:"cards-groups",itemData:t,itemSize:55,itemCount:t.length,overscanCount:5,height:l,width:"100%",children:function(e){var i=e.index,o=e.style,s=t[i];return Object(p.jsx)("div",{style:o,children:Object(p.jsx)(qe,{cardsGroup:s,onClickItem:n,onEditItem:r,onDeleteItem:a,onResetProgress:c},s.id)})}}),Object(p.jsx)(Ee,{onClick:i})]})},Xe=function(e){var t=Object(r.useRef)({isFirstRun:!0});t.current.isFirstRun&&(e(),t.current.isFirstRun=!1)},Ze=n(145),et=n.n(Ze),tt=function(e){var t=e.services,n=e.setSubscription,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=t.confirmDialogService,i=t.cardsGroupsListService,c=a.confirmationChannel.subscribe((function(e){e&&i.resetProgressChannel.next(r),a.openDialogChannel.next(se)}));n(c),a.openDialogChannel.next({isOpen:!0,message:"Do you want to reset progress of this group?",titleBackgroundColor:"green",icon:Object(p.jsx)(et.a,{})})},nt=function(e){var t=e.history,n=e.location,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.push({pathname:T.path,state:Object(o.a)(Object(o.a)({},n.state),{},{cardsGroupID:r})})},rt=n(27),at=n.n(rt),it=function(e){e.history,e.location;var t=e.services,n=t.confirmDialogService,r=t.cardsGroupsListService,a=e.setSubscription,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,c=n.confirmationChannel.subscribe((function(e){e&&r.groupDeleteChannel.next(i),n.openDialogChannel.next(se)}));a(c),n.openDialogChannel.next({isOpen:!0,message:"Do you want to remove this group?",icon:Object(p.jsx)(at.a,{}),titleBackgroundColor:"red"})},ct=function(e){e.history.push({pathname:T.path})},ot=function(e){var t=e.history,n=e.location,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.push({pathname:R.path,state:Object(o.a)(Object(o.a)({},n.state),{},{cardsGroupID:r})})},st=function(e){var t=e.services;t.cardsGroupsListService.groupsListChannel.next(""),t.cardsGroupsListService.filterChannel.next("")},ut=function(e){e.services.cardsGroupsListService.groupsListChannel.next("")},lt=function(e){e.services.cardsGroupsListService.groupsListChannel.next("")},dt=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t((function(e){return Object(o.a)(Object(o.a)({},e),{},{cardsGroups:n})}))},ht=function(e){var t=e.services.cardsGroupsListService,n=e.setState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me.NONE;n((function(e){var n=Object(o.a)(Object(o.a)({},e.filter),{},{sort:r});return t.changeFilterChannel.next(n),e}))},bt=function(e){var t=e.services.cardsGroupsListService;t.filterChannel.next(""),t.groupsListChannel.next("")},gt={searchableText:"",sort:me.NONE},ft=function(e){var t=e.setState,n=(e.services,arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt);t((function(e){return Object(o.a)(Object(o.a)({},e),{},{filter:n})}))},pt=function(e){var t=e.setState,n=e.services.cardsGroupsListService,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){return n.changeFilterChannel.next(Object(o.a)(Object(o.a)({},e.filter),{},{searchableText:r})),e}))},jt={cardsGroups:[],filter:gt},vt=function(e){var t=C(jt,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.state,c=a.context,o=a.services.cardsGroupsListService;v(o.groupsListChannel,n(dt)),v(o.groupDeleteChannel,n(lt)),v(o.resetProgressChannel,n(ut)),v(o.changeFilterChannel,n(bt)),v(o.filterChannel,n(ft)),Xe(n(st));var s=Object(r.useCallback)(n(ot),[]),u=Object(r.useCallback)(n(ct),[]),l=Object(r.useCallback)(n(it),[]),d=Object(r.useCallback)(n(nt),[]),h=Object(r.useCallback)(n(tt),[]),b=Object(r.useCallback)(n(ht),[]),g=Object(r.useCallback)(n(pt),[]);return Object(p.jsx)($e,{onClickItem:s,onOpenEditor:u,onDeleteItem:l,onEditItem:d,onResetProgress:h,onChangeSorting:b,filter:i.filter,onChangeSearchableText:g,height:c.height,cardsGroups:i.cardsGroups})},Ot=n(146),Ct=n.n(Ot),St=(n(197),function(e){var t=e.onSuccess,n=e.onFailure,r=e.height;return Object(p.jsx)("div",{className:"google-auth",style:{height:r},children:Object(p.jsx)(Ct.a,{className:"google-auth_button",clientId:"627973926597-tj2la0mnorvm04cqmcosu2nj3b02g6k2.apps.googleusercontent.com",buttonText:"Login",onSuccess:t,onFailure:n,scope:"profile email https://www.googleapis.com/auth/drive"})})}),xt=function(e,t){e.services.googleAuthService.loginChannel.next(t.accessToken)},mt=function(e){e.services.errorService.errorChannel.next("Error of connection")},kt=function(e){e.history.replace(E.path)},Dt=function(e){var t=C(null,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.context,c=a.services.googleAuthService;v(c.loginChannel,n(kt));var o=Object(r.useCallback)(n(xt),[]),s=Object(r.useCallback)(n(mt),[]);return Object(p.jsx)(St,{onSuccess:o,onFailure:s,height:i.height})},wt=function(e){var t=e.backupID,n=e.onLoad,r=e.onDelete,i=a.a.useState(null),c=Object(s.a)(i,2),o=c[0],u=c[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(Ke.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:function(){u(null)},children:[Object(p.jsx)(Le.a,{onClick:function(){u(null),n(t)},children:"Load"}),Object(p.jsx)(Le.a,{onClick:function(){u(null),r(t)},children:"Delete"})]}),Object(p.jsx)(h.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},children:Object(p.jsx)(Ae.a,{})})]})},It=function(e){var t=e.backupName,n=e.backupDate,r=e.backupID,a=e.onLoad,i=e.onDelete;return Object(p.jsxs)(L.a,{children:[Object(p.jsx)(Ge.a,{primary:t,secondary:n}),Object(p.jsx)(Re.a,{children:Object(p.jsx)(wt,{backupID:r,onLoad:a,onDelete:i})})]})},Et=function(e){var t=e.backupsFiles,n=e.onLoad,r=e.onCreate,a=e.onDelete;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(w.a,{children:t.map((function(e){return Object(p.jsx)(It,{backupName:e.name,backupDate:e.createdTime,onLoad:n,onDelete:a,backupID:e.id},e.id)}))}),Object(p.jsx)(Ee,{onClick:r})]})},yt=function(e){var t=e.history;e.services.spinnerService.spinnerCounterChannel.next(-1),t.replace(I.path)},Rt=function(e){var t=e.setState,n=e.services.spinnerService,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t((function(e){return Object(o.a)(Object(o.a)({},e),{},{backupsFiles:r})})),n.spinnerCounterChannel.next(-1)},Gt=function(e){var t=e.history;e.services.spinnerService.spinnerCounterChannel.next(-1),t.replace(I.path)},Bt=function(e){e.services.spinnerService.spinnerCounterChannel.next(-1)},Nt=function(e){var t=e.services,n=t.googleBackupsService;t.spinnerService.spinnerCounterChannel.next(-1),n.backupsNameLoadChannel.next("")},Tt=function(e){var t=e.services,n=t.spinnerService;t.googleBackupsService.backupsNameLoadChannel.next(""),n.spinnerCounterChannel.next(-1)},Pt=function(e){e.services.googleBackupsService.backupsNameLoadChannel.next("")},At=n(147),Kt=n.n(At),Lt=function(e){var t=e.setSubscription,n=e.services,r=n.spinnerService,a=n.googleBackupsService,i=n.confirmDialogService,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-1",o=i.confirmationChannel.subscribe((function(e){e&&(r.spinnerCounterChannel.next(1),a.backupLoadChannel.next(c)),i.openDialogChannel.next(se)}));t(o),i.openDialogChannel.next({isOpen:!0,message:"Do you want to load this backup?",titleBackgroundColor:"red",icon:Object(p.jsx)(Kt.a,{})})},_t=function(e){var t=e.setSubscription,n=e.services,r=n.spinnerService,a=n.googleBackupsService,i=n.confirmDialogService,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-1",o=i.confirmationChannel.subscribe((function(e){e&&(r.spinnerCounterChannel.next(1),a.backupDeleteChannel.next(c)),i.openDialogChannel.next(se)}));t(o),i.openDialogChannel.next({isOpen:!0,message:"Do you want to delete this backup?",titleBackgroundColor:"red",icon:Object(p.jsx)(at.a,{})})},Ft=function(e){var t=C({backupsFiles:[]},e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.state,c=a.services,o=c.googleBackupsService,s=c.spinnerService;c.confirmDialogService;v(o.backupsNameLoadChannel,n(Rt),n(yt)),v(o.backupLoadChannel,n(Bt),n(Gt)),v(o.backupDeleteChannel,n(Nt)),v(o.backupUploadChannel,n(Tt)),Xe(n(Pt));var u=Object(r.useCallback)(n(Lt),[]),l=Object(r.useCallback)(n(_t),[]);return Object(p.jsx)(Et,{backupsFiles:i.backupsFiles,onLoad:u,onDelete:l,onCreate:function(){s.spinnerCounterChannel.next(1),o.backupUploadChannel.next()}})},qt=n(113),Mt=n.n(qt),Qt=n(149),Ht=n.n(Qt),zt=n(148),Ut=n.n(zt),Vt=n(150),Wt=n.n(Vt),Jt=(n(198),function(e){var t=e.onOpenEditor,n=e.onOpenRepeater,r=e.onStartSelecting,a=e.onMovingSelectedCards,i=e.onDeleteSelectedCards,c=e.onCopySelectedCards,o=(e.hideOpenRepeaterButton,e.hideOpenEditorButton),s=void 0!==o&&o,u=e.hideMovingSelectedCardsButton,l=void 0!==u&&u,d=e.hideDeleteSelectedCardsButton,h=void 0!==d&&d,b=e.hideCopySelectedCardButton,g=void 0!==b&&b;return Object(p.jsxs)("div",{className:"cards-list-actions",children:[Object(p.jsx)(De.a,{size:"medium",color:"secondary",onClick:r,children:Object(p.jsx)(Ut.a,{})}),Object(p.jsx)(De.a,{size:"medium",color:"primary",onClick:n,children:Object(p.jsx)(Ht.a,{})}),!s&&Object(p.jsx)(De.a,{size:"medium",color:"secondary",onClick:t,children:Object(p.jsx)(Ie.a,{})}),!l&&Object(p.jsx)(De.a,{size:"medium",color:"primary",onClick:a,children:Object(p.jsx)(Wt.a,{})}),!g&&Object(p.jsx)(De.a,{size:"medium",color:"secondary",onClick:c,children:Object(p.jsx)(Mt.a,{})}),!h&&Object(p.jsx)(De.a,{size:"medium",color:"secondary",onClick:i,children:Object(p.jsx)(at.a,{})})]})}),Yt=(n(199),n(151)),$t=n.n(Yt),Xt=n(271);!function(e){e[e.TO_DO=0]="TO_DO",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.DONE=2]="DONE"}(Ye||(Ye={}));n(200);var Zt=function(e){var t=e.card;return Object(p.jsxs)("div",{className:"card-primary-text",children:[Object(p.jsx)("p",{className:"card-primary-text_title",children:t.question}),Object(p.jsx)("p",{className:"card-primary-text_content",children:t.answer})]})},en=function(e){var t=e.card,n=e.onEditItem,r=e.onDeleteItem,a=e.onResetProgress,i=e.onClickItem,c=e.onSelect,o=e.isEnabledSelecting,s=e.isSelected,u="Last repeating date: "+Object(ye.a)(t.dateRepeating?t.dateRepeating:new Date,Fe);return Object(p.jsxs)(L.a,{button:!0,children:[Object(p.jsx)(Re.a,{onClick:function(){return i(t.id)},children:Object(p.jsx)($t.a,{style:{color:function(e){return e.rangeOfKnowledge===Ye.DONE?"green":e.rangeOfKnowledge===Ye.IN_PROGRESS?"yellow":"red"}(t)}})}),Object(p.jsx)(Ge.a,{onClick:function(){return i(t.id)},primary:Object(p.jsx)(Zt,{card:t}),secondary:u}),o?Object(p.jsx)(Re.a,{onClick:function(){return o&&c(t.id)},children:Object(p.jsx)(Xt.a,{edge:"start",checked:s,tabIndex:-1,disableRipple:!0})}):Object(p.jsx)(Re.a,{children:Object(p.jsx)(_e,{onEdit:function(){return n(t.id)},onDelete:function(){return r(t.id)},onResetProgress:function(){return a(t.id)}})})]},t.id)},tn=function(e){var t=e.cards,n=e.height,r=e.onEditItem,a=e.onDeleteItem,i=e.onSelectItem,c=e.onResetProgress,o=e.onClickItem,s=e.isEnabledSelecting,u=e.selectedItems;return Object(p.jsx)(ke.a,{className:"cards",itemData:t,itemSize:75,itemCount:t.length,overscanCount:5,height:n,width:"100%",children:function(e){var n=e.index,l=e.style,d=t[n];return Object(p.jsx)("div",{style:l,children:Object(p.jsx)(en,{card:d,onEditItem:r,onDeleteItem:a,onResetProgress:c,onClickItem:o,onSelect:i,isEnabledSelecting:s,isSelected:u[d.id]},d.id)})}})},nn=function(e){var t=e.cards,n=e.filter,r=e.onOpenEditor,a=e.onEditItem,i=e.onDeleteItem,c=e.onResetProgress,o=e.onClickItem,s=e.onChangeSearchableText,u=e.onChangeSorting,l=e.height,d=e.onOpenRepeater,h=e.onStartSelecting,b=e.onSelectItem,g=e.onDeleteSelectedCards,f=e.onMovingSelectedCards,j=e.onCopySelectedCards,v=e.isEnabledSelecting,O=e.selectedItems;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Je,{onChangeSearchableText:s,onChangeSorting:u,filter:n,sortVariants:[me.NONE,me.DATE_ASK,me.DATE_DESK,me.QUESTION_ASK,me.QUESTION_DESK,me.STATUS_ASK,me.STATUS_DESK,me.ANSWER_ASK,me.ANSWER_DESK]}),Object(p.jsx)(tn,{cards:t,height:l,onEditItem:a,onDeleteItem:i,onResetProgress:c,onClickItem:o,onSelectItem:b,isEnabledSelecting:v,selectedItems:O}),Object(p.jsx)(Jt,{onOpenRepeater:d,onOpenEditor:r,onStartSelecting:h,onCopySelectedCards:j,hideOpenEditorButton:v,hideOpenRepeaterButton:v,hideDeleteSelectedCardsButton:!v,hideMovingSelectedCardsButton:!v,hideCopySelectedCardButton:!v,onDeleteSelectedCards:g,onMovingSelectedCards:f})]})},rn=function(e){var t=e.services,n=t.confirmDialogService,r=t.cardsListService,a=e.setState;(0,e.setSubscription)(n.confirmationChannel.subscribe((function(e){e&&a((function(e){return r.deleteCardsChannel.next(e.selectedItems),e})),n.openDialogChannel.next(se)}))),n.openDialogChannel.next({isOpen:!0,message:"Do you want to delete this cards?",titleBackgroundColor:"red",icon:Object(p.jsx)(at.a,{})})},an=function(e){var t=e.services,n=e.setState,r=e.setSubscription,a=t.cardsListService,i=t.confirmDialogService,c=t.selectionDialogService;n((function(e){var t=c.selectionChannel.subscribe((function(t){var n=i.confirmationChannel.subscribe((function(n){n&&(a.copyCardsChannel.next({selectedItems:e.selectedItems,destinationGroupID:t}),c.openDialogChannel.next({isOpen:!1,title:"",selectionItems:[]})),i.openDialogChannel.next(se)}));r(n),i.openDialogChannel.next({isOpen:!0,message:"Do you want to copy this cards?",titleBackgroundColor:"orange",icon:Object(p.jsx)(Mt.a,{})})}));return r(t),c.openDialogChannel.next({isOpen:!0,title:"Select cards group",selectionItems:e.existedGroupsIDs}),e}))},cn=n(152),on=n.n(cn),sn=function(e){var t=e.services,n=e.setState,r=e.setSubscription;n((function(e){var n=t.cardsListService,a=t.confirmDialogService,i=t.selectionDialogService,c=i.selectionChannel.subscribe((function(t){var c=a.confirmationChannel.subscribe((function(r){r&&(n.movingCardsChannel.next({selectedItems:e.selectedItems,destinationGroupID:t}),i.openDialogChannel.next({isOpen:!1,title:"",selectionItems:[]})),a.openDialogChannel.next(se)}));r(c),a.openDialogChannel.next({isOpen:!0,message:"Do you want to move this cards?",titleBackgroundColor:"green",icon:Object(p.jsx)(on.a,{})})}));return r(c),i.openDialogChannel.next({isOpen:!0,title:"Select cards group",selectionItems:e.existedGroupsIDs}),e}))},un=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.setState;n((function(e){var n=Object(o.a)({},e.selectedItems);return n[t]?n[t]=!n[t]:n[t]=!0,Object(o.a)(Object(o.a)({},e),{},{selectedItems:n})}))},ln=function(e){(0,e.setState)((function(e){return Object(o.a)(Object(o.a)({},e),{},{isEnabledSelecting:!e.isEnabledSelecting,selectedItems:e.isEnabledSelecting?e.selectedItems:{}})}))},dn=function(e){var t=e.setState,n=e.location,r=e.services;t((function(e){return e.isEnabledSelecting?r.cardsListService.cardsIDsBySelectedItemsChannel.next(e.selectedItems):r.cardsListService.cardsIDsByGroupIDsChannel.next(n.state.cardsGroupID),e}))},hn=function(e){var t=e.setState,n=e.services,r=(e.location,arguments.length>1&&void 0!==arguments[1]?arguments[1]:me.NONE);t((function(e){var t=Object(o.a)(Object(o.a)({},e.filter),{},{sort:r});return n.cardsListService.changeFilterChannel.next(t),e}))},bn=function(e){var t=e.services,n=e.setState,r=(e.location,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"");n((function(e){var n=Object(o.a)(Object(o.a)({},e.filter),{},{searchableText:r});return t.cardsListService.changeFilterChannel.next(n),e}))},gn=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t((function(e){return Object(o.a)(Object(o.a)({},e),{},{cards:n})}))},fn=function(e,t){var n=e.history,r=e.location;n.push({pathname:G.path,state:Object(o.a)(Object(o.a)({},r.state),{},{cardsIDsForRepeating:t||[]})})},pn=function(e,t){var n=e.history,r=e.location;t&&t.length>1?n.push({pathname:G.path,state:Object(o.a)(Object(o.a)({},r.state),{},{cardsIDsForRepeating:t||[]})}):t&&1===t.length&&n.push({pathname:A.path,state:Object(o.a)(Object(o.a)({},r.state),{},{cardsGroupID:r.state.cardsGroupID,cardID:t[0]})})},jn=function(e){var t=e.setState,n=e.services,r=e.location,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt;t((function(e){return Object(o.a)(Object(o.a)({},e),{},{filter:a})})),n.cardsListService.cardsChannel.next({cardsGroupID:r.state.cardsGroupID,filter:a})},vn=function(e){var t=e.services,n=e.setState,r=(e.location,t.cardsListService);n((function(e){return r.filterChannel.next(""),r.existedGroupsIDsChannel.next(""),e}))},On=function(e){var t=e.services;e.location;t.cardsListService.filterChannel.next("")},Cn=function(e){var t=e.setState,n=e.services,r=e.location;t((function(e){return n.cardsListService.cardsChannel.next({cardsGroupID:r.state.cardsGroupID,filter:e.filter}),e}))},Sn=function(e){var t=e.setState,n=e.services,r=e.location;t((function(e){return n.cardsListService.cardsChannel.next({cardsGroupID:r.state.cardsGroupID,filter:e.filter}),e}))},xn=function(e){var t=e.setState,n=e.services,r=e.location;t((function(e){return n.cardsListService.cardsChannel.next({cardsGroupID:r.state.cardsGroupID,filter:e.filter}),e}))},mn=function(e){var t=e.services,n=e.setState,r=e.location;n((function(e){return t.cardsListService.cardsChannel.next({cardsGroupID:r.state.cardsGroupID,filter:e.filter}),e}))},kn=function(e){var t=e.setState,n=e.services,r=e.location;t((function(e){return n.cardsListService.cardsChannel.next({cardsGroupID:r.state.cardsGroupID,filter:e.filter}),e}))},Dn=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t((function(e){return Object(o.a)(Object(o.a)({},e),{},{existedGroupsIDs:n})}))},wn=function(e){var t=e.location;e.history.push({pathname:B.path,state:Object(o.a)(Object(o.a)({},t.state),{},{cardsGroupID:t.state.cardsGroupID})})},In=function(e){var t=e.location,n=e.history,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;n.push({pathname:B.path,state:Object(o.a)(Object(o.a)({},t.state),{},{cardsGroupID:t.state.cardsGroupID,cardID:r})})},En=function(e){var t=e.setSubscription,n=e.services,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=n.confirmDialogService,i=n.cardsListService,c=a.confirmationChannel.subscribe((function(e){e&&i.deleteSingleCardChannel.next(r),a.openDialogChannel.next(se)}));t(c),a.openDialogChannel.next({isOpen:!0,message:"Do you want to remove this card?",titleBackgroundColor:"red",icon:Object(p.jsx)(at.a,{})})},yn=function(e){var t=e.services,n=e.location,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.cardsListService.resetCardProgressChannel.next({cardID:r,cardsGroupID:n.state.cardsGroupID})},Rn=function(e){var t=e.location,n=e.history,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;n.push({pathname:A.path,state:Object(o.a)(Object(o.a)({},t.state),{},{cardsGroupID:t.state.cardsGroupID,cardID:r})})},Gn={cards:[],filter:gt,isEnabledSelecting:!1,selectedItems:{},existedGroupsIDs:[]},Bn=function(e){var t=C(Gn,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.state,c=a.context,o=a.services.cardsListService;v(o.cardsChannel,n(gn)),v(o.cardsIDsByGroupIDsChannel,n(fn)),v(o.cardsIDsBySelectedItemsChannel,n(pn)),v(o.filterChannel,n(jn)),v(o.changeFilterChannel,n(On)),v(o.resetCardProgressChannel,n(Cn)),v(o.deleteSingleCardChannel,n(Sn)),v(o.movingCardsChannel,n(xn)),v(o.copyCardsChannel,n(mn)),v(o.deleteCardsChannel,n(kn)),v(o.existedGroupsIDsChannel,n(Dn)),Xe(n(vn));var s=Object(r.useCallback)(n(wn),[]),u=Object(r.useCallback)(n(In),[]),l=Object(r.useCallback)(n(En),[]),d=Object(r.useCallback)(n(yn),[]),h=Object(r.useCallback)(n(Rn),[]),b=Object(r.useCallback)(n(bn),[i.filter]),g=Object(r.useCallback)(n(hn),[i.filter]),f=Object(r.useCallback)(n(ln),[]),j=Object(r.useCallback)(n(dn),[]),O=Object(r.useCallback)(n(un),[]),S=Object(r.useCallback)(n(sn),[]),x=Object(r.useCallback)(n(an),[]),m=Object(r.useCallback)(n(rn),[]);return Object(p.jsx)(nn,{filter:i.filter,onChangeSorting:g,onChangeSearchableText:b,cards:i.cards,onOpenEditor:s,onEditItem:u,onDeleteItem:l,onResetProgress:d,onClickItem:h,height:c.height,onOpenRepeater:j,onStartSelecting:f,isEnabledSelecting:i.isEnabledSelecting,onSelectItem:O,selectedItems:i.selectedItems,onMovingSelectedCards:S,onDeleteSelectedCards:m,onCopySelectedCards:x})},Nn=function(e){var t=e.repeatingProgress;return Object(p.jsxs)("div",{children:[Object(p.jsx)(Y.a,{size:"small",children:Object(p.jsxs)("span",{style:{color:"red"},children:["To Do: ",t.todo]})}),Object(p.jsx)(Y.a,{size:"small",children:Object(p.jsxs)("span",{style:{color:"orange"},children:["In progress: ",t.inProgress]})}),Object(p.jsx)(Y.a,{size:"small",children:Object(p.jsxs)("span",{style:{color:"green"},children:["Completed: ",t.done]})})]})},Tn=(n(201),function(e){var t=e.onBackClick;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{children:"No cards for repeating"}),Object(p.jsx)(Y.a,{size:"small",color:"primary",onClick:t,children:"Go back"})]})}),Pn=n(259),An=n(260),Kn=function(e){var t=e.isQuestionSide,n=e.onSwitchEditing,r=e.isEditable;return Object(p.jsxs)("div",{className:"cards-repeater_title",children:[Object(p.jsx)(b.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t?"Question":"Answer"}),Object(p.jsx)(h.a,{color:"inherit",onClick:n,children:r?Object(p.jsx)(Pn.a,{}):Object(p.jsx)(An.a,{})})]})},Ln=n(299),_n=n(298),Fn=(n(202),function(e){var t=e.viewHeight,n=e.text,r=e.onClickText,a=void 0===r?function(){}:r;return Object(p.jsx)(b.a,{component:"div",color:"textSecondary",gutterBottom:!0,onClick:a,className:"long-text-viewer",style:{height:t},children:Object(p.jsx)(w.a,{style:{paddingTop:0},children:n})})}),qn=(n(203),function(e){var t=e.onChangeText,n=e.changeableText,r=e.label;return Object(p.jsx)(He.a,{className:"text-editor",required:!0,id:"outlined-required",label:r||"",multiline:!0,onChange:function(e){t(e.target.value)},value:n,variant:"filled"})}),Mn=(n(204),function(e){var t=e.viewHeight,n=e.text,r=e.onChangeText;return Object(p.jsx)("div",{className:"long-text-editor",style:{height:t},children:Object(p.jsx)(qn,{onChangeText:r,changeableText:n})})}),Qn=n(297),Hn=function(e){var t=e.onClick;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Qn.a,{className:"cards-repeater_buttons-container",style:{height:10},children:Object(p.jsx)(Y.a,{size:"small",color:"primary",onClick:function(){return t()},children:"Remove"})})})},zn=function(e){var t=e.card,n=e.onClickCard,r=e.cardHeight,a=e.isEditable,i=e.onDeleteCard,c=e.onChangeQuestion,o=t?t.question:"";return Object(p.jsx)(_n.a,{children:Object(p.jsx)(Ln.a,{onClick:n,style:{height:r},children:a?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Mn,{text:o,viewHeight:r,onChangeText:c}),Object(p.jsx)(Hn,{onClick:i})]}):Object(p.jsx)(Fn,{viewHeight:r,text:o})})})},Un=function(e){var t=e.card,n=e.onClickYesNoButton;return Object(p.jsx)(p.Fragment,{children:t&&t.rangeOfKnowledge!==Ye.DONE?Object(p.jsxs)(Qn.a,{className:"cards-repeater_buttons-container",style:{height:10},children:[Object(p.jsx)(Y.a,{size:"small",color:"primary",onClick:function(){return n(!0)},children:"Yes"}),Object(p.jsx)(Y.a,{size:"small",color:"primary",onClick:function(){return n(!1)},children:"No"})]}):Object(p.jsx)("div",{children:"Repeated"})})},Vn=function(e){var t=e.card,n=e.cardHeight,r=e.onClickText,a=e.onClickYesNoButton,i=e.isEditable,c=e.onChangeAnswer,o=e.onDeleteCard,s=function(){return t?t.answer:""};return Object(p.jsx)(_n.a,{className:"cards-repeater",children:Object(p.jsx)(Ln.a,{style:{height:n},children:i?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Mn,{text:s(),viewHeight:n,onChangeText:c}),Object(p.jsx)(Hn,{onClick:o})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Fn,{viewHeight:n,text:s(),onClickText:r}),Object(p.jsx)(Un,{onClickYesNoButton:a,card:t})]})})})},Wn=function(e){var t=e.isQuestionSide,n=e.isEditable,r=e.onSwitchEditing,a=e.card,i=e.cardHeight,c=e.onClickCard,o=e.onChangeAnswer,s=e.onChangeQuestion,u=e.onDeleteCard,l=e.onClickYesNoButton;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Kn,{isQuestionSide:t,isEditable:n,onSwitchEditing:r}),t?Object(p.jsx)(zn,{card:a,onClickCard:c,cardHeight:i,isEditable:n,onChangeQuestion:s,onDeleteCard:u}):Object(p.jsx)(Vn,{card:a,onClickText:c,cardHeight:i,onClickYesNoButton:l,onChangeAnswer:o,isEditable:n,onDeleteCard:u})]})},Jn=function(e){var t=e.card,n=e.cardHeight,r=e.isQuestionSide,a=e.onClickCard,i=e.onClickYesNoButton,c=e.repeatingProgress,o=e.onBackClick,s=e.onSwitchEditing,u=e.isEditable,l=e.onChangeAnswer,d=e.onChangeQuestion,h=e.onDeleteCard;return t&&-1!==t.id?Object(p.jsxs)("div",{className:"cards-repeater",children:[Object(p.jsx)(Nn,{repeatingProgress:c}),Object(p.jsx)(Wn,{card:t,onDeleteCard:h,onClickYesNoButton:i,isQuestionSide:r,onClickCard:a,cardHeight:n,onSwitchEditing:s,isEditable:u,onChangeQuestion:d,onChangeAnswer:l})]}):Object(p.jsx)(Tn,{onBackClick:o})},Yn=function(e){var t=e.services,n=e.setState,r=e.setSubscription,a=t.confirmDialogService,i=t.cardsRepeaterService;r(a.confirmationChannel.subscribe((function(e){e&&n((function(e){return i.deleteSingleCardChannel.next(e.card.id),e})),a.openDialogChannel.next(se)}))),a.openDialogChannel.next({isOpen:!0,message:"Do you want to delete this cards?",titleBackgroundColor:"red",icon:Object(p.jsx)(at.a,{})})},$n=function(e){var t=e.services,n=e.location;t.cardsRepeaterService.cardChannel.next(n.state?n.state.cardsIDsForRepeating:[])},Xn=function(e,t){e.services.toolbarService.toolbarExternalLabelChannel.next(t)},Zn={id:-1,question:"",answer:"",rangeOfKnowledge:Ye.IN_PROGRESS,dateRepeating:0},er=function(e){var t=e.services.cardsRepeaterService,n=e.setState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zn;t.cardGroupNameChannel.next(r.id),n((function(e){return Object(o.a)(Object(o.a)({},e),{},{card:r,isQuestionSide:!0,isEditable:!1})})),t.repeatingProgressChannel.next("")},tr=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zn;t((function(e){return Object(o.a)(Object(o.a)({},e),{},{card:n})}))},nr={inProgress:0,todo:0,done:0},rr=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nr;t((function(e){return Object(o.a)(Object(o.a)({},e),{},{repeatingProgress:n})}))},ar=function(e){var t=e.services.cardsRepeaterService,n=e.location;t.cardChannel.next(n.state.cardsIDsForRepeating)},ir=function(e){var t=e.services.cardsRepeaterService,n=e.location;n.state&&t.cardChannel.next(n.state.cardsIDsForRepeating),t.repeatingProgressChannel.next("")},cr=function(e){var t=e.setState,n=e.location,r=e.services.cardsRepeaterService,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t((function(e){return e.card?(r.repeatingResultChannel.next({isKnown:a,cardID:e.card.id,cardsGroupID:n.state.cardsGroupID}),e):Object(o.a)(Object(o.a)({},e),{},{card:{id:-1,question:"",answer:"",rangeOfKnowledge:Ye.IN_PROGRESS,dateRepeating:0},isQuestionSide:!1,isEditable:!1})}))},or=function(e){(0,e.setState)((function(e){return e.isEditable?e:Object(o.a)(Object(o.a)({},e),{},{isQuestionSide:!e.isQuestionSide})}))},sr=function(e){e.history.goBack()},ur=function(){return{rangeOfKnowledge:Ye.IN_PROGRESS,answer:"",question:"",dateRepeating:0,id:(new Date).getTime()}},lr=function(e){var t=e.setState,n=e.location,r=e.services.cardsEditorService;t((function(e){return e.isEditable&&r.cardEditingChannel.next({card:e.card||ur(),cardsGroupID:n.state.cardsGroupID}),Object(o.a)(Object(o.a)({},e),{},{isEditable:!e.isEditable})}))},dr=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){if(e.card){var t=Object(o.a)(Object(o.a)({},e.card),{},{question:n});return Object(o.a)(Object(o.a)({},e),{},{card:t})}return e}))},hr=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){if(e.card){var t=Object(o.a)(Object(o.a)({},e.card),{},{answer:n});return Object(o.a)(Object(o.a)({},e),{},{card:t})}return e}))},br={card:{id:-1,question:"",answer:"",rangeOfKnowledge:Ye.IN_PROGRESS,dateRepeating:0},isQuestionSide:!0,isEditable:!1,repeatingProgress:nr},gr=function(e){var t=C(br,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.state,c=a.context,o=a.services,s=o.cardsRepeaterService,u=o.cardsEditorService;v(s.deleteSingleCardChannel,n($n)),v(s.cardGroupNameChannel,n(Xn)),v(s.cardChannel,n(er)),v(u.cardEditingChannel,n(tr)),v(s.repeatingProgressChannel,n(rr)),v(s.repeatingResultChannel,n(ar)),Xe(n(ir));var l=Object(r.useCallback)(n(cr),[]),d=Object(r.useCallback)(n(or),[]),h=Object(r.useCallback)(n(sr),[]),b=Object(r.useCallback)(n(lr),[]),g=Object(r.useCallback)(n(dr),[]),f=Object(r.useCallback)(n(hr),[]),j=Object(r.useCallback)(n(Yn),[]);return Object(p.jsx)(Jn,{onDeleteCard:j,cardHeight:.55*c.height,isQuestionSide:i.isQuestionSide,onClickCard:d,onClickYesNoButton:l,card:i.card,repeatingProgress:i.repeatingProgress,onBackClick:h,onSwitchEditing:b,isEditable:i.isEditable,onChangeQuestion:g,onChangeAnswer:f})},fr=function(e){e.services.spinnerService.spinnerCounterChannel.next(-1)},pr=n(153),jr=n.n(pr),vr=function(e,t){var n=e.setSubscription,r=e.services,a=r.spinnerService,i=r.confirmDialogService,c=r.localBackupsService,o=null;if(t&&(o=t.target.files[0]),o){var s=new FileReader;s.onload=function(e){var t=e.target.result,r=i.confirmationChannel.subscribe((function(e){e&&(a.spinnerCounterChannel.next(1),c.loadBackupChannel.next(t)),i.openDialogChannel.next(se)}));n(r),i.openDialogChannel.next({isOpen:!0,message:"Do you want to load this backup, your current changes could be removed?",titleBackgroundColor:"red",icon:Object(p.jsx)(jr.a,{})})},s.readAsText(o)}},Or=function(e){var t=C(null,e,ii),n=t.callbackFactory,a=t.callbackSettings.services.localBackupsService;v(a.localBackupChannel),v(a.loadBackupChannel,n(fr));var i=Object(r.useCallback)(n(vr),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("input",{type:"file",onChange:i}),Object(p.jsx)(Y.a,{size:"small",onClick:function(){return a.localBackupChannel.next()},children:"Save"})]})},Cr=(n(205),function(e){var t=e.groupName,n=e.onChangeGroupName,r=e.onSaveGroup;return Object(p.jsxs)("div",{className:"group-editor",children:[Object(p.jsx)(He.a,{className:"group-editor_text",required:!0,id:"outlined-required",label:"Group name",onChange:function(e){n(e.target.value)},value:t,variant:"filled"}),Object(p.jsx)(Y.a,{variant:"outlined",className:"group-editor_button",size:"small",onClick:function(){return r()},children:"Save"})]})}),Sr=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){return{cardsGroup:Object(o.a)(Object(o.a)({},e.cardsGroup),{},{nameCardsGroup:n})}}))},xr=function(e){var t=e.setState,n=e.services;t((function(e){return n.cardsGroupsEditorService.groupEditingChannel.next(e.cardsGroup),e}))},mr=function(e){var t=e.services,n=e.location,r=n.state?n.state.cardsGroupID:-1;t.cardsGroupsEditorService.groupChannel.next(r)},kr=function(e){e.history.goBack()},Dr={cards:[],nameCardsGroup:"",repeatingDate:(new Date).getTime(),id:(new Date).getTime(),percentRepeatedCards:0},wr=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dr;t((function(e){return{cardsGroup:n}}))},Ir={cardsGroup:Dr},Er=function(e){var t=C(Ir,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.state,c=a.services.cardsGroupsEditorService;v(c.groupEditingChannel,n(kr)),v(c.groupChannel,n(wr)),Xe(n(mr));var o=Object(r.useCallback)(n(Sr),[]),s=Object(r.useCallback)(n(xr),[]);return Object(p.jsx)(Cr,{groupName:i.cardsGroup.nameCardsGroup,onChangeGroupName:o,onSaveGroup:s})},yr=(n(206),function(e){var t=e.answer,n=e.question,r=e.onChangeAnswer,a=e.onChangeQuestion,i=e.onSaveCard;return Object(p.jsxs)("div",{className:"cards-editor",children:[Object(p.jsx)(qn,{onChangeText:a,changeableText:n,label:"Question"}),Object(p.jsx)(qn,{onChangeText:r,changeableText:t,label:"Answer"}),Object(p.jsx)(Y.a,{variant:"outlined",className:"group-editor_button",size:"small",onClick:function(){return i()},children:"Save"})]})}),Rr=function(e){e.history.goBack()},Gr=function(e){e.history;var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zn;n&&t((function(e){return Object(o.a)(Object(o.a)({},e),{},{card:n})}))},Br=function(e){var t=e.location,n=e.services,r=t.state?t.state.cardsGroupID:-1,a=t.state?t.state.cardID:-1;n.cardsEditorService.cardChannel.next({cardID:a,cardsGroupID:r})},Nr=function(e){e.history;var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){return{card:Object(o.a)(Object(o.a)({},e.card),{},{question:n})}}))},Tr=function(e){e.history;var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){return{card:Object(o.a)(Object(o.a)({},e.card),{},{answer:n})}}))},Pr=function(e){var t=e.services,n=e.setState,r=e.location;n((function(e){return t.cardsEditorService.cardEditingChannel.next({card:e.card,cardsGroupID:r.state.cardsGroupID}),e}))},Ar={card:ur()},Kr=function(e){var t=C(Ar,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.state,c=a.services.cardsEditorService;v(c.cardEditingChannel,n(Rr)),v(c.cardChannel,n(Gr)),Xe(n(Br));var o=Object(r.useCallback)(n(Nr),[]),s=Object(r.useCallback)(n(Tr),[]),u=Object(r.useCallback)(n(Pr),[]);return Object(p.jsx)(yr,{question:i.card.question,answer:i.card.answer,onChangeQuestion:o,onChangeAnswer:s,onSaveCard:u})},Lr=n(302),_r=n(300),Fr=n(301),qr=function(e){var t=e.checked,n=e.label,r=e.onChange;return Object(p.jsx)(_r.a,{control:Object(p.jsx)(Fr.a,{checked:t,onChange:function(e){r(e.target.checked)}}),label:n})},Mr=n(294),Qr=function(e){var t=e.value,n=e.label,r=e.onChange;return Object(p.jsx)(_r.a,{control:Object(p.jsx)(Mr.a,{type:"number",value:t,onChange:function(e){r(Number(e.target.value))}}),label:n})},Hr=(n(207),function(e){var t,n,r,a=e.settings,i=e.onChangeAlgorithm,c=e.onChangeAutoObsolete,o=e.onChangeTimeInDone,s=e.onChangeTimeInProgress;return Object(p.jsxs)(Lr.a,{className:"settings-form",children:[Object(p.jsx)(qr,{checked:a.isRandomRepeating,label:"Random repeating algorithm",onChange:i}),Object(p.jsx)(qr,{checked:null===(t=a.autoObsolete)||void 0===t?void 0:t.isEnable,label:"Enable auto obsolete",onChange:c}),Object(p.jsx)(Qr,{value:null===(n=a.autoObsolete)||void 0===n?void 0:n.timeInDone,onChange:o,label:"How long cards exist in done status (days)"}),Object(p.jsx)(Qr,{value:null===(r=a.autoObsolete)||void 0===r?void 0:r.timeInProgress,onChange:s,label:"How long cards exist in progress status (days)"})]})}),zr={isRandomRepeating:!1,autoObsolete:{isEnable:!1,timeInDone:7,timeInProgress:7}},Ur=function(e){e.services.settingsService.settingsChannel.next("")},Vr=function(e){var t=e.setState,n=(e.services.settingsService,arguments.length>1&&void 0!==arguments[1]?arguments[1]:zr);t((function(e){return Object(o.a)(Object(o.a)({},e),n)}))},Wr=function(e){e.setState;e.services.settingsService.settingsChannel.next("")},Jr=function(e){var t=e.setState,n=e.services.settingsService,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t((function(e){return n.changeSettingsChannel.next(Object(o.a)(Object(o.a)({},e),{},{isRandomRepeating:r})),e}))},Yr=function(e){var t=e.setState,n=e.services.settingsService,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t((function(e){return n.changeSettingsChannel.next(Object(o.a)(Object(o.a)({},e),{},{autoObsolete:Object(o.a)(Object(o.a)({},e.autoObsolete),{},{isEnable:r})})),e}))},$r=function(e){var t=e.setState,n=e.services.settingsService,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t((function(e){return n.changeSettingsChannel.next(Object(o.a)(Object(o.a)({},e),{},{autoObsolete:Object(o.a)(Object(o.a)({},e.autoObsolete),{},{timeInDone:r})})),e}))},Xr=function(e){var t=e.setState,n=e.services.settingsService,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t((function(e){return n.changeSettingsChannel.next(Object(o.a)(Object(o.a)({},e),{},{autoObsolete:Object(o.a)(Object(o.a)({},e.autoObsolete),{},{timeInProgress:r})})),e}))},Zr=function(e){var t=C(zr,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.state,c=a.services.settingsService;v(c.changeSettingsChannel,n(Ur)),v(c.settingsChannel,n(Vr)),Xe(n(Wr));var o=Object(r.useCallback)(n(Jr),[]),s=Object(r.useCallback)(n(Yr),[]),u=Object(r.useCallback)(n($r),[]),l=Object(r.useCallback)(n(Xr),[]);return Object(p.jsx)(Hr,{settings:i,onChangeAlgorithm:o,onChangeAutoObsolete:s,onChangeTimeInDone:u,onChangeTimeInProgress:l})},ea=function(e){return Object(p.jsx)("div",{className:"cards-viewer",children:-1===e.card.id?Object(p.jsx)("div",{children:"No card for viewing"}):Object(p.jsx)(Wn,Object(o.a)({},e))})},ta=function(e){var t=e.services,n=e.setSubscription;(0,e.setState)((function(e){var r=t.confirmDialogService,a=t.cardViewerService,i=r.confirmationChannel.subscribe((function(t){t&&a.deleteSingleCardChannel.next(e.card.id),r.openDialogChannel.next(se)}));return n(i),r.openDialogChannel.next({isOpen:!0,message:"Do you want to delete this cards?",titleBackgroundColor:"red",icon:Object(p.jsx)(at.a,{})}),e}))},na=function(e){e.history.goBack()},ra=function(e,t){e.services.toolbarService.toolbarExternalLabelChannel.next(t)},aa=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){if(e.card){var t=Object(o.a)(Object(o.a)({},e.card),{},{answer:n});return Object(o.a)(Object(o.a)({},e),{},{card:t})}return e}))},ia=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){if(e.card){var t=Object(o.a)(Object(o.a)({},e.card),{},{question:n});return Object(o.a)(Object(o.a)({},e),{},{card:t})}return e}))},ca=function(e){var t=e.setState,n=e.services,r=e.location;t((function(e){return e.isEditable&&n.cardsEditorService.cardEditingChannel.next({card:e.card||ur(),cardsGroupID:r.state.cardsGroupID}),Object(o.a)(Object(o.a)({},e),{},{isEditable:!e.isEditable})}))},oa=function(e){var t=e.setState,n=e.services,r=e.location,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t((function(e){return e.card?(n.cardViewerService.repeatingResultChannel.next({isKnown:a,cardID:e.card.id,cardsGroupID:r.state.cardsGroupID}),e):{card:Zn,isQuestionSide:!1,isEditable:!1}}))},sa=function(e){(0,e.setState)((function(e){return e.isEditable?e:Object(o.a)(Object(o.a)({},e),{},{isQuestionSide:!e.isQuestionSide})}))},ua=function(e){var t=e.services,n=e.setState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zn;t.cardViewerService.cardGroupNameChannel.next(r.id),n((function(e){return Object(o.a)(Object(o.a)({},e),{},{card:r})}))},la=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zn;t((function(e){return Object(o.a)(Object(o.a)({},e),{},{card:n})}))},da=function(e){var t=e.services,n=e.location;t.cardViewerService.cardChannel.next(n.state.cardID)},ha=function(e){var t=e.services,n=e.location;t.cardViewerService.cardChannel.next(n.state.cardID)},ba={card:{id:-1,question:"",answer:"",rangeOfKnowledge:Ye.IN_PROGRESS,dateRepeating:0},isQuestionSide:!0,isEditable:!1},ga=function(e){var t=C(ba,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.state,c=a.context,o=a.services,s=o.cardViewerService,u=o.cardsEditorService;v(s.deleteSingleCardChannel,n(na)),v(s.cardGroupNameChannel,n(ra)),v(s.cardChannel,n(ua)),v(u.cardEditingChannel,n(la)),v(s.repeatingResultChannel,n(da)),Xe(n(ha));var l=Object(r.useCallback)(n(sa),[]),d=Object(r.useCallback)(n(oa),[]),h=Object(r.useCallback)(n(ca),[]),b=Object(r.useCallback)(n(ia),[]),g=Object(r.useCallback)(n(aa),[]),f=Object(r.useCallback)(n(ta),[]);return Object(p.jsx)(ea,{cardHeight:.55*c.height,isQuestionSide:i.isQuestionSide,onClickCard:l,onClickYesNoButton:d,card:i.card,onSwitchEditing:h,isEditable:i.isEditable,onChangeQuestion:b,onChangeAnswer:g,onDeleteCard:f})},fa=n(303),pa=n(285),ja=n(304),va=n(305),Oa=n(306),Ca=n(307),Sa=n(308),xa=(n(208),n(209),function(e){var t=e.onClick;return Object(p.jsx)("div",{className:"remove-button-container",children:Object(p.jsx)(De.a,{size:"medium",color:"secondary",onClick:t,children:Object(p.jsx)(at.a,{})})})}),ma=function(e){var t=e.rows,n=e.onRemoveStatistic;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(fa.a,{component:pa.a,children:Object(p.jsxs)(ja.a,{"aria-label":"simple table",children:[Object(p.jsx)(va.a,{children:Object(p.jsxs)(Oa.a,{children:[Object(p.jsx)(Ca.a,{children:"Date"}),Object(p.jsx)(Ca.a,{children:"Done"}),Object(p.jsx)(Ca.a,{children:"In Progress"})]})}),Object(p.jsx)(Sa.a,{children:t.map((function(e){return Object(p.jsxs)(Oa.a,{children:[Object(p.jsx)(Ca.a,{children:e.date}),Object(p.jsx)(Ca.a,{children:e.done}),Object(p.jsx)(Ca.a,{children:e.inProgress})]},e.date)}))})]})}),Object(p.jsx)(xa,{onClick:n})]})},ka={rows:[]},Da=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t((function(e){return Object(o.a)(Object(o.a)({},e),{},{rows:n})}))},wa=function(e){e.services.statisticService.statisticChannel.next("")},Ia=function(e){var t=e.setSubscription,n=e.services,r=n.statisticService,a=n.confirmDialogService;t(a.confirmationChannel.subscribe((function(e){e&&r.removeStatisticChannel.next(""),a.openDialogChannel.next(se)}))),a.openDialogChannel.next({isOpen:!0,message:"Do you want to delete statistic?",titleBackgroundColor:"red",icon:Object(p.jsx)(at.a,{})})},Ea=function(e){(0,e.setState)((function(){return ka}))},ya=function(e){var t=C(ka,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.services.statisticService,c=a.state;v(i.statisticChannel,n(Da)),v(i.removeStatisticChannel,n(Ea)),Xe(n(wa));var o=Object(r.useCallback)(n(Ia),[]);return Object(p.jsx)(ma,{rows:c.rows,onRemoveStatistic:o})},Ra=function(e){var t=e.cardsGroupsListService,n=e.cardsGroupsEditorService,r=e.errorService,a=e.googleAuthService,i=e.googleBackupsService,c=e.spinnerService,o=e.confirmDialogService,s=e.cardsEditorService,u=e.cardsListService,l=e.cardsRepeaterService,d=e.settingsService,h=e.localBackupsService,b=e.cardViewerService,g=e.selectionDialogService,f=e.toolbarService,j=e.statisticService;return Object(p.jsxs)(O.d,{children:[Object(p.jsx)(O.a,{exact:!0,from:"/MyCardsWeb",to:y.path}),Object(p.jsx)(O.a,{exact:!0,from:"/",to:y.path}),Object(p.jsx)(O.b,{path:y.path,children:Object(p.jsx)(vt,{cardsGroupsListService:t,confirmDialogService:o})}),Object(p.jsx)(O.b,{path:I.path,children:Object(p.jsx)(Dt,{googleAuthService:a,errorService:r})}),Object(p.jsx)(O.b,{path:E.path,children:Object(p.jsx)(Ft,{googleBackupsService:i,spinnerService:c,confirmDialogService:o})}),Object(p.jsx)(O.b,{path:R.path,children:Object(p.jsx)(Bn,{cardsListService:u,confirmDialogService:o,selectionDialogService:g})}),Object(p.jsx)(O.b,{path:G.path,children:Object(p.jsx)(gr,{toolbarService:f,cardsRepeaterService:l,cardsEditorService:s,confirmDialogService:o})}),Object(p.jsx)(O.b,{path:N.path,children:Object(p.jsx)(Or,{localBackupsService:h,confirmDialogService:o,spinnerService:c})}),Object(p.jsx)(O.b,{path:T.path,children:Object(p.jsx)(Er,{cardsGroupsEditorService:n})}),Object(p.jsx)(O.b,{path:B.path,children:Object(p.jsx)(Kr,{cardsEditorService:s})}),Object(p.jsx)(O.b,{path:P.path,children:Object(p.jsx)(Zr,{settingsService:d})}),Object(p.jsx)(O.b,{path:A.path,children:Object(p.jsx)(ga,{toolbarService:f,confirmDialogService:o,cardViewerService:b,cardsEditorService:s})}),Object(p.jsx)(O.b,{path:K.path,children:Object(p.jsx)(ya,{confirmDialogService:o,statisticService:j})})]})},Ga=n(261),Ba=n(262),Na=n(278),Ta=n(263),Pa=n(57),Aa=function(e){var t="".concat("https://www.googleapis.com/drive/v3/files/?q=name%20contains%20","'").concat("my-cards","'");return fetch(t,{headers:{Authorization:"Bearer "+e},method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.files.find((function(e){return"application/vnd.google-apps.folder"===e.mimeType}))||null}))},Ka=n(46),La=n.n(Ka),_a=n(70),Fa={dailyStatistic:[],cardsInProgressFrequency:{}},qa=function(){function e(t){var n=this;Object(ge.a)(this,e),this.dataBaseService=t,this.cardsStorageID="cards-local-storage",this.authTokenLocalStorageID="auth-token",this.settingsID="settings",this.filterID="filter",this.statisticID="statistic",this.getBackup=function(){return Object(Pa.a)(n.getBackupFromDataBase())},this.getBackupFromDataBase=Object(_a.a)(La.a.mark((function e(){var t;return La.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,n.dataBaseService.get(n.cardsStorageID);case 4:t=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",t);case 11:if(!t){e.next=15;break}return e.abrupt("return",t);case 15:return e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,7]])}))),this.setBackupToDataBase=function(){var e=Object(_a.a)(La.a.mark((function e(t){return La.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.dataBaseService.set(n.cardsStorageID,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}return Object(je.a)(e,[{key:"setBackup",value:function(e){return Object(Pa.a)(this.setBackupToDataBase(e))}},{key:"getAuthToken",value:function(){var e=this;return Object(Pa.a)(new Promise((function(t,n){var r=localStorage.getItem(e.authTokenLocalStorageID);r?t(r):n("Auth token is empty")})))}},{key:"setAuthToken",value:function(e){var t=this;return Object(Pa.a)(new Promise((function(n){localStorage.setItem(t.authTokenLocalStorageID,e),n(e)})))}},{key:"getSettings",value:function(){var e=this;return Object(Pa.a)(new Promise((function(t,n){var r=localStorage.getItem(e.settingsID);t(r?JSON.parse(r):{isRandomRepeating:!1,autoObsolete:{isEnable:!1,timeInProgress:7,timeInDone:7}})})))}},{key:"setSettings",value:function(e){var t=this;return Object(Pa.a)(new Promise((function(n){localStorage.setItem(t.settingsID,JSON.stringify(e)),n(e)})))}},{key:"getFilter",value:function(){var e=this;return Object(Pa.a)(new Promise((function(t){var n=localStorage.getItem(e.filterID);t(n?JSON.parse(n):{cards:gt,cardsGroups:gt})})))}},{key:"setFilter",value:function(e){var t=this;return Object(Pa.a)(new Promise((function(n){localStorage.setItem(t.filterID,JSON.stringify(e)),n(e)})))}},{key:"getStatistic",value:function(){var e=this;return Object(Pa.a)(new Promise((function(t){var n=localStorage.getItem(e.statisticID);t(n?JSON.parse(n):Fa)})))}},{key:"setStatistic",value:function(e){var t=this;return Object(Pa.a)(new Promise((function(n){localStorage.setItem(t.statisticID,JSON.stringify(e)),n(e)})))}}]),e}(),Ma=function(e,t){var n=t.find((function(t){return t.id===e}));return n?n.cards:[]},Qa=function(e,t){var n=t.findIndex((function(t){return t.cards.findIndex((function(t){return t.id===e}))>-1})),r=-1;return n>=0&&(r=t[n].cards.findIndex((function(t){return e===t.id}))),n>=0&&r>=0&&(t[n].cards=t[n].cards.filter((function(t){return t.id!==e}))),t},Ha=function(e){var t=[];for(var n in e)e[n]&&t.push(Number(n));return t},za=function(e){return e.map((function(e){return{id:e.id,label:e.nameCardsGroup}}))},Ua=function(e,t){return t.forEach((function(t){e.cardsGroupID&&t.id!==e.cardsGroupID||t.cards.forEach((function(t){e.cardID&&t.id!==e.cardID||(e.isKnown&&t.rangeOfKnowledge===Ye.IN_PROGRESS||e.isKnown&&t.rangeOfKnowledge===Ye.TO_DO?t.rangeOfKnowledge=Ye.DONE:e.isKnown||t.rangeOfKnowledge!==Ye.TO_DO||(t.rangeOfKnowledge=Ye.IN_PROGRESS))}))})),t},Va=function(e,t){return t.forEach((function(t){e.cardsGroupID&&t.id!==e.cardsGroupID||t.cards.forEach((function(t){e.cardID&&t.id!==e.cardID||(t.dateRepeating=(new Date).getTime())}))})),t},Wa=function(e,t){var n=e.findIndex((function(e){return e.cards.findIndex((function(e){return e.id===t}))>-1}));return n>-1?e[n].nameCardsGroup:"No name"},Ja=function(e,t){var n=new Date,r=n.getDate(),a=n.getMonth(),i=n.getFullYear(),c=e.dailyStatistic.findIndex((function(e){return e.date===r&&e.year===i&&e.month===a}));if(c>=0){var o=e.dailyStatistic[c];t.isKnown?o.done=o.done+1:o.inProgress=o.inProgress+1}else e.dailyStatistic.push({date:r,year:i,month:a,inProgress:t.isKnown?0:1,done:t.isKnown?1:0});return t.isKnown||(e.cardsInProgressFrequency[t.cardID]?e.cardsInProgressFrequency[t.cardID]=e.cardsInProgressFrequency[t.cardID]+1:e.cardsInProgressFrequency[t.cardID]=1),e},Ya=n(156),$a=function(e,t){for(var n={id:-1,question:"",answer:"",rangeOfKnowledge:Ye.IN_PROGRESS,dateRepeating:0},r=0;r<e.length;r++){var a=e[r].cards.findIndex((function(e){return e.id===t}));if(a>-1)return n=e[r].cards[a]}return n},Xa=function(e){var t=e.isOpen,n=e.onClose,r=e.onClickItem,a=e.selectionItems,i=e.title;return Object(p.jsx)("div",{children:Object(p.jsxs)(z.a,{open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:n,children:[Object(p.jsx)(U.a,{children:i}),Object(p.jsx)(V.a,{children:Object(p.jsx)(w.a,{children:a.map((function(e){return Object(p.jsx)(L.a,{onClick:function(){return r(e.id)},children:Object(p.jsx)(Ge.a,{primary:e.label})},e.id)}))})})]})})},Za={isOpen:!1,title:"",selectionItems:[]},ei=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Za;t((function(){return Object(o.a)({},n)}))},ti=function(e){var t=e.setState,n=e.services.selectionDialogService;t((function(){return Za})),n.selectionChannel.unsubscribe()},ni=function(e){e.setState;var t=e.services.selectionDialogService,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.selectionChannel.next(n)},ri=function(e){var t=C(Za,e,ii),n=t.callbackFactory,a=t.callbackSettings,i=a.state,c=a.services.selectionDialogService;v(c.openDialogChannel,n(ei));var o=Object(r.useCallback)(n(ti),[]),s=Object(r.useCallback)(n(ni),[]);return Object(p.jsx)(Xa,{isOpen:i.isOpen,onClickItem:s,onClose:o,title:i.title,selectionItems:i.selectionItems})},ai={height:0,width:0},ii=a.a.createContext(ai),ci=new function e(){Object(ge.a)(this,e),this.errorChannel=void 0,this.errorChannel=new xe((function(e){return Object(fe.a)(e)}))},oi=new function e(){var t=this;Object(ge.a)(this,e),this.spinnerCounterChannel=void 0,this.spinnerCounter=0,this.spinnerCounterChannel=new xe((function(e){return Object(fe.a)("").pipe(Object(pe.a)((function(){return t.spinnerCounter+e>=0&&(t.spinnerCounter=t.spinnerCounter+e),t.spinnerCounter})))}))},si=new function e(){var t=this;Object(ge.a)(this,e),this.openDialogChannel=new xe((function(e){return Object(fe.a)(e).pipe(Object(Ga.a)((function(e){e.isOpen||t.confirmationChannel.unsubscribe()})))})),this.confirmationChannel=new xe((function(e){return Object(fe.a)(e)}))},ui=new function e(){var t=this;Object(ge.a)(this,e),this.openDialogChannel=new xe((function(e){return Object(fe.a)(e).pipe(Object(Ga.a)((function(e){e.isOpen||t.selectionChannel.unsubscribe()})))})),this.selectionChannel=new xe((function(e){return Object(fe.a)(e)}))},li=new function e(){Object(ge.a)(this,e),this.navigationPanelOpenChannel=void 0,this.navigationPanelOpenChannel=new xe((function(e){return Object(fe.a)(e)}))},di=new function e(){Object(ge.a)(this,e),this.toolbarExternalLabelChannel=new xe((function(e){return Object(fe.a)(e)})),this.pageLabelChannel=new xe((function(e){return Object(fe.a)(function(e){return e===I.path?I.name:e===E.path?E.name:e===y.path?y.name:e===R.path?R.name:e===G.path?G.name:e===N.path?N.name:e===P.path?P.name:e===A.path?A.name:e===K.path?K.name:"My Cards"}(e))}))},hi=new qa(new function e(t){var n=this;Object(ge.a)(this,e),this.storeName=t,this.dataBase=void 0,this.DATA_BASE_NAME="my-cards-data-base",this.get=function(){var e=Object(_a.a)(La.a.mark((function e(t){return La.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.dataBase;case 2:return e.abrupt("return",e.sent.get(n.storeName,t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.set=function(){var e=Object(_a.a)(La.a.mark((function e(t,r){return La.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.dataBase;case 2:return e.abrupt("return",e.sent.put(n.storeName,r,t));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.dataBase=Object(Ya.a)(this.DATA_BASE_NAME,1,{upgrade:function(e){e.createObjectStore(t)}})}("cards-store")),bi=new function e(t){Object(ge.a)(this,e),this.groupEditingChannel=void 0,this.groupChannel=void 0,this.groupEditingChannel=new xe((function(e){return t.getBackup().pipe(Object(pe.a)((function(t){return function(e,t){var n=t.findIndex((function(t){return e.id===t.id}));return n<0?t.push(e):t[n]=e,t}(e,t)})),Object(Ga.a)((function(e){t.setBackup(e)})))})),this.groupChannel=new xe((function(e){return t.getBackup().pipe(Object(pe.a)((function(t){return function(e,t){var n=t.find((function(t){return e===t.id}));return n||(n={cards:[],nameCardsGroup:"",repeatingDate:(new Date).getTime(),id:(new Date).getTime(),percentRepeatedCards:0}),n}(e,t)})))}))}(hi),gi=new function e(t){Object(ge.a)(this,e),this.groupsListChannel=void 0,this.groupDeleteChannel=void 0,this.resetProgressChannel=void 0,this.changeFilterChannel=void 0,this.filterChannel=void 0,this.groupsListChannel=new xe((function(){return t.getBackup().pipe(Object(Ba.a)((function(e){return t.getSettings().pipe(Object(Ba.a)((function(n){return Object(Ta.a)((function(){return n.autoObsolete&&n.autoObsolete.isEnable?Object(fe.a)(function(e,t,n){if(t<1&&n<1)return e;var r=864e5,a=(new Date).getTime(),i=t*r,c=n*r;return e.forEach((function(e){e.cards.forEach((function(e){var t=a-e.dateRepeating;e.rangeOfKnowledge===Ye.DONE&&t>c&&(e.rangeOfKnowledge=Ye.IN_PROGRESS),e.rangeOfKnowledge===Ye.IN_PROGRESS&&t>i&&(e.rangeOfKnowledge=Ye.TO_DO)}))})),e}(e,n.autoObsolete.timeInProgress,n.autoObsolete.timeInDone)).pipe(Object(Ga.a)((function(e){return t.setBackup(e)}))):Object(fe.a)(e)}))})))})),Object(pe.a)((function(e){return function(e){return e.map((function(e){var t=0;return e.cards.forEach((function(e){e.dateRepeating>t&&(t=e.dateRepeating)})),e.repeatingDate=t,e})),e}(e)})),Object(pe.a)((function(e){return function(e){return e.map((function(e){var t=0;return e.cards.forEach((function(e){e.rangeOfKnowledge===Ye.DONE&&t++})),e.percentRepeatedCards=t/e.cards.length*100,e})),e}(e)})),Object(Na.a)((function(e){return t.getFilter().pipe(Object(pe.a)((function(t){return function(e,t){var n=e.filter((function(e){return e.nameCardsGroup.toLowerCase().indexOf(t.searchableText.toLowerCase())>-1}));return t.sort===me.NAME_DESK?n=n&&n.sort((function(e,t){return e.nameCardsGroup>t.nameCardsGroup?1:e.nameCardsGroup<t.nameCardsGroup?-1:0})):t.sort===me.NAME_ASK?n=n&&n.sort((function(e,t){return e.nameCardsGroup>t.nameCardsGroup?-1:e.nameCardsGroup<t.nameCardsGroup?1:0})):t.sort===me.DATE_ASK?n=n&&n.sort((function(e,t){if(e.repeatingDate&&t.repeatingDate){if(e.repeatingDate>t.repeatingDate)return 1;if(e.repeatingDate<t.repeatingDate)return-1}return 0})):t.sort===me.DATE_DESK?n=n&&n.sort((function(e,t){if(e.repeatingDate&&t.repeatingDate){if(e.repeatingDate<t.repeatingDate)return 1;if(e.repeatingDate>t.repeatingDate)return-1}return 0})):t.sort===me.PROGRESS_DESC?n=n&&n.sort((function(e,t){if("number"===typeof e.percentRepeatedCards&&"number"===typeof t.percentRepeatedCards){if(e.percentRepeatedCards<t.percentRepeatedCards)return 1;if(e.percentRepeatedCards>t.percentRepeatedCards)return-1}return 0})):t.sort===me.PROGRESS_ASK&&(n=n&&n.sort((function(e,t){if("number"===typeof e.percentRepeatedCards&&"number"===typeof t.percentRepeatedCards){if(e.percentRepeatedCards>t.percentRepeatedCards)return 1;if(e.percentRepeatedCards<t.percentRepeatedCards)return-1}return 0}))),n}(e,t.cardsGroups)})))})))})),this.groupDeleteChannel=new xe((function(e){return t.getBackup().pipe(Object(pe.a)((function(t){return function(e,t){return t.filter((function(t){return t.id!==e}))}(e,t)})),Object(Ga.a)((function(e){return t.setBackup(e)})))})),this.resetProgressChannel=new xe((function(e){return t.getBackup().pipe(Object(pe.a)((function(t){return function(e,t){var n=t.findIndex((function(t){return e===t.id}));return n<0||(t[n].cards=t[n].cards.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{rangeOfKnowledge:Ye.TO_DO})}))),t}(e,t)})),Object(Ga.a)((function(e){return t.setBackup(e)})))})),this.filterChannel=new xe((function(){return t.getFilter().pipe(Object(pe.a)((function(e){return e.cardsGroups})))})),this.changeFilterChannel=new xe((function(e){return t.getFilter().pipe(Object(pe.a)((function(t){return Object(o.a)(Object(o.a)({},t),{},{cardsGroups:e})})),Object(Ga.a)((function(e){t.setFilter(e)})))}))}(hi),fi=new function e(t){Object(ge.a)(this,e),this.loginChannel=void 0,this.loginChannel=new xe((function(e){return Object(fe.a)("").pipe(Object(Ga.a)((function(){t.setAuthToken(e)})))}))}(hi),pi=new function e(t){Object(ge.a)(this,e),this.storageService=t,this.backupsNameLoadChannel=void 0,this.backupLoadChannel=void 0,this.backupUploadChannel=void 0,this.backupDeleteChannel=void 0,this.backupsNameLoadChannel=new xe((function(){return t.getAuthToken().pipe(Object(Na.a)((function(e){return Object(fe.a)(e).pipe(Object(Ba.a)((function(){return Object(Pa.a)(Aa(e))})),Object(Ba.a)((function(t){return Object(Pa.a)(function(e,t){var n="".concat("https://www.googleapis.com/drive/v3/files/",'?q="').concat(t?t.id:-1,'"+in+parents&fields=files(id,createdTime,name)');return fetch(n,{headers:{Authorization:"Bearer "+e},method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.files}))}(e,t))})),Object(pe.a)((function(e){return function(e){return e?e.map((function(e){var t=new Date(e.createdTime),n="".concat(t.getFullYear(),"-").concat(t.getMonth(),"-").concat(t.getDate()," ").concat(t.getHours(),":").concat(t.getMinutes());return Object(o.a)(Object(o.a)({},e),{},{createdTime:n})})):[]}(e)})))})))})),this.backupLoadChannel=new xe((function(e){return t.getAuthToken().pipe(Object(Ba.a)((function(t){return Object(Pa.a)(function(e,t){return fetch("https://www.googleapis.com/drive/v3/files/"+t+"?alt=media",{headers:{Authorization:"Bearer "+e},method:"GET"}).then((function(e){return e.json()}))}(t,e))})),Object(Ga.a)((function(e){t.setBackup(e)})))})),this.backupUploadChannel=new xe((function(){return t.getAuthToken().pipe(Object(Na.a)((function(e){return Object(fe.a)(e).pipe(Object(Ba.a)((function(){return Object(Pa.a)(Aa(e))})),Object(Na.a)((function(t){return Object(Ta.a)((function(){return t?Object(fe.a)(t.id):Object(Pa.a)(function(e){var t={headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:JSON.stringify({name:"my-cards",mimeType:"application/vnd.google-apps.folder"}),method:"POST"};return fetch("https://www.googleapis.com/drive/v3/files/",t).then((function(e){return e.json()})).then((function(e){return e.id}))}(e))}))})),Object(Na.a)((function(n){return t.getBackup().pipe(Object(pe.a)((function(e){return function(e){var t=0;return e.forEach((function(e){t+=e.cards.length})),"groups(".concat(e.length,")cards(").concat(t,")")}(e)})),Object(Ba.a)((function(t){return Object(Pa.a)(function(e,t,n){var r={headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:JSON.stringify({parents:[t],name:n}),method:"POST"};return fetch("https://www.googleapis.com/drive/v3/files/",r).then((function(e){return e.json()})).then((function(e){return e.id}))}(e,n,t))})))})),Object(Ba.a)((function(n){return t.getBackup().pipe(Object(Ba.a)((function(t){return function(e,t,n){var r="https://www.googleapis.com/upload/drive/v3/files/"+t,a={headers:{Authorization:"Bearer "+e},body:JSON.stringify(n,null,4),responseType:"text",method:"PATCH"};return fetch(r,a).then((function(){return t}))}(e,n,t)})))})))})))})),this.backupDeleteChannel=new xe((function(e){return t.getAuthToken().pipe(Object(Ba.a)((function(t){return function(e,t){return fetch("https://www.googleapis.com/drive/v3/files/"+t,{headers:{Authorization:"Bearer "+e},method:"DELETE"}).then((function(){return t}))}(t,e)})))}))}(hi),ji=new function e(t){Object(ge.a)(this,e),this.cardEditingChannel=void 0,this.cardChannel=void 0,this.cardEditingChannel=new xe((function(e){var n=e.card,r=e.cardsGroupID;return t.getBackup().pipe(Object(pe.a)((function(e){return function(e,t,n){-1===t.id&&(t.id=(new Date).getTime());var r=n.findIndex((function(t){return e===t.id})),a=-1;return r>=0&&(a=n[r].cards.findIndex((function(e){return t.id===e.id}))),r>=0&&a<0?n[r].cards.push(t):r>=0&&a>=0&&(n[r].cards[a]=t),n}(r,n,e)})),Object(Ga.a)((function(e){t.setBackup(e)})),Object(pe.a)((function(){return n})))})),this.cardChannel=new xe((function(e){var n=e.cardID,r=e.cardsGroupID;return t.getBackup().pipe(Object(pe.a)((function(e){return function(e,t,n){var r=n.find((function(t){return e===t.id})),a={rangeOfKnowledge:Ye.TO_DO,answer:"",question:"",dateRepeating:0,id:(new Date).getTime()};return r&&(a=r.cards.find((function(e){return e.id===t}))),a}(r,n,e)})))}))}(hi),vi=new function e(t){var n=this;Object(ge.a)(this,e),this.storageService=t,this.cardsChannel=void 0,this.resetCardProgressChannel=void 0,this.deleteSingleCardChannel=void 0,this.movingCardsChannel=void 0,this.copyCardsChannel=void 0,this.deleteCardsChannel=void 0,this.existedGroupsIDsChannel=void 0,this.cardsIDsByGroupIDsChannel=void 0,this.cardsIDsBySelectedItemsChannel=void 0,this.filterChannel=void 0,this.changeFilterChannel=void 0,this.cardsChannel=new xe((function(e){var t=e.cardsGroupID,r=e.filter;return n.storageService.getBackup().pipe(Object(pe.a)((function(e){return Ma(t,e)})),Object(pe.a)((function(e){return function(e,t){var n=e.filter((function(e){return e.question.toLowerCase().indexOf(t.searchableText.toLowerCase())>-1||e.answer.toLowerCase().indexOf(t.searchableText.toLowerCase())>-1}));return t.sort===me.QUESTION_DESK?n.sort((function(e,t){return e.question===t.question?0:e.question>t.question?1:-1})):t.sort===me.QUESTION_ASK?n.sort((function(e,t){return e.question===t.question?0:e.question>t.question?-1:1})):t.sort===me.STATUS_ASK?n.sort((function(e,t){return e.rangeOfKnowledge===t.rangeOfKnowledge?0:e.rangeOfKnowledge>t.rangeOfKnowledge?-1:1})):t.sort===me.STATUS_DESK?n.sort((function(e,t){return e.rangeOfKnowledge===t.rangeOfKnowledge?0:e.rangeOfKnowledge>t.rangeOfKnowledge?1:-1})):t.sort===me.DATE_DESK?n.sort((function(e,t){return e.dateRepeating===t.dateRepeating?0:e.dateRepeating>t.dateRepeating?1:-1})):t.sort===me.DATE_ASK?n.sort((function(e,t){return e.dateRepeating===t.dateRepeating?0:e.dateRepeating<t.dateRepeating?1:-1})):t.sort===me.ANSWER_ASK?n.sort((function(e,t){return e.answer===t.answer?0:e.answer<t.answer?1:-1})):t.sort===me.ANSWER_DESK?n.sort((function(e,t){return e.answer===t.answer?0:e.answer<t.answer?-1:1})):t.sort===me.PROGRESS_ASK?n.sort((function(e,t){return e.rangeOfKnowledge>t.rangeOfKnowledge?0:e.rangeOfKnowledge<t.rangeOfKnowledge?-1:1})):t.sort===me.PROGRESS_DESC?n.sort((function(e,t){return e.rangeOfKnowledge<t.rangeOfKnowledge?0:e.rangeOfKnowledge>t.rangeOfKnowledge?-1:1})):n}(e,r)})))})),this.resetCardProgressChannel=new xe((function(e){var n=e.cardID,r=e.cardsGroupID;return t.getBackup().pipe(Object(pe.a)((function(e){return function(e,t,n){var r=n.findIndex((function(t){return e===t.id})),a=-1;return r>=0&&(a=n[r].cards.findIndex((function(e){return t===e.id}))),r>=0&&a>=0&&(n[r].cards[a].rangeOfKnowledge=Ye.TO_DO),n}(r,n,e)})),Object(Ga.a)((function(e){t.setBackup(e)})))})),this.deleteSingleCardChannel=new xe((function(e){return t.getBackup().pipe(Object(pe.a)((function(t){return Qa(e,t)})),Object(Ga.a)((function(e){t.setBackup(e)})))})),this.movingCardsChannel=new xe((function(e){var n=e.selectedItems,r=e.destinationGroupID;return t.getBackup().pipe(Object(Na.a)((function(e){return Object(fe.a)(e).pipe(Object(pe.a)((function(){return Ha(n)})),Object(pe.a)((function(t){return function(e,t,n){var r=[];return e.forEach((function(e){e.cards.forEach((function(e){t.findIndex((function(t){return t===e.id}))>-1&&r.push(e)})),e.cards=e.cards.filter((function(e){return t.findIndex((function(t){return t===e.id}))<0}))})),e.forEach((function(e){var t;e.id===n&&(t=e.cards).push.apply(t,r)})),e}(e,t,r)})),Object(Ga.a)((function(e){t.setBackup(e)})))})))})),this.existedGroupsIDsChannel=new xe((function(){return t.getBackup().pipe(Object(pe.a)(za))})),this.copyCardsChannel=new xe((function(e){var n=e.selectedItems,r=e.destinationGroupID;return t.getBackup().pipe(Object(Na.a)((function(e){return Object(fe.a)(e).pipe(Object(pe.a)((function(){return Ha(n)})),Object(pe.a)((function(t){return function(e,t,n){var r=[];return e.forEach((function(e){e.cards.forEach((function(e,n){t.findIndex((function(t){return t===e.id}))>-1&&r.push(Object(o.a)(Object(o.a)({},e),{},{id:(new Date).getTime()+1e3*n}))}))})),e.forEach((function(e){var t;e.id===n&&(t=e.cards).push.apply(t,r)})),e}(e,t,r)})),Object(Ga.a)((function(e){t.setBackup(e)})))})))})),this.deleteCardsChannel=new xe((function(e){return t.getBackup().pipe(Object(Na.a)((function(n){return Object(fe.a)(n).pipe(Object(pe.a)((function(){return Ha(e)})),Object(pe.a)((function(e){return function(e,t){return e.forEach((function(e){e.cards=e.cards.filter((function(e){return t.findIndex((function(t){return t===e.id}))<0}))})),e}(n,e)})),Object(Ga.a)((function(e){t.setBackup(e)})))})))})),this.cardsIDsByGroupIDsChannel=new xe((function(e){return t.getBackup().pipe(Object(pe.a)((function(t){return Ma(e,t)})),Object(pe.a)((function(e){return function(e){return e.map((function(e){return e.id}))}(e)})))})),this.cardsIDsBySelectedItemsChannel=new xe((function(e){return Object(fe.a)(e).pipe(Object(pe.a)((function(){return function(e){var t=[];for(var n in e)e[n]&&t.push(Number(n));return t}(e)})))})),this.filterChannel=new xe((function(){return t.getFilter().pipe(Object(pe.a)((function(e){return e.cards})))})),this.changeFilterChannel=new xe((function(e){return t.getFilter().pipe(Object(pe.a)((function(t){return Object(o.a)(Object(o.a)({},t),{},{cards:e})})),Object(Ga.a)((function(e){t.setFilter(e)})))}))}(hi),Oi=new function e(t){var n=this;Object(ge.a)(this,e),this.storageService=t,this.cardChannel=void 0,this.repeatingResultChannel=void 0,this.repeatingProgressChannel=void 0,this.deleteSingleCardChannel=void 0,this.cardGroupNameChannel=void 0,this.statisticValue={inProgress:0,todo:0,done:0},this.cardChannel=new xe((function(e){return n.storageService.getBackup().pipe(Object(pe.a)((function(t){return function(e,t){var n=[];return e.forEach((function(e){e.cards.forEach((function(e){t.findIndex((function(t){return t===e.id}))>-1&&n.push(e)}))})),n}(t,e)})),Object(Ba.a)((function(e){return n.storageService.getSettings().pipe(Object(pe.a)((function(t){return t.isRandomRepeating&&(e=function(e){for(var t,n=[],r=e.length;r;)(t=Math.floor(Math.random()*e.length))in e&&(n.push(e[t]),delete e[t],r--);return n}(e)),{cards:e,isRandomRepeating:t.isRandomRepeating}})))})),Object(Ga.a)((function(e){var t=e.cards;e.isRandomRepeating;n.statisticValue=function(e){var t={inProgress:0,todo:0,done:0};return e.forEach((function(e){e.rangeOfKnowledge===Ye.IN_PROGRESS?t.inProgress=t.inProgress+1:e.rangeOfKnowledge===Ye.TO_DO?t.todo=t.todo+1:t.done=t.done+1})),t}(t)})),Object(pe.a)((function(e){return function(e,t){var n;return t?n=e.filter((function(e){return e.rangeOfKnowledge!==Ye.DONE}))[0]:((n=e.find((function(e){return e.rangeOfKnowledge===Ye.TO_DO})))||(n=e.find((function(e){return e.rangeOfKnowledge===Ye.IN_PROGRESS}))),1===e.length&&(n=e[0])),n||{id:-1,question:"",answer:"",rangeOfKnowledge:Ye.IN_PROGRESS,dateRepeating:0}}(e.cards,e.isRandomRepeating)})))})),this.repeatingResultChannel=new xe((function(e){return n.storageService.getStatistic().pipe(Object(pe.a)((function(t){return Ja(t,e)})),Object(pe.a)((function(e){return n.storageService.setStatistic(e)})),Object(Ba.a)((function(){return n.storageService.getBackup()})),Object(pe.a)((function(t){return Ua(e,t)})),Object(pe.a)((function(t){return Va(e,t)})),Object(Ba.a)((function(e){return n.storageService.setBackup(e)})))})),this.repeatingProgressChannel=new xe((function(){return Object(fe.a)(n.statisticValue)})),this.deleteSingleCardChannel=new xe((function(e){return t.getBackup().pipe(Object(pe.a)((function(t){return Qa(e,t)})),Object(Ga.a)((function(e){t.setBackup(e)})))})),this.cardGroupNameChannel=new xe((function(e){return t.getBackup().pipe(Object(pe.a)((function(t){return Wa(t,e)})))}))}(hi),Ci=new function e(t){var n=this;Object(ge.a)(this,e),this.storageService=t,this.localBackupChannel=void 0,this.loadBackupChannel=void 0,this.localBackupChannel=new xe((function(){return n.storageService.getBackup().pipe(Object(Ga.a)((function(e){return function(e){var t=JSON.stringify(e,null,4),n=new Blob([t],{type:"octet/stream"}),r=window.URL.createObjectURL(n),a=document.createElement("a");a&&(a.href=r,a.download="My Cards.txt",a.click()),window.URL.revokeObjectURL(r)}(e)})))})),this.loadBackupChannel=new xe((function(e){return Object(fe.a)("").pipe(Object(Ba.a)((function(){return n.storageService.setBackup(JSON.parse(e))})))}))}(hi),Si=new function e(t){Object(ge.a)(this,e),this.settingsChannel=void 0,this.changeSettingsChannel=void 0,this.settingsChannel=new xe((function(){return t.getSettings()})),this.changeSettingsChannel=new xe((function(e){return t.setSettings(e)}))}(hi),xi=new function e(t){var n=this;Object(ge.a)(this,e),this.storageService=t,this.cardChannel=void 0,this.cardGroupNameChannel=void 0,this.repeatingResultChannel=void 0,this.deleteSingleCardChannel=void 0,this.cardChannel=new xe((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return n.storageService.getBackup().pipe(Object(pe.a)((function(t){return $a(t,e)})))})),this.repeatingResultChannel=new xe((function(e){return n.storageService.getStatistic().pipe(Object(pe.a)((function(t){return Ja(t,e)})),Object(pe.a)((function(e){return n.storageService.setStatistic(e)})),Object(Ba.a)((function(){return n.storageService.getBackup()})),Object(pe.a)((function(t){return Ua(e,t)})),Object(pe.a)((function(t){return Va(e,t)})),Object(Ba.a)((function(e){return n.storageService.setBackup(e)})))})),this.deleteSingleCardChannel=new xe((function(e){return t.getBackup().pipe(Object(pe.a)((function(t){return Qa(e,t)})),Object(Ga.a)((function(e){t.setBackup(e)})))})),this.cardGroupNameChannel=new xe((function(e){return t.getBackup().pipe(Object(pe.a)((function(t){return Wa(t,e)})))}))}(hi),mi=new function e(t){Object(ge.a)(this,e),this.storageService=t,this.statisticChannel=void 0,this.removeStatisticChannel=void 0,this.statisticChannel=new xe((function(){return t.getStatistic().pipe(Object(pe.a)((function(e){return function(e){return e.dailyStatistic.map((function(e){var t=e.date,n=e.done,r=e.inProgress,a=e.year,i=e.month,c=i>0&&i<10?"0"+i:i;return{date:"".concat(t>0&&t<10?"0"+t:t,"-").concat(c,"-").concat(a),inProgress:r,done:n}}))}(e)})))})),this.removeStatisticChannel=new xe((function(){return t.setStatistic(Fa)}))}(hi);xe.setGlobalErrorHandler((function(e){console.error(e)}));var ki=function(){var e=Object(r.useState)(ai),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=window.screen.height;n.height!==e&&a(Object(o.a)(Object(o.a)({},n),{},{height:e}))}),[n]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(ii.Provider,{value:n,children:Object(p.jsx)(u.a,{children:Object(p.jsxs)("div",{children:[Object(p.jsx)(te,{errorService:ci}),Object(p.jsx)(k,{toolbarService:di,navigationPanelService:li}),Object(p.jsx)(H,{navigationPanelService:li}),Object(p.jsx)(be,{confirmDialogService:si}),Object(p.jsx)(ri,{selectionDialogService:ui}),Object(p.jsxs)("div",{className:"page-container",style:{height:n.height-110,width:"100%"},children:[Object(p.jsx)(ie,{spinnerService:oi}),Object(p.jsx)(Ra,{toolbarService:di,cardsGroupsListService:gi,cardsGroupsEditorService:bi,googleAuthService:fi,googleBackupsService:pi,errorService:ci,spinnerService:oi,confirmDialogService:si,cardsEditorService:ji,cardsListService:vi,cardsRepeaterService:Oi,localBackupsService:Ci,settingsService:Si,cardViewerService:xi,selectionDialogService:ui,statisticService:mi})]})]})})})})},Di=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,309)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},wi=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ii(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(p.jsx)(ki,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/MyCardsWeb",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/MyCardsWeb","/service-worker.js");wi?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ii(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ii(t,e)}))}}(),Di()}},[[211,1,2]]]);
//# sourceMappingURL=main.8a51acd3.chunk.js.map