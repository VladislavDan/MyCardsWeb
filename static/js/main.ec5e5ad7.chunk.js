(this["webpackJsonpmy-cards-web"]=this["webpackJsonpmy-cards-web"]||[]).push([[0],{160:function(e,n,t){},161:function(e,n,t){},162:function(e,n,t){},173:function(e,n,t){},174:function(e,n,t){},175:function(e,n,t){},176:function(e,n,t){},177:function(e,n,t){},178:function(e,n,t){},179:function(e,n,t){},180:function(e,n,t){},182:function(e,n,t){"use strict";t.r(n);var r,a=t(0),i=t.n(a),c=t(59),o=t.n(c),s=(t(160),t(15)),u=t(11),l=t(83),d=(t(161),t(14)),p=t(16),h=t(31),j={path:"/google-auth",name:"Auth Google"},b={path:"/google-backups",name:"Google Backups"},f={path:"/cards-groups",name:"Cards Groups"},O={path:"/cards-list",name:"Cards"},g={path:"/cards-repeater",name:"Repeat Card"},C={path:"/cards-editor",name:"Edit Card"},v={path:"/local-backups",name:"Local Backups"},m={path:"/cards-group-editor",name:"Edit Group"},x={path:"/settings",name:"Settings"},k=new(function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,[{key:"getPageLabel",value:function(e){return e===j.path?j.name:e===b.path?b.name:e===f.path?f.name:e===O.path?O.name:e===g.path?g.name:e===v.path?v.name:e===x.path?x.name:"My Cards"}}]),e}()),S=t(255),D=t(257),w=t(258),I=t(88),G=t(131),y=t.n(G),B=t(132),R=t.n(B),E=(t(162),t(1)),F=function(e){var n=e.pageLabel,t=e.onClick,r=Object(d.g)(),a=Object(d.h)();return Object(E.jsx)(S.a,{position:"fixed",children:Object(E.jsxs)(D.a,{className:"toolbar",children:[Object(E.jsx)(w.a,{className:"toolbar_menu-icon",edge:"start",color:"inherit","aria-label":"menu",onClick:t,children:Object(E.jsx)(y.a,{})}),Object(E.jsx)(I.a,{className:"toolbar_label",variant:"h6",children:n}),n===O.name||n===f.name?Object(E.jsx)(w.a,{color:"inherit",onClick:function(){n===O.name?r.push({pathname:g.path,state:a.state}):r.push({pathname:g.path,state:null})},children:Object(E.jsx)(R.a,{})}):null]})})},N=t(242),T=t(249),P=function(){function e(n){Object(p.a)(this,e),this.outputSubject=void 0,this.observableCreator=void 0,this.subscriptions=[],this.outputSubject=new T.a,this.observableCreator=n}return Object(h.a)(e,[{key:"next",value:function(e){var n=this;this.subscriptions.push(this.observableCreator(e).subscribe((function(e){n.outputSubject.next(e)})))}},{key:"subscribe",value:function(e,n){var t=this.outputSubject.subscribe((function(n){e&&e(n)}),(function(e){n&&n(e),console.error(e)}));return this.subscriptions.push(t),t}},{key:"unsubscribe",value:function(){this.subscriptions.forEach((function(e){e.closed||e.unsubscribe()})),this.subscriptions=[]}}]),e}(),L=new function e(){Object(p.a)(this,e),this.navigationPanelOpenChannel=void 0,this.navigationPanelOpenChannel=new P((function(e){return Object(N.a)(e)}))},A=function(){var e=Object(d.h)(),n=Object(a.useState)(""),t=Object(u.a)(n,2),r=t[0],i=t[1];Object(a.useEffect)((function(){var n=k.getPageLabel(e.pathname);i(n)}),[e.pathname]);return Object(E.jsx)(F,{pageLabel:r,onClick:function(){L.navigationPanelOpenChannel.next("")}})},_=t(238),K=t(259),M=t(241),q=function(e){var n=e.path,t=e.name,r=e.toggleDrawer;return Object(E.jsx)(M.a,{button:!0,children:Object(E.jsx)(l.b,{to:n,onClick:r(!1),children:t})})},z=function(e){var n=e.isOpen,t=e.toggleDrawer;return Object(E.jsx)(_.a,{anchor:"left",open:n,onClose:t(!1),onOpen:t(!0),children:Object(E.jsxs)(K.a,{children:[Object(E.jsx)(q,{path:f.path,name:f.name,toggleDrawer:t}),Object(E.jsx)(q,{path:j.path,name:j.name,toggleDrawer:t}),Object(E.jsx)(q,{path:v.path,name:v.name,toggleDrawer:t}),Object(E.jsx)(q,{path:x.path,name:x.name,toggleDrawer:t})]})})},U=function(e,n,t){var r=Object(a.useState)({subscription:null}),i=Object(u.a)(r,2),c=i[0],o=i[1];Object(a.useEffect)((function(){if(!c.subscription||c.subscription.closed){var r=e.subscribe(n,t);o(Object(s.a)(Object(s.a)({},c),{},{subscription:r}))}return function(){e.unsubscribe()}}),[])},Q=function(){var e=Object(a.useState)({isOpen:!1}),n=Object(u.a)(e,2),t=n[0],r=n[1];U(L.navigationPanelOpenChannel,(function(){r(Object(s.a)(Object(s.a)({},t),{},{isOpen:!0}))}));return Object(E.jsx)(z,{isOpen:t.isOpen,toggleDrawer:function(e){return function(n){(!n||"keydown"!==n.type||"Tab"!==n.nativeEvent.key&&"Shift"!==n.nativeEvent.key)&&r(Object(s.a)(Object(s.a)({},t),{},{isOpen:e}))}}})},V=t(250),J=t(232),H=t(251),W=t(252),Y=t(253),X=t(254),Z=function(e){var n=e.isOpen,t=e.errorMessage,r=e.handleClose;return Object(E.jsxs)(V.a,{open:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:r,children:[Object(E.jsx)(J.a,{id:"alert-dialog-title",children:"Something went wrong"}),Object(E.jsx)(H.a,{children:Object(E.jsx)(W.a,{id:"alert-dialog-description",children:t})}),Object(E.jsx)(Y.a,{children:Object(E.jsx)(X.a,{color:"primary",onClick:r,children:"Ok"})})]})},$=function(e){var n=e.errorService,t=Object(a.useState)({isOpen:!1,errorMessage:""}),r=Object(u.a)(t,2),i=r[0],c=r[1];U(n.errorChannel,(function(e){c({isOpen:!0,errorMessage:e})}));return Object(E.jsx)(Z,{isOpen:i.isOpen,errorMessage:i.errorMessage,handleClose:function(){c({isOpen:!1,errorMessage:""})}})},ee=t(260),ne=function(e){return e.isShow?Object(E.jsx)(ee.a,{color:"secondary"}):null},te=function(e){var n=e.spinnerService,t=Object(a.useState)(!1),r=Object(u.a)(t,2),i=r[0],c=r[1];return U(n.spinnerCounterChannel,(function(e){c(0!==e)})),Object(E.jsx)(ne,{isShow:i})},re={height:0,width:0,updateContext:function(){}},ae="dd-MM-yyyy",ie=function(e){var n=e.onClickAgree,t=e.onClickDisagree,r=e.isOpen,a=e.message,i=e.onClose;return Object(E.jsx)("div",{children:Object(E.jsxs)(V.a,{open:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:i,children:[Object(E.jsx)(J.a,{id:"alert-dialog-title",children:"Warning"}),Object(E.jsx)(H.a,{children:Object(E.jsx)(W.a,{id:"alert-dialog-description",children:a})}),Object(E.jsxs)(Y.a,{children:[Object(E.jsx)(X.a,{onClick:t,color:"primary",children:"Disagree"}),Object(E.jsx)(X.a,{onClick:n,color:"primary",autoFocus:!0,children:"Agree"})]})]})})},ce=function(e){var n=e.confirmDialogService,t=a.useState({isOpen:!1,message:""}),r=Object(u.a)(t,2),i=r[0],c=r[1];U(n.openDialogChannel,(function(e){c(Object(s.a)({},e))}));return Object(E.jsx)(ie,{isOpen:i.isOpen,onClickAgree:function(){n.confirmationChannel.next(!0)},onClickDisagree:function(){n.confirmationChannel.next(!1)},onClose:function(){c({isOpen:!1,message:""}),n.confirmationChannel.unsubscribe()},message:i.message})},oe=t(133),se=t(102),ue=t(76),le=t(101),de=t(262),pe=t(261),he=function(e){var n=e.percent;return Object(E.jsxs)(pe.a,{position:"relative",display:"inline-flex",children:[Object(E.jsx)(de.a,{variant:"determinate",value:n}),Object(E.jsx)(pe.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(E.jsx)(I.a,{variant:"caption",component:"div",color:"textSecondary",children:"".concat(Math.round(n),"%")})})]})},je=t(100),be=t.n(je),fe=t(140),Oe=t(247),ge=function(e){var n=e.onEdit,t=e.onDelete,r=e.onResetProgress,a=i.a.useState(null),c=Object(u.a)(a,2),o=c[0],s=c[1],l=function(){s(null)};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(fe.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:l,children:[Object(E.jsx)(Oe.a,{onClick:function(){n(),l()},children:"Edit"}),Object(E.jsx)(Oe.a,{onClick:function(){r(),l()},children:"Reset progress"}),Object(E.jsx)(Oe.a,{onClick:function(){t(),l()},children:"Delete"})]}),Object(E.jsx)(w.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:Object(E.jsx)(be.a,{})})]})},Ce=function(e){var n=e.cardsGroup,t=e.onClickItem,r=e.onEditItem,a=e.onDeleteItem,i=e.onResetProgress;return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(M.a,{button:!0,children:[Object(E.jsx)(ue.a,{onClick:function(){return t(n.id)},children:Object(E.jsx)(he,{percent:n.percentRepeatedCards||0})}),Object(E.jsx)(le.a,{onClick:function(){return t(n.id)},primary:n.nameCardsGroup,secondary:"Last repeating date: "+Object(se.a)(n.dateRepeating?n.dateRepeating:new Date,ae)}),Object(E.jsx)(ue.a,{children:Object(E.jsx)(ge,{onEdit:function(){return r(n.id)},onDelete:function(){return a(n.id)},onResetProgress:function(){return i(n.id)}})})]},n.id)})},ve=(t(173),t(263)),me=t(135),xe=t.n(me),ke=(t(174),function(e){var n=e.onClick;return Object(E.jsx)(ve.a,{size:"medium",color:"secondary","aria-label":"add",className:"add-button",onClick:n,children:Object(E.jsx)(xe.a,{})})}),Se=function(e){var n=e.cardsGroups,t=e.onClickItem,r=e.onEditItem,a=e.onDeleteItem,i=e.onOpenEditor,c=e.onResetProgress;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(K.a,{component:"nav","aria-label":"contacts",className:"cards-groups",children:n.map((function(e){return Object(E.jsx)(Ce,{cardsGroup:e,onClickItem:t,onEditItem:r,onDeleteItem:a,onResetProgress:c},e.id)}))}),Object(E.jsx)(ke,{onClick:i})]})},De=function(e){var n=Object(a.useRef)({isFirstRun:!1});Object(a.useEffect)((function(){return n.current.isFirstRun||(e(),n.current.isFirstRun=!0),function(){n.current.isFirstRun=!1}}),[])},we=t(24),Ie=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1];return Object(a.useEffect)((function(){return function(){t.forEach((function(e){e.closed||e.unsubscribe()})),r([])}}),[]),{setSubscription:function(e){r([].concat(Object(we.a)(t),[e]))}}},Ge=function(e){var n=e.cardsGroupsListService,t=e.confirmDialogService,r=Object(a.useState)({cardsGroups:[]}),i=Object(u.a)(r,2),c=i[0],o=i[1],s=Object(d.g)();U(n.groupsListChannel,(function(e){o({cardsGroups:e})})),U(n.groupDeleteChannel,(function(){n.groupsListChannel.next("")})),U(n.resetProgressChannel,(function(){n.groupsListChannel.next("")})),De((function(){n.groupsListChannel.next("")}));var l=Ie().setSubscription;return Object(E.jsx)(Se,{onClickItem:function(e){s.push({pathname:O.path,state:{cardsGroupID:e}})},onOpenEditor:function(){s.push({pathname:m.path})},onDeleteItem:function(e){var r=t.confirmationChannel.subscribe((function(r){r&&n.groupDeleteChannel.next(e),t.openDialogChannel.next({isOpen:!1,message:""})}));l(r),t.openDialogChannel.next({isOpen:!0,message:"Do you want to remove this group?"})},onEditItem:function(e){s.push({pathname:m.path,state:{cardsGroupID:e}})},onResetProgress:function(e){var r=t.confirmationChannel.subscribe((function(r){r&&n.resetProgressChannel.next(e),t.openDialogChannel.next({isOpen:!1,message:""})}));l(r),t.openDialogChannel.next({isOpen:!0,message:"Do you want to reset progress of this group?"})},cardsGroups:c.cardsGroups})},ye=t(136),Be=t.n(ye),Re=(t(175),function(e){var n=e.onSuccess,t=e.onFailure,r=e.height,a=e.width;return Object(E.jsx)("div",{className:"google-auth",style:{height:r,width:a},children:Object(E.jsx)(Be.a,{className:"google-auth_button",clientId:"627973926597-tj2la0mnorvm04cqmcosu2nj3b02g6k2.apps.googleusercontent.com",buttonText:"Login",onSuccess:n,onFailure:t,scope:"profile email https://www.googleapis.com/auth/drive"})})}),Ee=function(e){var n=e.googleAuthService,t=e.errorService,r=Object(d.g)();U(n.loginChannel,(function(){r.replace(b.path)}));var i=a.useContext(Sn),c=i.height,o=i.width;return Object(E.jsx)(Re,{onSuccess:function(e){n.loginChannel.next(e.accessToken)},onFailure:function(){t.errorChannel.next("Error of connection")},height:c,width:o})},Fe=function(e){var n=e.backupID,t=e.onLoad,r=e.onDelete,a=i.a.useState(null),c=Object(u.a)(a,2),o=c[0],s=c[1];return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(fe.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:function(){s(null)},children:[Object(E.jsx)(Oe.a,{onClick:function(){s(null),t(n)},children:"Load"}),Object(E.jsx)(Oe.a,{onClick:function(){s(null),r(n)},children:"Delete"})]}),Object(E.jsx)(w.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:Object(E.jsx)(be.a,{})})]})},Ne=function(e){var n=e.backupName,t=e.backupID,r=e.onLoad,a=e.onDelete;return Object(E.jsxs)(M.a,{children:[Object(E.jsx)(le.a,{primary:n}),Object(E.jsx)(ue.a,{children:Object(E.jsx)(Fe,{backupID:t,onLoad:r,onDelete:a})})]})},Te=function(e){var n=e.backupsFiles,t=e.onLoad,r=e.onCreate,a=e.onDelete;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(K.a,{children:n.map((function(e){return Object(E.jsx)(Ne,{backupName:e.createdTime,onLoad:t,onDelete:a,backupID:e.id},e.id)}))}),Object(E.jsx)(ke,{onClick:r})]})},Pe=function(e){var n=e.spinnerService,t=e.googleBackupsService,r=e.confirmDialogService,i=Object(d.g)(),c=Object(a.useState)({backupsFiles:[]}),o=Object(u.a)(c,2),l=o[0],p=o[1];U(t.backupsNameLoadChannel,(function(e){p(Object(s.a)(Object(s.a)({},l),{},{backupsFiles:e})),n.spinnerCounterChannel.next(-1)}),(function(){n.spinnerCounterChannel.next(-1),i.replace(j.path)})),U(t.backupLoadChannel,(function(){n.spinnerCounterChannel.next(-1)}),(function(){n.spinnerCounterChannel.next(-1),i.replace(j.path)})),U(t.backupDeleteChannel,(function(){n.spinnerCounterChannel.next(-1)})),U(t.backupUploadChannel,(function(){n.spinnerCounterChannel.next(-1)})),De((function(){t.backupsNameLoadChannel.next("")}));var h=Ie().setSubscription;return Object(E.jsx)(Te,{backupsFiles:l.backupsFiles,onLoad:function(e){n.spinnerCounterChannel.next(1),t.backupLoadChannel.next(e)},onDelete:function(e){t.backupLoadChannel.next(e);var a=r.confirmationChannel.subscribe((function(a){a&&(n.spinnerCounterChannel.next(1),t.backupDeleteChannel.next(e)),r.openDialogChannel.next({isOpen:!1,message:""})}));h(a),r.openDialogChannel.next({isOpen:!0,message:"Do you want to delete this backup?"})},onCreate:function(){n.spinnerCounterChannel.next(1),t.backupUploadChannel.next()}})},Le=t(137),Ae=t.n(Le);!function(e){e[e.TO_DO=0]="TO_DO",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.DONE=2]="DONE"}(r||(r={}));var _e=function(e){var n=e.card,t=e.onEditItem,a=e.onDeleteItem,i=e.onResetProgress,c=e.onClickItem;return Object(E.jsxs)(M.a,{button:!0,children:[Object(E.jsx)(ue.a,{onClick:function(){return c(n.id)},children:Object(E.jsx)(Ae.a,{style:{color:function(e){return e.rangeOfKnowledge===r.DONE?"green":e.rangeOfKnowledge===r.IN_PROGRESS?"yellow":"red"}(n)}})}),Object(E.jsx)(le.a,{onClick:function(){return c(n.id)},primary:n.question,secondary:"Last repeating date: "+Object(se.a)(n.dateRepeating?n.dateRepeating:new Date,ae)}),Object(E.jsx)(ue.a,{children:Object(E.jsx)(ge,{onEdit:function(){return t(n.id)},onDelete:function(){return a(n.id)},onResetProgress:function(){return i(n.id)}})})]},n.id)},Ke=(t(176),function(e){var n=e.cards,t=e.onOpenEditor,r=e.onEditItem,a=e.onDeleteItem,i=e.onResetProgress,c=e.onClickItem;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(K.a,{className:"cards",children:n.map((function(e){return Object(E.jsx)(_e,{card:e,onEditItem:r,onDeleteItem:a,onResetProgress:i,onClickItem:c},e.id)}))}),Object(E.jsx)(ke,{onClick:t})]})}),Me=function(e){var n=e.cardsListService,t=e.confirmDialogService,r=Object(d.h)(),i=Object(d.g)(),c=Object(a.useState)({cards:[]}),o=Object(u.a)(c,2),s=o[0],l=o[1];U(n.cardsChannel,(function(e){l({cards:e})})),U(n.resetCardProgressChannel,(function(e){n.cardsChannel.next(r.state.cardsGroupID)})),U(n.deleteCardChannel,(function(e){n.cardsChannel.next(r.state.cardsGroupID)})),De((function(){n.cardsChannel.next(r.state.cardsGroupID)}));var p=Ie().setSubscription;return Object(E.jsx)(Ke,{cards:s.cards,onOpenEditor:function(){i.push({pathname:C.path,state:{cardsGroupID:r.state.cardsGroupID}})},onEditItem:function(e){i.push({pathname:C.path,state:{cardsGroupID:r.state.cardsGroupID,cardID:e}})},onDeleteItem:function(e){var a=t.confirmationChannel.subscribe((function(a){a&&n.deleteCardChannel.next({cardID:e,cardsGroupID:r.state.cardsGroupID}),t.openDialogChannel.next({isOpen:!1,message:""})}));p(a),t.openDialogChannel.next({isOpen:!0,message:"Do you want to remove this card?"})},onResetProgress:function(e){n.resetCardProgressChannel.next({cardID:e,cardsGroupID:r.state.cardsGroupID})},onClickItem:function(e){i.push({pathname:g.path,state:{cardsGroupID:r.state.cardsGroupID,cardID:e}})}})},qe=t(264),ze=t(265),Ue=t(266),Qe=t(138),Ve=t.n(Qe),Je=function(e){var n=e.statistic;return Object(E.jsxs)("div",{children:[Object(E.jsx)(X.a,{size:"small",children:Object(E.jsxs)("span",{style:{color:"red"},children:["To Do: ",n.todo]})}),Object(E.jsx)(X.a,{size:"small",children:Object(E.jsxs)("span",{style:{color:"orange"},children:["In progress: ",n.inProgress]})}),Object(E.jsx)(X.a,{size:"small",children:Object(E.jsxs)("span",{style:{color:"green"},children:["Completed: ",n.done]})})]})},He=function(e){var n=e.text,t=e.height,r=e.onClickText;return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(I.a,{color:"textSecondary",gutterBottom:!0,onClick:r,style:{paddingTop:0,height:t,overflow:"auto",whiteSpace:"pre-wrap"},children:Object(E.jsx)(K.a,{style:{paddingTop:0},children:n})})})},We=(t(177),function(e){var n=e.card,t=e.answerCardHeight,a=e.isQuestionSide,i=e.onClickCard,c=e.onClick,o=e.statistic,s=e.onEditCard,u=e.onBackClick;return n?Object(E.jsxs)("div",{className:"cards-repeater",children:[Object(E.jsx)(Je,{statistic:o}),Object(E.jsxs)("div",{className:"cards-repeater_title",children:[Object(E.jsx)(I.a,{gutterBottom:!0,variant:"h5",component:"h2",children:a?"Question":"Answer"}),Object(E.jsx)(w.a,{color:"inherit",onClick:s,children:Object(E.jsx)(Ve.a,{})})]}),a?Object(E.jsx)(qe.a,{children:Object(E.jsx)(ze.a,{onClick:i,style:{height:t},children:Object(E.jsx)(I.a,{color:"textSecondary",gutterBottom:!0,children:n.question})})}):Object(E.jsx)(qe.a,{className:"cards-repeater",children:Object(E.jsxs)(ze.a,{style:{height:t},children:[Object(E.jsx)(He,{height:t-20,text:n.answer,onClickText:function(){return i()}}),n.rangeOfKnowledge!==r.DONE?Object(E.jsxs)(Ue.a,{className:"cards-repeater_buttons-container",children:[Object(E.jsx)(X.a,{size:"small",color:"primary",onClick:function(){return c(!0)},children:"Yes"}),Object(E.jsx)(X.a,{size:"small",color:"primary",onClick:function(){return c(!1)},children:"No"})]}):Object(E.jsx)("div",{children:"Repeated"})]})})]}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("span",{children:"All cards repeated"}),Object(E.jsx)(X.a,{size:"small",color:"primary",onClick:u,children:"Go back"})]})}),Ye=function(e){var n=e.cardsRepeaterService,t=Object(d.h)(),r=Object(d.g)(),i=Object(a.useState)({card:void 0,isQuestionSide:!0}),c=Object(u.a)(i,2),o=c[0],l=c[1],p=Object(a.useState)({inProgress:0,todo:0,done:0}),h=Object(u.a)(p,2),j=h[0],b=h[1];U(n.cardChannel,(function(e){l({card:e,isQuestionSide:!0}),n.statisticChannel.next("")})),U(n.currentCardChannel,(function(e){e?l({card:e,isQuestionSide:!0}):n.cardChannel.next({cardsGroupID:t.state.cardsGroupID,cardID:t.state.cardID})})),U(n.statisticChannel,(function(e){b((function(){return e}))})),U(n.repeatingResultChannel,(function(){n.cardChannel.next({cardsGroupID:t.state.cardsGroupID,cardID:t.state.cardID})})),De((function(){n.currentCardChannel.next(t.state.cardsGroupID),n.statisticChannel.next("")}));var O=Object(a.useContext)(Sn);return Object(E.jsx)(We,{answerCardHeight:O.height-220,isQuestionSide:o.isQuestionSide,onClickCard:function(){l(Object(s.a)(Object(s.a)({},o),{},{isQuestionSide:!o.isQuestionSide}))},onClick:function(e){o.card?n.repeatingResultChannel.next({isKnown:e,cardID:o.card.id,cardsGroupID:t.state.cardsGroupID}):l({card:void 0,isQuestionSide:!1})},card:o.card,statistic:j,onEditCard:function(){o.card&&r.push({pathname:C.path,state:{cardsGroupID:t.state.cardsGroupID,cardID:o.card.id}})},onBackClick:function(){r.replace(f.path)}})},Xe=function(e){var n=e.localBackupsService,t=e.confirmDialogService,r=e.spinnerService,i=Object(a.useRef)(null);U(n.localBackupChannel),U(n.loadBackupChannel,(function(){r.spinnerCounterChannel.next(-1)}));var c=Ie().setSubscription;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("input",{type:"file",onChange:function(e){var a=e.target.files[0];if(a){var i=new FileReader;i.onload=function(e){var a=e.target.result,i=t.confirmationChannel.subscribe((function(e){e&&(r.spinnerCounterChannel.next(1),n.loadBackupChannel.next(a)),t.openDialogChannel.next({isOpen:!1,message:""})}));c(i),t.openDialogChannel.next({isOpen:!0,message:"Do you want to load this backup, your current changes could be removed?"})},i.readAsText(a)}}}),Object(E.jsx)("a",{ref:i}),Object(E.jsx)(X.a,{size:"small",onClick:function(){return n.localBackupChannel.next()},children:"Save"})]})},Ze=t(236),$e=(t(178),function(e){var n=e.groupName,t=e.onChangeGroupName,r=e.onSaveGroup;return Object(E.jsxs)("div",{className:"group-editor",children:[Object(E.jsx)(Ze.a,{className:"group-editor_text",required:!0,id:"outlined-required",label:"Group name",onChange:function(e){t(e.target.value)},value:n,variant:"filled"}),Object(E.jsx)(X.a,{variant:"outlined",className:"group-editor_button",size:"small",onClick:function(){return r()},children:"Save"})]})}),en=function(e){var n=e.cardsGroupsEditorService,t=Object(d.h)(),r=Object(d.g)(),i=Object(a.useState)({cardsGroup:{cards:[],nameCardsGroup:"",dateRepeating:(new Date).getTime(),id:(new Date).getTime(),percentRepeatedCards:0}}),c=Object(u.a)(i,2),o=c[0],l=c[1];U(n.groupEditingChannel),U(n.groupChannel,(function(e){l({cardsGroup:e})})),De((function(){var e=t.state?t.state.cardsGroupID:-1;n.groupChannel.next(e)}));return Object(E.jsx)($e,{groupName:o.cardsGroup.nameCardsGroup,onChangeGroupName:function(e){l({cardsGroup:Object(s.a)(Object(s.a)({},o.cardsGroup),{},{nameCardsGroup:e})})},onSaveGroup:function(){n.groupEditingChannel.next(o.cardsGroup),r.goBack()}})},nn=t(240),tn=(t(179),function(e){var n=e.answer,t=e.question,r=e.onChangeAnswer,a=e.onChangeQuestion,i=e.onSaveCard,c=e.cardsGroups,o=e.currentCardsGroup,s=e.onChangeCardsGroup;return Object(E.jsxs)("div",{className:"cards-editor",children:[Object(E.jsx)(Ze.a,{className:"cards-editor_text",required:!0,id:"outlined-required",label:"Question",multiline:!0,onChange:function(e){a(e.target.value)},value:t,variant:"filled"}),Object(E.jsx)(Ze.a,{className:"cards-editor_text",required:!0,id:"outlined-required",label:"Answer",multiline:!0,onChange:function(e){r(e.target.value)},value:n,variant:"filled"}),Object(E.jsx)(nn.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",className:"cards-editor_text",value:o.id.toString(),label:o.nameCardsGroup,onChange:function(e){s(Number(e.target.value))},autoWidth:!0,children:c.map((function(e){return Object(E.jsx)(Oe.a,{value:e.id.toString(),children:e.nameCardsGroup},e.id)}))}),Object(E.jsx)(X.a,{variant:"outlined",className:"group-editor_button",size:"small",onClick:function(){return i()},children:"Save"})]})}),rn=function(e){var n=e.cardsEditorService,t=Object(d.h)(),i=Object(d.g)(),c=Object(a.useState)({card:{rangeOfKnowledge:r.IN_PROGRESS,answer:"",question:"",dateRepeating:0,id:(new Date).getTime()},currentCardsGroup:{id:0,nameCardsGroup:""},cardsGroups:[]}),o=Object(u.a)(c,2),l=o[0],p=o[1];U(n.cardEditingChannel),U(n.simplifiedCardsGroupsChannel,(function(e){var n=e.currentCardsGroup,t=e.cardsGroups;p(n?function(e){return Object(s.a)(Object(s.a)({},e),{},{cardsGroups:t,currentCardsGroup:n})}:function(e){return Object(s.a)(Object(s.a)({},e),{},{currentCardsGroup:l.currentCardsGroup,cardsGroups:t})})})),U(n.cardChannel,(function(e){e&&p(Object(s.a)(Object(s.a)({},l),{},{card:e}))})),De((function(){var e=t.state?t.state.cardsGroupID:-1,r=t.state?t.state.cardID:-1;n.cardChannel.next({cardID:r,cardsGroupID:e}),n.simplifiedCardsGroupsChannel.next(e)}));return Object(E.jsx)(tn,{question:l.card.question,answer:l.card.answer,onChangeQuestion:function(e){p({card:Object(s.a)(Object(s.a)({},l.card),{},{question:e}),currentCardsGroup:l.currentCardsGroup,cardsGroups:l.cardsGroups})},onChangeAnswer:function(e){p({card:Object(s.a)(Object(s.a)({},l.card),{},{answer:e}),currentCardsGroup:l.currentCardsGroup,cardsGroups:l.cardsGroups})},onSaveCard:function(){n.cardEditingChannel.next({card:l.card,cardsGroupID:l.currentCardsGroup.id}),i.goBack()},currentCardsGroup:l.currentCardsGroup,cardsGroups:l.cardsGroups,onChangeCardsGroup:function(e){n.simplifiedCardsGroupsChannel.next(e)}})},an=(t(180),t(269)),cn=t(270),on=t(244),sn=function(e){var n=e.settings,t=e.onChange;return Object(E.jsx)(an.a,{className:"settings-form",children:Object(E.jsx)(cn.a,{control:Object(E.jsx)(on.a,{checked:n.isRandomRepeating,onChange:function(e){t(Object(s.a)(Object(s.a)({},n),{},{isRandomRepeating:e.target.checked}))}}),label:"Random repeating algorithm"})})},un=function(e){var n=e.settingsService,t=Object(a.useState)({isRandomRepeating:!1}),r=Object(u.a)(t,2),i=r[0],c=r[1];U(n.changeSettingsChannel,(function(){n.settingsChannel.next("")})),U(n.settingsChannel,(function(e){c((function(n){return Object(s.a)(Object(s.a)({},n),e)}))})),De((function(){n.settingsChannel.next("")}));return Object(E.jsx)(sn,{settings:i,onChange:function(e){n.changeSettingsChannel.next(e)}})},ln=function(e){var n=e.cardsGroupsListService,t=e.cardsGroupsEditorService,r=e.errorService,a=e.googleAuthService,i=e.googleBackupsService,c=e.spinnerService,o=e.confirmDialogService,s=e.cardsEditorService,u=e.cardsListService,l=e.cardsRepeaterService,p=e.settingsService,h=e.localBackupsService;return Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.a,{exact:!0,from:"/MyCardsWeb",to:f.path}),Object(E.jsx)(d.a,{exact:!0,from:"/",to:f.path}),Object(E.jsx)(d.b,{path:f.path,children:Object(E.jsx)(Ge,{cardsGroupsListService:n,confirmDialogService:o})}),Object(E.jsx)(d.b,{path:j.path,children:Object(E.jsx)(Ee,{googleAuthService:a,errorService:r})}),Object(E.jsx)(d.b,{path:b.path,children:Object(E.jsx)(Pe,{googleBackupsService:i,spinnerService:c,confirmDialogService:o})}),Object(E.jsx)(d.b,{path:O.path,children:Object(E.jsx)(Me,{cardsListService:u,confirmDialogService:o})}),Object(E.jsx)(d.b,{path:g.path,children:Object(E.jsx)(Ye,{cardsRepeaterService:l})}),Object(E.jsx)(d.b,{path:v.path,children:Object(E.jsx)(Xe,{localBackupsService:h,confirmDialogService:o,spinnerService:c})}),Object(E.jsx)(d.b,{path:m.path,children:Object(E.jsx)(en,{cardsGroupsEditorService:t})}),Object(E.jsx)(d.b,{path:C.path,children:Object(E.jsx)(rn,{cardsEditorService:s})}),Object(E.jsx)(d.b,{path:x.path,children:Object(E.jsx)(un,{settingsService:p})})]})},dn=t(234),pn=t(235),hn=t(243),jn=function(){function e(n){var t=this;Object(p.a)(this,e),this.storageService=n,this.backupsNameLoadChannel=void 0,this.backupLoadChannel=void 0,this.backupUploadChannel=void 0,this.backupDeleteChannel=void 0,this.backupFileName="my-cards.json",this.backupFolderName="my-cards",this.googleDriveFilesAPI="https://www.googleapis.com/drive/v3/files/",this.googleDriveUploadAPI="https://www.googleapis.com/upload/drive/v3/files/",this.searchFilesURI=this.googleDriveFilesAPI+"?fields=files(id,createdTime)&q=name%20contains%20",this.searchFolderURI=this.googleDriveFilesAPI+"?q=name%20contains%20",this.getFilesAdditionalPartURI="?alt=media",this.googleDriveFolderType="application/vnd.google-apps.folder",this.backupsNameLoadChannel=new P((function(){return Object(N.a)("").pipe(Object(pn.a)((function(){return n.getAuthToken()})),Object(pn.a)((function(e){return t.getBackupFiles(e)})),Object(oe.a)((function(e){return e.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{createdTime:e.createdTime.slice(0,10)})}))})))})),this.backupLoadChannel=new P((function(e){return Object(N.a)("").pipe(Object(pn.a)((function(){return t.loadBackupFile(e)})))})),this.backupUploadChannel=new P((function(){return Object(N.a)("").pipe(Object(pn.a)((function(){return n.getAuthToken()})),Object(pn.a)((function(e){return t.createNewBackup(e)})))})),this.backupDeleteChannel=new P((function(e){return Object(N.a)("").pipe(Object(pn.a)((function(){return t.deleteBackupFile(e)})),Object(dn.a)((function(){t.backupsNameLoadChannel.next("")})))}))}return Object(h.a)(e,[{key:"createNewBackup",value:function(e){var n=this;return this.getBackupFolder(e).pipe(Object(pn.a)((function(t){if(t){var r=t.find((function(e){return e.mimeType===n.googleDriveFolderType}));return r?Object(N.a)(r.id):n.createBackupFolder(e)}return n.createBackupFolder(e)})),Object(pn.a)((function(t){return n.createNewBackupFile(e,t)})),Object(pn.a)((function(t){return n.uploadBackupFile(e,t)})),Object(dn.a)((function(){n.backupsNameLoadChannel.next("")})))}},{key:"getBackupFiles",value:function(e){return Object(hn.a)({url:"".concat(this.searchFilesURI,"'").concat(this.backupFileName,"'"),headers:{Authorization:"Bearer "+e},method:"GET"}).pipe(Object(oe.a)((function(e){return e.response.files})))}},{key:"loadBackupFile",value:function(e){var n=this;return Object(N.a)("").pipe(Object(pn.a)((function(){return n.storageService.getAuthToken()})),Object(pn.a)((function(t){return Object(hn.a)({url:n.googleDriveFilesAPI+e+n.getFilesAdditionalPartURI,headers:{Authorization:"Bearer "+t},method:"GET"})})),Object(oe.a)((function(e){return n.storageService.setBackup(e.response),e.response})))}},{key:"getBackupFolder",value:function(e){return Object(hn.a)({url:"".concat(this.searchFolderURI,"'").concat(this.backupFolderName,"'"),headers:{Authorization:"Bearer "+e},method:"GET"}).pipe(Object(oe.a)((function(e){return e.response.files})))}},{key:"deleteBackupFile",value:function(e){var n=this;return Object(N.a)("").pipe(Object(pn.a)((function(){return n.storageService.getAuthToken()})),Object(pn.a)((function(t){return Object(hn.a)({url:n.googleDriveFilesAPI+e,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},method:"DELETE"})})))}},{key:"createNewBackupFile",value:function(e,n){return Object(hn.a)({url:this.googleDriveFilesAPI,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:{parents:[n],name:this.backupFileName},method:"POST"}).pipe(Object(oe.a)((function(e){return e.response.id})))}},{key:"createBackupFolder",value:function(e){return Object(hn.a)({url:this.googleDriveFilesAPI,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:{name:this.backupFolderName,mimeType:"application/vnd.google-apps.folder"},method:"POST"}).pipe(Object(oe.a)((function(e){return e.response.id})))}},{key:"uploadBackupFile",value:function(e,n){var t=this;return Object(N.a)("").pipe(Object(pn.a)((function(){return t.storageService.getBackup()})),Object(pn.a)((function(r){return Object(hn.a)({url:t.googleDriveUploadAPI+n,headers:{Authorization:"Bearer "+e},body:JSON.stringify(r,null,4),responseType:"text",method:"PATCH"}).pipe(Object(oe.a)((function(){return n})))})))}}]),e}(),bn=t(42),fn=t.n(bn),On=t(61),gn=t(103),Cn=function(){function e(n){var t=this;Object(p.a)(this,e),this.dataBaseService=n,this.cardsStorageID="cards-local-storage",this.authTokenLocalStorageID="auth-token",this.settingsID="settings",this.getBackup=function(){return Object(gn.a)(t.getBackupFromDataBase())},this.getBackupFromDataBase=Object(On.a)(fn.a.mark((function e(){var n;return fn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,t.dataBaseService.get(t.cardsStorageID);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",n);case 11:if(!n){e.next=15;break}return e.abrupt("return",n);case 15:return e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,7]])}))),this.setBackupToDataBase=function(){var e=Object(On.a)(fn.a.mark((function e(n){return fn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.dataBaseService.set(t.cardsStorageID,n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(n){return e.apply(this,arguments)}}()}return Object(h.a)(e,[{key:"setBackup",value:function(e){return Object(gn.a)(this.setBackupToDataBase(e))}},{key:"getAuthToken",value:function(){var e=this;return Object(gn.a)(new Promise((function(n,t){var r=localStorage.getItem(e.authTokenLocalStorageID);r?n(r):t("Auth token is empty")})))}},{key:"setAuthToken",value:function(e){var n=this;return Object(gn.a)(new Promise((function(t){localStorage.setItem(n.authTokenLocalStorageID,e),t(e)})))}},{key:"getSettings",value:function(){var e=this;return Object(gn.a)(new Promise((function(n,t){var r=localStorage.getItem(e.settingsID);r?n(JSON.parse(r)):t({isRandomRepeating:!1})})))}},{key:"setSettings",value:function(e){var n=this;return Object(gn.a)(new Promise((function(t){localStorage.setItem(n.settingsID,JSON.stringify(e)),t(e)})))}}]),e}(),vn=function(){function e(n){var t=this;Object(p.a)(this,e),this.storageService=n,this.cardsChannel=void 0,this.resetCardProgressChannel=void 0,this.deleteCardChannel=void 0,this.cardsChannel=new P((function(e){return Object(N.a)("").pipe(Object(pn.a)((function(){return t.getCards(e)})))})),this.resetCardProgressChannel=new P((function(e){var t=e.cardID,a=e.cardsGroupID;return n.getBackup().pipe(Object(oe.a)((function(e){var n=e.findIndex((function(e){return a===e.id})),i=-1;return n>=0&&(i=e[n].cards.findIndex((function(e){return t===e.id}))),n>=0&&i>=0&&(e[n].cards[i].rangeOfKnowledge=r.TO_DO),e})),Object(dn.a)((function(e){n.setBackup(e)})))})),this.deleteCardChannel=new P((function(e){var t=e.cardID,r=e.cardsGroupID;return n.getBackup().pipe(Object(oe.a)((function(e){var n=e.findIndex((function(e){return r===e.id})),a=-1;return n>=0&&(a=e[n].cards.findIndex((function(e){return t===e.id}))),n>=0&&a>=0&&(e[n].cards=e[n].cards.filter((function(e){return e.id!==t}))),e})),Object(dn.a)((function(e){n.setBackup(e)})))}))}return Object(h.a)(e,[{key:"getCards",value:function(e){var n=this;return Object(N.a)("").pipe(Object(pn.a)((function(){return n.storageService.getBackup()})),Object(oe.a)((function(n){var t=n.find((function(n){return n.id===e}));return t?t.cards:[]})))}}]),e}(),mn=function(){function e(n){var t=this;Object(p.a)(this,e),this.storageService=n,this.currentCardChannel=void 0,this.cardChannel=void 0,this.repeatingResultChannel=void 0,this.statisticChannel=void 0,this.statisticValue={inProgress:0,todo:0,done:0},this.currentCardID=0,this.writeRangeOfKnowledge=function(e){return Object(N.a)("").pipe(Object(pn.a)((function(){return t.storageService.getBackup()})),Object(oe.a)((function(n){return n.forEach((function(n){e.cardsGroupID&&n.id!==e.cardsGroupID||n.cards.forEach((function(n){e.cardID&&n.id!==e.cardID||(e.isKnown&&n.rangeOfKnowledge===r.IN_PROGRESS||e.isKnown&&n.rangeOfKnowledge===r.TO_DO?n.rangeOfKnowledge=r.DONE:e.isKnown||n.rangeOfKnowledge!==r.TO_DO||(n.rangeOfKnowledge=r.IN_PROGRESS))}))})),n})),Object(pn.a)((function(e){return t.storageService.setBackup(e)})))},this.cardChannel=new P((function(e){var n=e.cardsGroupID,r=e.cardID;return Object(N.a)("").pipe(Object(pn.a)((function(){return t.getCards(n,r)})),Object(pn.a)((function(e){return t.getCardForRepeating(e)})))})),this.repeatingResultChannel=new P((function(e){return t.writeRangeOfKnowledge(e)})),this.currentCardChannel=new P((function(e){return Object(N.a)("").pipe(Object(pn.a)((function(){return n.getSettings()})),Object(pn.a)((function(n){return t.getCards(e,t.currentCardID)})),Object(oe.a)((function(e){return 1===e.length?e[0]:null})))})),this.statisticChannel=new P((function(){return Object(N.a)(t.statisticValue)}))}return Object(h.a)(e,[{key:"getCards",value:function(e,n){return this.storageService.getBackup().pipe(Object(oe.a)((function(t){var r=t.find((function(n){return!e||n.id===e})),a=[];if(r&&(a=r.cards,n)){var i=a.find((function(e){return e.id===n}));i&&(a=[]).push(i)}return a})))}},{key:"getCardForRepeating",value:function(e){var n=this;return this.storageService.getSettings().pipe(Object(oe.a)((function(t){t.isRandomRepeating&&(e=n.shuffleCards(e));var a=e.find((function(e){return e.rangeOfKnowledge===r.TO_DO}));return a||(a=e.find((function(e){return e.rangeOfKnowledge===r.IN_PROGRESS}))),1===e.length&&(a=e[0]),n.updateStatistic(e),a&&(n.currentCardID=a.id),a})))}},{key:"updateStatistic",value:function(e){var n=this;this.statisticValue={inProgress:0,todo:0,done:0},e.forEach((function(e){e.rangeOfKnowledge===r.IN_PROGRESS?n.statisticValue.inProgress=n.statisticValue.inProgress+1:e.rangeOfKnowledge===r.TO_DO?n.statisticValue.todo=n.statisticValue.todo+1:n.statisticValue.done=n.statisticValue.done+1}))}},{key:"shuffleCards",value:function(e){for(var n,t=[],r=e.length;r;)(n=Math.floor(Math.random()*e.length))in e&&(t.push(e[n]),delete e[n],r--);return t}}]),e}(),xn=function(){function e(n){var t=this;Object(p.a)(this,e),this.storageService=n,this.localBackupChannel=void 0,this.loadBackupChannel=void 0,this.localBackupChannel=new P((function(){return Object(N.a)("").pipe(Object(pn.a)((function(){return t.saveFile()})))})),this.loadBackupChannel=new P((function(e){return Object(N.a)("").pipe(Object(pn.a)((function(){return t.storageService.setBackup(JSON.parse(e))})))}))}return Object(h.a)(e,[{key:"saveFile",value:function(){return this.storageService.getBackup().pipe(Object(dn.a)((function(e){var n=JSON.stringify(e,null,4),t=new Blob([n],{type:"octet/stream"}),r=window.URL.createObjectURL(t),a=document.createElement("a");a&&(a.href=r,a.download="My Cards.txt",a.click()),window.URL.revokeObjectURL(r)})))}}]),e}(),kn=t(141),Sn=i.a.createContext(re),Dn=new function e(){Object(p.a)(this,e),this.errorChannel=void 0,this.errorChannel=new P((function(e){return Object(N.a)(e)}))},wn=new function e(){var n=this;Object(p.a)(this,e),this.spinnerCounterChannel=void 0,this.spinnerCounter=0,this.spinnerCounterChannel=new P((function(e){return Object(N.a)("").pipe(Object(oe.a)((function(){return n.spinnerCounter+e>=0&&(n.spinnerCounter=n.spinnerCounter+e),n.spinnerCounter})))}))},In=new function e(){var n=this;Object(p.a)(this,e),this.openDialogChannel=new P((function(e){return Object(N.a)(e).pipe(Object(dn.a)((function(e){e.isOpen||n.confirmationChannel.unsubscribe()})))})),this.confirmationChannel=new P((function(e){return Object(N.a)(e)}))},Gn=new Cn(new function e(n){var t=this;Object(p.a)(this,e),this.storeName=n,this.dataBase=void 0,this.DATA_BASE_NAME="app-data-base",this.get=function(){var e=Object(On.a)(fn.a.mark((function e(n){return fn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dataBase;case 2:return e.abrupt("return",e.sent.get(t.storeName,n));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.set=function(){var e=Object(On.a)(fn.a.mark((function e(n,r){return fn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dataBase;case 2:return e.abrupt("return",e.sent.put(t.storeName,r,n));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.dataBase=Object(kn.a)(this.DATA_BASE_NAME,1,{upgrade:function(e){e.createObjectStore(n)}})}("cards-store")),yn=new function e(n){Object(p.a)(this,e),this.groupEditingChannel=void 0,this.groupChannel=void 0,this.groupEditingChannel=new P((function(e){return n.getBackup().pipe(Object(oe.a)((function(n){var t=n.findIndex((function(n){return e.id===n.id}));return t<0?n.push(e):n[t]=e,n})),Object(dn.a)((function(e){n.setBackup(e)})))})),this.groupChannel=new P((function(e){return n.getBackup().pipe(Object(oe.a)((function(n){var t=n.find((function(n){return e===n.id}));return t||(t={cards:[],nameCardsGroup:"",dateRepeating:(new Date).getTime(),id:(new Date).getTime(),percentRepeatedCards:0}),t})))}))}(Gn),Bn=new function e(n){Object(p.a)(this,e),this.groupsListChannel=void 0,this.groupDeleteChannel=void 0,this.resetProgressChannel=void 0,this.groupsListChannel=new P((function(){return n.getBackup().pipe(Object(oe.a)((function(e){return e.map((function(e){var n=0;return e.cards.forEach((function(e){e.dateRepeating>n&&(n=e.dateRepeating)})),e.dateRepeating=n,e})),e})),Object(oe.a)((function(e){return e.sort((function(e,n){return e.dateRepeating&&n.dateRepeating?n.dateRepeating-e.dateRepeating:0}))})),Object(oe.a)((function(e){return e.map((function(e){var n=0;return e.cards.forEach((function(e){e.rangeOfKnowledge===r.DONE&&n++})),e.percentRepeatedCards=n/e.cards.length*100,e})),e})))})),this.groupDeleteChannel=new P((function(e){return n.getBackup().pipe(Object(oe.a)((function(n){return n.filter((function(n){return n.id!==e}))})),Object(dn.a)((function(e){return n.setBackup(e)})))})),this.resetProgressChannel=new P((function(e){return n.getBackup().pipe(Object(oe.a)((function(n){var t=n.findIndex((function(n){return e===n.id}));return t<0||(n[t].cards=n[t].cards.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{rangeOfKnowledge:r.TO_DO})}))),n})),Object(dn.a)((function(e){return n.setBackup(e)})))}))}(Gn),Rn=new function e(n){Object(p.a)(this,e),this.loginChannel=void 0,this.loginChannel=new P((function(e){return Object(N.a)("").pipe(Object(dn.a)((function(){n.setAuthToken(e)})))}))}(Gn),En=new jn(Gn),Fn=new function e(n){Object(p.a)(this,e),this.cardEditingChannel=void 0,this.simplifiedCardsGroupsChannel=void 0,this.cardChannel=void 0,this.cardEditingChannel=new P((function(e){var t=e.card,r=e.cardsGroupID;return n.getBackup().pipe(Object(oe.a)((function(e){var n=e.findIndex((function(e){return r===e.id})),a=-1;return n>=0&&(a=e[n].cards.findIndex((function(e){return t.id===e.id}))),n>=0&&a<0?e[n].cards.push(t):n>=0&&a>=0&&(e[n].cards[a]=t),e})),Object(dn.a)((function(e){n.setBackup(e)})),Object(oe.a)((function(){return t})))})),this.cardChannel=new P((function(e){var t=e.cardID,a=e.cardsGroupID;return n.getBackup().pipe(Object(oe.a)((function(e){var n=e.find((function(e){return a===e.id})),i={rangeOfKnowledge:r.TO_DO,answer:"",question:"",dateRepeating:0,id:(new Date).getTime()};return n&&(i=n.cards.find((function(e){return e.id===t}))),i})))})),this.simplifiedCardsGroupsChannel=new P((function(e){return n.getBackup().pipe(Object(oe.a)((function(e){return e.map((function(e){return{id:e.id,nameCardsGroup:e.nameCardsGroup}}))})),Object(oe.a)((function(n){return{currentCardsGroup:n.find((function(n){return e===n.id})),cardsGroups:n}})))}))}(Gn),Nn=new vn(Gn),Tn=new mn(Gn),Pn=new xn(Gn),Ln=new function e(n){Object(p.a)(this,e),this.settingsChannel=void 0,this.changeSettingsChannel=void 0,this.settingsChannel=new P((function(){return n.getSettings()})),this.changeSettingsChannel=new P((function(e){return n.setSettings(e)}))}(Gn);var An=function(){var e=Object(a.useState)(re),n=Object(u.a)(e,2),t=n[0],r=n[1];return Object(a.useEffect)((function(){var e=window.screen.height,n=window.screen.width;t.height===e&&t.width===n||r(Object(s.a)(Object(s.a)({},t),{},{height:window.screen.height,width:window.screen.width}))})),Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Sn.Provider,{value:t,children:Object(E.jsx)(l.a,{children:Object(E.jsxs)("div",{children:[Object(E.jsx)($,{errorService:Dn}),Object(E.jsx)(A,{}),Object(E.jsx)(Q,{}),Object(E.jsx)(ce,{confirmDialogService:In}),Object(E.jsxs)("div",{className:"page-container",style:{height:t.height,width:t.width},children:[Object(E.jsx)(te,{spinnerService:wn}),Object(E.jsx)(ln,{cardsGroupsListService:Bn,cardsGroupsEditorService:yn,googleAuthService:Rn,googleBackupsService:En,errorService:Dn,spinnerService:wn,confirmDialogService:In,cardsEditorService:Fn,cardsListService:Nn,cardsRepeaterService:Tn,localBackupsService:Pn,settingsService:Ln})]})]})})})})},_n=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,271)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),r(e),a(e),i(e),c(e)}))};o.a.render(Object(E.jsx)(i.a.StrictMode,{children:Object(E.jsx)(An,{})}),document.getElementById("root")),_n()}},[[182,1,2]]]);
//# sourceMappingURL=main.ec5e5ad7.chunk.js.map