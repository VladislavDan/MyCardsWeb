(this["webpackJsonpmy-cards-web"]=this["webpackJsonpmy-cards-web"]||[]).push([[0],{159:function(e,n,t){},160:function(e,n,t){},161:function(e,n,t){},172:function(e,n,t){},173:function(e,n,t){},174:function(e,n,t){},175:function(e,n,t){},176:function(e,n,t){},177:function(e,n,t){},178:function(e,n,t){},180:function(e,n,t){"use strict";t.r(n);var r,a=t(0),c=t.n(a),i=t(59),o=t.n(i),s=(t(159),t(15)),u=t(11),l=t(81),d=(t(160),t(14)),p=t(17),h=t(30),j={path:"/google-auth",name:"Auth Google"},b={path:"/google-backups",name:"Google Backups"},f={path:"/cards-groups",name:"Cards Groups"},O={path:"/cards-list",name:"Cards"},g={path:"/cards-repeater",name:"Repeat Card"},C={path:"/cards-editor",name:"Edit Card"},v={path:"/local-backups",name:"Local Backups"},m={path:"/cards-group-editor",name:"Edit Group"},x=new(function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,[{key:"getPageLabel",value:function(e){return e===j.path?j.name:e===b.path?b.name:e===f.path?f.name:e===O.path?O.name:e===g.path?g.name:e===v.path?v.name:"My Cards"}}]),e}()),k=t(253),S=t(255),D=t(256),w=t(86),I=t(131),G=t.n(I),B=t(132),y=t.n(B),F=(t(161),t(1)),E=function(e){var n=e.pageLabel,t=e.onClick,r=Object(d.g)(),a=Object(d.h)();return Object(F.jsx)(k.a,{position:"fixed",children:Object(F.jsxs)(S.a,{className:"toolbar",children:[Object(F.jsx)(D.a,{className:"toolbar_menu-icon",edge:"start",color:"inherit","aria-label":"menu",onClick:t,children:Object(F.jsx)(G.a,{})}),Object(F.jsx)(w.a,{className:"toolbar_label",variant:"h6",children:n}),n===O.name||n===f.name?Object(F.jsx)(D.a,{color:"inherit",onClick:function(){n===O.name?r.push({pathname:g.path,state:a.state}):r.push({pathname:g.path,state:null})},children:Object(F.jsx)(y.a,{})}):null]})})},R=t(241),T=t(247),N=function(){function e(n){Object(p.a)(this,e),this.outputSubject=void 0,this.observableCreator=void 0,this.subscriptions=[],this.outputSubject=new T.a,this.observableCreator=n}return Object(h.a)(e,[{key:"next",value:function(e){var n=this;this.subscriptions.push(this.observableCreator(e).subscribe((function(e){n.outputSubject.next(e)})))}},{key:"subscribe",value:function(e,n){var t=this.outputSubject.subscribe((function(n){e&&e(n)}),(function(e){n&&n(e),console.error(e)}));return this.subscriptions.push(t),t}},{key:"unsubscribe",value:function(){this.subscriptions.forEach((function(e){e.closed||e.unsubscribe()})),this.subscriptions=[]}}]),e}(),P=new function e(){Object(p.a)(this,e),this.navigationPanelOpenChannel=void 0,this.navigationPanelOpenChannel=new N((function(e){return Object(R.a)(e)}))},L=function(){var e=Object(d.h)(),n=Object(a.useState)(""),t=Object(u.a)(n,2),r=t[0],c=t[1];Object(a.useEffect)((function(){var n=x.getPageLabel(e.pathname);c(n)}),[e.pathname]);return Object(F.jsx)(E,{pageLabel:r,onClick:function(){P.navigationPanelOpenChannel.next("")}})},A=t(237),_=t(257),K=t(240),q=function(e){var n=e.path,t=e.name,r=e.toggleDrawer;return Object(F.jsx)(K.a,{button:!0,children:Object(F.jsx)(l.b,{to:n,onClick:r(!1),children:t})})},z=function(e){var n=e.isOpen,t=e.toggleDrawer;return Object(F.jsx)(A.a,{anchor:"left",open:n,onClose:t(!1),onOpen:t(!0),children:Object(F.jsxs)(_.a,{children:[Object(F.jsx)(q,{path:f.path,name:f.name,toggleDrawer:t}),Object(F.jsx)(q,{path:j.path,name:j.name,toggleDrawer:t}),Object(F.jsx)(q,{path:v.path,name:v.name,toggleDrawer:t})]})})},M=function(e,n,t){var r=Object(a.useState)({subscription:null}),c=Object(u.a)(r,2),i=c[0],o=c[1];Object(a.useEffect)((function(){if(!i.subscription||i.subscription.closed){var r=e.subscribe(n,t);o(Object(s.a)(Object(s.a)({},i),{},{subscription:r}))}return function(){e.unsubscribe()}}),[])},U=function(){var e=Object(a.useState)({isOpen:!1}),n=Object(u.a)(e,2),t=n[0],r=n[1];M(P.navigationPanelOpenChannel,(function(){r(Object(s.a)(Object(s.a)({},t),{},{isOpen:!0}))}));return Object(F.jsx)(z,{isOpen:t.isOpen,toggleDrawer:function(e){return function(n){(!n||"keydown"!==n.type||"Tab"!==n.nativeEvent.key&&"Shift"!==n.nativeEvent.key)&&r(Object(s.a)(Object(s.a)({},t),{},{isOpen:e}))}}})},Q=t(248),V=t(231),J=t(249),H=t(250),W=t(251),Y=t(252),X=function(e){var n=e.isOpen,t=e.errorMessage,r=e.handleClose;return Object(F.jsxs)(Q.a,{open:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:r,children:[Object(F.jsx)(V.a,{id:"alert-dialog-title",children:"Something went wrong"}),Object(F.jsx)(J.a,{children:Object(F.jsx)(H.a,{id:"alert-dialog-description",children:t})}),Object(F.jsx)(W.a,{children:Object(F.jsx)(Y.a,{color:"primary",onClick:r,children:"Ok"})})]})},Z=function(e){var n=e.errorService,t=Object(a.useState)({isOpen:!1,errorMessage:""}),r=Object(u.a)(t,2),c=r[0],i=r[1];M(n.errorChannel,(function(e){i({isOpen:!0,errorMessage:e})}));return Object(F.jsx)(X,{isOpen:c.isOpen,errorMessage:c.errorMessage,handleClose:function(){i({isOpen:!1,errorMessage:""})}})},$=t(258),ee=function(e){return e.isShow?Object(F.jsx)($.a,{color:"secondary"}):null},ne=function(e){var n=e.spinnerService,t=Object(a.useState)(!1),r=Object(u.a)(t,2),c=r[0],i=r[1];return M(n.spinnerCounterChannel,(function(e){i(0!==e)})),Object(F.jsx)(ee,{isShow:c})},te={height:0,width:0,updateContext:function(){}},re="dd-MM-yyyy",ae=function(e){var n=e.onClickAgree,t=e.onClickDisagree,r=e.isOpen,a=e.message,c=e.onClose;return Object(F.jsx)("div",{children:Object(F.jsxs)(Q.a,{open:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:c,children:[Object(F.jsx)(V.a,{id:"alert-dialog-title",children:"Warning"}),Object(F.jsx)(J.a,{children:Object(F.jsx)(H.a,{id:"alert-dialog-description",children:a})}),Object(F.jsxs)(W.a,{children:[Object(F.jsx)(Y.a,{onClick:t,color:"primary",children:"Disagree"}),Object(F.jsx)(Y.a,{onClick:n,color:"primary",autoFocus:!0,children:"Agree"})]})]})})},ce=function(e){var n=e.confirmDialogService,t=a.useState({isOpen:!1,message:""}),r=Object(u.a)(t,2),c=r[0],i=r[1];M(n.openDialogChannel,(function(e){i(Object(s.a)({},e))}));return Object(F.jsx)(ae,{isOpen:c.isOpen,onClickAgree:function(){n.confirmationChannel.next(!0)},onClickDisagree:function(){n.confirmationChannel.next(!1)},onClose:function(){i({isOpen:!1,message:""}),n.confirmationChannel.unsubscribe()},message:c.message})},ie=t(133),oe=t(102),se=t(74),ue=t(101),le=t(260),de=t(259),pe=function(e){var n=e.percent;return Object(F.jsxs)(de.a,{position:"relative",display:"inline-flex",children:[Object(F.jsx)(le.a,{variant:"determinate",value:n}),Object(F.jsx)(de.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(F.jsx)(w.a,{variant:"caption",component:"div",color:"textSecondary",children:"".concat(Math.round(n),"%")})})]})},he=t(100),je=t.n(he),be=t(140),fe=t(245),Oe=function(e){var n=e.onEdit,t=e.onDelete,r=e.onResetProgress,a=c.a.useState(null),i=Object(u.a)(a,2),o=i[0],s=i[1],l=function(){s(null)};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(be.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:l,children:[Object(F.jsx)(fe.a,{onClick:function(){n(),l()},children:"Edit"}),Object(F.jsx)(fe.a,{onClick:function(){r(),l()},children:"Reset progress"}),Object(F.jsx)(fe.a,{onClick:function(){t(),l()},children:"Delete"})]}),Object(F.jsx)(D.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:Object(F.jsx)(je.a,{})})]})},ge=function(e){var n=e.cardsGroup,t=e.onClickItem,r=e.onEditItem,a=e.onDeleteItem,c=e.onResetProgress;return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(K.a,{button:!0,children:[Object(F.jsx)(se.a,{onClick:function(){return t(n.id)},children:Object(F.jsx)(pe,{percent:n.percentRepeatedCards||0})}),Object(F.jsx)(ue.a,{onClick:function(){return t(n.id)},primary:n.nameCardsGroup,secondary:"Last repeating date: "+Object(oe.a)(n.dateRepeating?n.dateRepeating:new Date,re)}),Object(F.jsx)(se.a,{children:Object(F.jsx)(Oe,{onEdit:function(){return r(n.id)},onDelete:function(){return a(n.id)},onResetProgress:function(){return c(n.id)}})})]},n.id)})},Ce=(t(172),t(261)),ve=t(135),me=t.n(ve),xe=(t(173),function(e){var n=e.onClick;return Object(F.jsx)(Ce.a,{size:"medium",color:"secondary","aria-label":"add",className:"add-button",onClick:n,children:Object(F.jsx)(me.a,{})})}),ke=function(e){var n=e.cardsGroups,t=e.onClickItem,r=e.onEditItem,a=e.onDeleteItem,c=e.onOpenEditor,i=e.onResetProgress;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(_.a,{component:"nav","aria-label":"contacts",className:"cards-groups",children:n.map((function(e){return Object(F.jsx)(ge,{cardsGroup:e,onClickItem:t,onEditItem:r,onDeleteItem:a,onResetProgress:i},e.id)}))}),Object(F.jsx)(xe,{onClick:c})]})},Se=function(e){var n=Object(a.useRef)({isFirstRun:!1});Object(a.useEffect)((function(){return n.current.isFirstRun||(e(),n.current.isFirstRun=!0),function(){n.current.isFirstRun=!1}}),[])},De=t(24),we=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1];return Object(a.useEffect)((function(){return function(){t.forEach((function(e){e.closed||e.unsubscribe()})),r([])}}),[]),{setSubscription:function(e){r([].concat(Object(De.a)(t),[e]))}}},Ie=function(e){var n=e.cardsGroupsListService,t=e.confirmDialogService,r=Object(a.useState)({cardsGroups:[]}),c=Object(u.a)(r,2),i=c[0],o=c[1],s=Object(d.g)();M(n.groupsListChannel,(function(e){o({cardsGroups:e})})),M(n.groupDeleteChannel,(function(){n.groupsListChannel.next("")})),M(n.resetProgressChannel,(function(){n.groupsListChannel.next("")})),Se((function(){n.groupsListChannel.next("")}));var l=we().setSubscription;return Object(F.jsx)(ke,{onClickItem:function(e){s.push({pathname:O.path,state:{cardsGroupID:e}})},onOpenEditor:function(){s.push({pathname:m.path})},onDeleteItem:function(e){var r=t.confirmationChannel.subscribe((function(r){r&&n.groupDeleteChannel.next(e),t.openDialogChannel.next({isOpen:!1,message:""})}));l(r),t.openDialogChannel.next({isOpen:!0,message:"Do you want to remove this group?"})},onEditItem:function(e){s.push({pathname:m.path,state:{cardsGroupID:e}})},onResetProgress:function(e){var r=t.confirmationChannel.subscribe((function(r){r&&n.resetProgressChannel.next(e),t.openDialogChannel.next({isOpen:!1,message:""})}));l(r),t.openDialogChannel.next({isOpen:!0,message:"Do you want to reset progress of this group?"})},cardsGroups:i.cardsGroups})},Ge=t(136),Be=t.n(Ge),ye=(t(174),function(e){var n=e.onSuccess,t=e.onFailure,r=e.height,a=e.width;return Object(F.jsx)("div",{className:"google-auth",style:{height:r,width:a},children:Object(F.jsx)(Be.a,{className:"google-auth_button",clientId:"627973926597-tj2la0mnorvm04cqmcosu2nj3b02g6k2.apps.googleusercontent.com",buttonText:"Login",onSuccess:n,onFailure:t,scope:"profile email https://www.googleapis.com/auth/drive"})})}),Fe=function(e){var n=e.googleAuthService,t=e.errorService,r=Object(d.g)();M(n.loginChannel,(function(){r.replace(b.path)}));var c=a.useContext(gn),i=c.height,o=c.width;return Object(F.jsx)(ye,{onSuccess:function(e){n.loginChannel.next(e.accessToken)},onFailure:function(){t.errorChannel.next("Error of connection")},height:i,width:o})},Ee=function(e){var n=e.backupID,t=e.onLoad,r=e.onDelete,a=c.a.useState(null),i=Object(u.a)(a,2),o=i[0],s=i[1];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(be.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:function(){s(null)},children:[Object(F.jsx)(fe.a,{onClick:function(){s(null),t(n)},children:"Load"}),Object(F.jsx)(fe.a,{onClick:function(){s(null),r(n)},children:"Delete"})]}),Object(F.jsx)(D.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:Object(F.jsx)(je.a,{})})]})},Re=function(e){var n=e.backupName,t=e.backupID,r=e.onLoad,a=e.onDelete;return Object(F.jsxs)(K.a,{children:[Object(F.jsx)(ue.a,{primary:n}),Object(F.jsx)(se.a,{children:Object(F.jsx)(Ee,{backupID:t,onLoad:r,onDelete:a})})]})},Te=function(e){var n=e.backupsFiles,t=e.onLoad,r=e.onCreate,a=e.onDelete;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(_.a,{children:n.map((function(e){return Object(F.jsx)(Re,{backupName:e.createdTime,onLoad:t,onDelete:a,backupID:e.id},e.id)}))}),Object(F.jsx)(xe,{onClick:r})]})},Ne=function(e){var n=e.spinnerService,t=e.googleBackupsService,r=e.confirmDialogService,c=Object(d.g)(),i=Object(a.useState)({backupsFiles:[]}),o=Object(u.a)(i,2),l=o[0],p=o[1];M(t.backupsNameLoadChannel,(function(e){p(Object(s.a)(Object(s.a)({},l),{},{backupsFiles:e})),n.spinnerCounterChannel.next(-1)}),(function(){n.spinnerCounterChannel.next(-1),c.replace(j.path)})),M(t.backupLoadChannel,(function(){n.spinnerCounterChannel.next(-1)}),(function(){n.spinnerCounterChannel.next(-1),c.replace(j.path)})),M(t.backupDeleteChannel,(function(){n.spinnerCounterChannel.next(-1)})),M(t.backupUploadChannel,(function(){n.spinnerCounterChannel.next(-1)})),Se((function(){t.backupsNameLoadChannel.next("")}));var h=we().setSubscription;return Object(F.jsx)(Te,{backupsFiles:l.backupsFiles,onLoad:function(e){n.spinnerCounterChannel.next(1),t.backupLoadChannel.next(e)},onDelete:function(e){t.backupLoadChannel.next(e);var a=r.confirmationChannel.subscribe((function(a){a&&(n.spinnerCounterChannel.next(1),t.backupDeleteChannel.next(e)),r.openDialogChannel.next({isOpen:!1,message:""})}));h(a),r.openDialogChannel.next({isOpen:!0,message:"Do you want to delete this backup?"})},onCreate:function(){n.spinnerCounterChannel.next(1),t.backupUploadChannel.next()}})},Pe=t(137),Le=t.n(Pe);!function(e){e[e.TO_DO=0]="TO_DO",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.DONE=2]="DONE"}(r||(r={}));var Ae=function(e){var n=e.card,t=e.onEditItem,a=e.onDeleteItem,c=e.onResetProgress,i=e.onClickItem;return Object(F.jsxs)(K.a,{button:!0,children:[Object(F.jsx)(se.a,{onClick:function(){return i(n.id)},children:Object(F.jsx)(Le.a,{style:{color:function(e){return e.rangeOfKnowledge===r.DONE?"green":e.rangeOfKnowledge===r.IN_PROGRESS?"yellow":"red"}(n)}})}),Object(F.jsx)(ue.a,{onClick:function(){return i(n.id)},primary:n.question,secondary:"Last repeating date: "+Object(oe.a)(n.dateRepeating?n.dateRepeating:new Date,re)}),Object(F.jsx)(se.a,{children:Object(F.jsx)(Oe,{onEdit:function(){return t(n.id)},onDelete:function(){return a(n.id)},onResetProgress:function(){return c(n.id)}})})]},n.id)},_e=(t(175),function(e){var n=e.cards,t=e.onOpenEditor,r=e.onEditItem,a=e.onDeleteItem,c=e.onResetProgress,i=e.onClickItem;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(_.a,{className:"cards",children:n.map((function(e){return Object(F.jsx)(Ae,{card:e,onEditItem:r,onDeleteItem:a,onResetProgress:c,onClickItem:i},e.id)}))}),Object(F.jsx)(xe,{onClick:t})]})}),Ke=function(e){var n=e.cardsListService,t=e.confirmDialogService,r=Object(d.h)(),c=Object(d.g)(),i=Object(a.useState)({cards:[]}),o=Object(u.a)(i,2),s=o[0],l=o[1];M(n.cardsChannel,(function(e){l({cards:e})})),M(n.resetCardProgressChannel,(function(e){n.cardsChannel.next(r.state.cardsGroupID)})),M(n.deleteCardChannel,(function(e){n.cardsChannel.next(r.state.cardsGroupID)})),Se((function(){n.cardsChannel.next(r.state.cardsGroupID)}));var p=we().setSubscription;return Object(F.jsx)(_e,{cards:s.cards,onOpenEditor:function(){c.push({pathname:C.path,state:{cardsGroupID:r.state.cardsGroupID}})},onEditItem:function(e){c.push({pathname:C.path,state:{cardsGroupID:r.state.cardsGroupID,cardID:e}})},onDeleteItem:function(e){var a=t.confirmationChannel.subscribe((function(a){a&&n.deleteCardChannel.next({cardID:e,cardsGroupID:r.state.cardsGroupID}),t.openDialogChannel.next({isOpen:!1,message:""})}));p(a),t.openDialogChannel.next({isOpen:!0,message:"Do you want to remove this card?"})},onResetProgress:function(e){n.resetCardProgressChannel.next({cardID:e,cardsGroupID:r.state.cardsGroupID})},onClickItem:function(e){c.push({pathname:g.path,state:{cardsGroupID:r.state.cardsGroupID,cardID:e}})}})},qe=t(262),ze=t(263),Me=t(264),Ue=t(138),Qe=t.n(Ue),Ve=function(e){var n=e.statistic;return Object(F.jsxs)("div",{children:[Object(F.jsx)(Y.a,{size:"small",children:Object(F.jsxs)("span",{style:{color:"red"},children:["To Do: ",n.todo]})}),Object(F.jsx)(Y.a,{size:"small",children:Object(F.jsxs)("span",{style:{color:"orange"},children:["In progress: ",n.inProgress]})}),Object(F.jsx)(Y.a,{size:"small",children:Object(F.jsxs)("span",{style:{color:"green"},children:["Completed: ",n.done]})})]})},Je=function(e){var n=e.text,t=e.height,r=e.onClickText;return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(w.a,{color:"textSecondary",gutterBottom:!0,onClick:r,style:{paddingTop:0,height:t,overflow:"auto",whiteSpace:"pre-wrap"},children:Object(F.jsx)(_.a,{style:{paddingTop:0},children:n})})})},He=(t(176),function(e){var n=e.card,t=e.answerCardHeight,a=e.isQuestionSide,c=e.onClickCard,i=e.onClick,o=e.statistic,s=e.onEditCard,u=e.onBackClick;return n?Object(F.jsxs)("div",{className:"cards-repeater",children:[Object(F.jsx)(Ve,{statistic:o}),Object(F.jsxs)("div",{className:"cards-repeater_title",children:[Object(F.jsx)(w.a,{gutterBottom:!0,variant:"h5",component:"h2",children:a?"Question":"Answer"}),Object(F.jsx)(D.a,{color:"inherit",onClick:s,children:Object(F.jsx)(Qe.a,{})})]}),a?Object(F.jsx)(qe.a,{children:Object(F.jsx)(ze.a,{onClick:c,style:{height:t},children:Object(F.jsx)(w.a,{color:"textSecondary",gutterBottom:!0,children:n.question})})}):Object(F.jsx)(qe.a,{className:"cards-repeater",children:Object(F.jsxs)(ze.a,{style:{height:t},children:[Object(F.jsx)(Je,{height:t-20,text:n.answer,onClickText:function(){return c()}}),n.rangeOfKnowledge!==r.DONE?Object(F.jsxs)(Me.a,{className:"cards-repeater_buttons-container",children:[Object(F.jsx)(Y.a,{size:"small",color:"primary",onClick:function(){return i(!0)},children:"Yes"}),Object(F.jsx)(Y.a,{size:"small",color:"primary",onClick:function(){return i(!1)},children:"No"})]}):Object(F.jsx)("div",{children:"Repeated"})]})})]}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("span",{children:"All cards repeated"}),Object(F.jsx)(Y.a,{size:"small",color:"primary",onClick:u,children:"Go back"})]})}),We=function(e){var n=e.cardsRepeaterService,t=Object(d.h)(),r=Object(d.g)(),c=Object(a.useState)({card:void 0,isQuestionSide:!0}),i=Object(u.a)(c,2),o=i[0],l=i[1],p=Object(a.useState)({inProgress:0,todo:0,done:0}),h=Object(u.a)(p,2),j=h[0],b=h[1];M(n.cardChannel,(function(e){l({card:e,isQuestionSide:!0}),n.statisticChannel.next("")})),M(n.currentCardChannel,(function(e){e?l({card:e,isQuestionSide:!0}):n.cardChannel.next({cardsGroupID:t.state.cardsGroupID,cardID:t.state.cardID})})),M(n.statisticChannel,(function(e){b((function(){return e}))})),M(n.repeatingResultChannel,(function(){n.cardChannel.next({cardsGroupID:t.state.cardsGroupID,cardID:t.state.cardID})})),Se((function(){n.currentCardChannel.next(t.state.cardsGroupID),n.statisticChannel.next("")}));var O=Object(a.useContext)(gn);return Object(F.jsx)(He,{answerCardHeight:O.height-220,isQuestionSide:o.isQuestionSide,onClickCard:function(){l(Object(s.a)(Object(s.a)({},o),{},{isQuestionSide:!o.isQuestionSide}))},onClick:function(e){o.card?n.repeatingResultChannel.next({isKnown:e,cardID:o.card.id,cardsGroupID:t.state.cardsGroupID}):l({card:void 0,isQuestionSide:!1})},card:o.card,statistic:j,onEditCard:function(){o.card&&r.push({pathname:C.path,state:{cardsGroupID:t.state.cardsGroupID,cardID:o.card.id}})},onBackClick:function(){r.replace(f.path)}})},Ye=function(e){var n=e.localBackupsService,t=e.confirmDialogService,r=e.spinnerService,c=Object(a.useRef)(null);M(n.localBackupChannel),M(n.loadBackupChannel,(function(){r.spinnerCounterChannel.next(-1)}));var i=we().setSubscription;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("input",{type:"file",onChange:function(e){var a=e.target.files[0];if(a){var c=new FileReader;c.onload=function(e){var a=e.target.result,c=t.confirmationChannel.subscribe((function(e){e&&(r.spinnerCounterChannel.next(1),n.loadBackupChannel.next(a)),t.openDialogChannel.next({isOpen:!1,message:""})}));i(c),t.openDialogChannel.next({isOpen:!0,message:"Do you want to load this backup, your current changes could be removed?"})},c.readAsText(a)}}}),Object(F.jsx)("a",{ref:c}),Object(F.jsx)(Y.a,{size:"small",onClick:function(){return n.localBackupChannel.next()},children:"Save"})]})},Xe=t(235),Ze=(t(177),function(e){var n=e.groupName,t=e.onChangeGroupName,r=e.onSaveGroup;return Object(F.jsxs)("div",{className:"group-editor",children:[Object(F.jsx)(Xe.a,{className:"group-editor_text",required:!0,id:"outlined-required",label:"Group name",onChange:function(e){t(e.target.value)},value:n,variant:"filled"}),Object(F.jsx)(Y.a,{variant:"outlined",className:"group-editor_button",size:"small",onClick:function(){return r()},children:"Save"})]})}),$e=function(e){var n=e.cardsGroupsEditorService,t=Object(d.h)(),r=Object(d.g)(),c=Object(a.useState)({cardsGroup:{cards:[],nameCardsGroup:"",dateRepeating:(new Date).getTime(),id:(new Date).getTime(),percentRepeatedCards:0}}),i=Object(u.a)(c,2),o=i[0],l=i[1];M(n.groupEditingChannel),M(n.groupChannel,(function(e){l({cardsGroup:e})})),Se((function(){var e=t.state?t.state.cardsGroupID:-1;n.groupChannel.next(e)}));return Object(F.jsx)(Ze,{groupName:o.cardsGroup.nameCardsGroup,onChangeGroupName:function(e){l({cardsGroup:Object(s.a)(Object(s.a)({},o.cardsGroup),{},{nameCardsGroup:e})})},onSaveGroup:function(){n.groupEditingChannel.next(o.cardsGroup),r.goBack()}})},en=t(239),nn=(t(178),function(e){var n=e.answer,t=e.question,r=e.onChangeAnswer,a=e.onChangeQuestion,c=e.onSaveCard,i=e.cardsGroups,o=e.currentCardsGroup,s=e.onChangeCardsGroup;return Object(F.jsxs)("div",{className:"cards-editor",children:[Object(F.jsx)(Xe.a,{className:"cards-editor_text",required:!0,id:"outlined-required",label:"Question",multiline:!0,onChange:function(e){a(e.target.value)},value:t,variant:"filled"}),Object(F.jsx)(Xe.a,{className:"cards-editor_text",required:!0,id:"outlined-required",label:"Answer",multiline:!0,onChange:function(e){r(e.target.value)},value:n,variant:"filled"}),Object(F.jsx)(en.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",className:"cards-editor_text",value:o.id.toString(),label:o.nameCardsGroup,onChange:function(e){s(Number(e.target.value))},autoWidth:!0,children:i.map((function(e){return Object(F.jsx)(fe.a,{value:e.id.toString(),children:e.nameCardsGroup},e.id)}))}),Object(F.jsx)(Y.a,{variant:"outlined",className:"group-editor_button",size:"small",onClick:function(){return c()},children:"Save"})]})}),tn=function(e){var n=e.cardsEditorService,t=Object(d.h)(),c=Object(d.g)(),i=Object(a.useState)({card:{rangeOfKnowledge:r.IN_PROGRESS,answer:"",question:"",dateRepeating:0,id:(new Date).getTime()},currentCardsGroup:{id:0,nameCardsGroup:""},cardsGroups:[]}),o=Object(u.a)(i,2),l=o[0],p=o[1];M(n.cardEditingChannel),M(n.simplifiedCardsGroupsChannel,(function(e){var n=e.currentCardsGroup,t=e.cardsGroups;p(n?function(e){return Object(s.a)(Object(s.a)({},e),{},{cardsGroups:t,currentCardsGroup:n})}:function(e){return Object(s.a)(Object(s.a)({},e),{},{currentCardsGroup:l.currentCardsGroup,cardsGroups:t})})})),M(n.cardChannel,(function(e){e&&p(Object(s.a)(Object(s.a)({},l),{},{card:e}))})),Se((function(){var e=t.state?t.state.cardsGroupID:-1,r=t.state?t.state.cardID:-1;n.cardChannel.next({cardID:r,cardsGroupID:e}),n.simplifiedCardsGroupsChannel.next(e)}));return Object(F.jsx)(nn,{question:l.card.question,answer:l.card.answer,onChangeQuestion:function(e){p({card:Object(s.a)(Object(s.a)({},l.card),{},{question:e}),currentCardsGroup:l.currentCardsGroup,cardsGroups:l.cardsGroups})},onChangeAnswer:function(e){p({card:Object(s.a)(Object(s.a)({},l.card),{},{answer:e}),currentCardsGroup:l.currentCardsGroup,cardsGroups:l.cardsGroups})},onSaveCard:function(){n.cardEditingChannel.next({card:l.card,cardsGroupID:l.currentCardsGroup.id}),c.goBack()},currentCardsGroup:l.currentCardsGroup,cardsGroups:l.cardsGroups,onChangeCardsGroup:function(e){n.simplifiedCardsGroupsChannel.next(e)}})},rn=function(e){var n=e.cardsGroupsListService,t=e.cardsGroupsEditorService,r=e.errorService,a=e.googleAuthService,c=e.googleBackupsService,i=e.spinnerService,o=e.confirmDialogService,s=e.cardsEditorService,u=e.cardsListService,l=e.cardsRepeaterService,p=e.localBackupsService;return Object(F.jsxs)(d.d,{children:[Object(F.jsx)(d.a,{exact:!0,from:"/",to:f.path}),Object(F.jsx)(d.b,{path:f.path,children:Object(F.jsx)(Ie,{cardsGroupsListService:n,confirmDialogService:o})}),Object(F.jsx)(d.b,{path:j.path,children:Object(F.jsx)(Fe,{googleAuthService:a,errorService:r})}),Object(F.jsx)(d.b,{path:b.path,children:Object(F.jsx)(Ne,{googleBackupsService:c,spinnerService:i,confirmDialogService:o})}),Object(F.jsx)(d.b,{path:O.path,children:Object(F.jsx)(Ke,{cardsListService:u,confirmDialogService:o})}),Object(F.jsx)(d.b,{path:g.path,children:Object(F.jsx)(We,{cardsRepeaterService:l})}),Object(F.jsx)(d.b,{path:v.path,children:Object(F.jsx)(Ye,{localBackupsService:p,confirmDialogService:o,spinnerService:i})}),Object(F.jsx)(d.b,{path:m.path,children:Object(F.jsx)($e,{cardsGroupsEditorService:t})}),Object(F.jsx)(d.b,{path:C.path,children:Object(F.jsx)(tn,{cardsEditorService:s})})]})},an=t(233),cn=t(234),on=t(242),sn=function(){function e(n){var t=this;Object(p.a)(this,e),this.storageService=n,this.backupsNameLoadChannel=void 0,this.backupLoadChannel=void 0,this.backupUploadChannel=void 0,this.backupDeleteChannel=void 0,this.backupFileName="my-cards.json",this.backupFolderName="my-cards",this.googleDriveFilesAPI="https://www.googleapis.com/drive/v3/files/",this.googleDriveUploadAPI="https://www.googleapis.com/upload/drive/v3/files/",this.searchFilesURI=this.googleDriveFilesAPI+"?fields=files(id,createdTime)&q=name%20contains%20",this.searchFolderURI=this.googleDriveFilesAPI+"?q=name%20contains%20",this.getFilesAdditionalPartURI="?alt=media",this.googleDriveFolderType="application/vnd.google-apps.folder",this.backupsNameLoadChannel=new N((function(){return Object(R.a)("").pipe(Object(cn.a)((function(){return n.getAuthToken()})),Object(cn.a)((function(e){return t.getBackupFiles(e)})),Object(ie.a)((function(e){return e.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{createdTime:e.createdTime.slice(0,10)})}))})))})),this.backupLoadChannel=new N((function(e){return Object(R.a)("").pipe(Object(cn.a)((function(){return t.loadBackupFile(e)})))})),this.backupUploadChannel=new N((function(){return Object(R.a)("").pipe(Object(cn.a)((function(){return n.getAuthToken()})),Object(cn.a)((function(e){return t.createNewBackup(e)})))})),this.backupDeleteChannel=new N((function(e){return Object(R.a)("").pipe(Object(cn.a)((function(){return t.deleteBackupFile(e)})),Object(an.a)((function(){t.backupsNameLoadChannel.next("")})))}))}return Object(h.a)(e,[{key:"createNewBackup",value:function(e){var n=this;return this.getBackupFolder(e).pipe(Object(cn.a)((function(t){if(t){var r=t.find((function(e){return e.mimeType===n.googleDriveFolderType}));return r?Object(R.a)(r.id):n.createBackupFolder(e)}return n.createBackupFolder(e)})),Object(cn.a)((function(t){return n.createNewBackupFile(e,t)})),Object(cn.a)((function(t){return n.uploadBackupFile(e,t)})),Object(an.a)((function(){n.backupsNameLoadChannel.next("")})))}},{key:"getBackupFiles",value:function(e){return Object(on.a)({url:"".concat(this.searchFilesURI,"'").concat(this.backupFileName,"'"),headers:{Authorization:"Bearer "+e},method:"GET"}).pipe(Object(ie.a)((function(e){return e.response.files})))}},{key:"loadBackupFile",value:function(e){var n=this;return Object(R.a)("").pipe(Object(cn.a)((function(){return n.storageService.getAuthToken()})),Object(cn.a)((function(t){return Object(on.a)({url:n.googleDriveFilesAPI+e+n.getFilesAdditionalPartURI,headers:{Authorization:"Bearer "+t},method:"GET"})})),Object(ie.a)((function(e){return n.storageService.setBackupToStorage(e.response),e.response})))}},{key:"getBackupFolder",value:function(e){return Object(on.a)({url:"".concat(this.searchFolderURI,"'").concat(this.backupFolderName,"'"),headers:{Authorization:"Bearer "+e},method:"GET"}).pipe(Object(ie.a)((function(e){return e.response.files})))}},{key:"deleteBackupFile",value:function(e){var n=this;return Object(R.a)("").pipe(Object(cn.a)((function(){return n.storageService.getAuthToken()})),Object(cn.a)((function(t){return Object(on.a)({url:n.googleDriveFilesAPI+e,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},method:"DELETE"})})))}},{key:"createNewBackupFile",value:function(e,n){return Object(on.a)({url:this.googleDriveFilesAPI,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:{parents:[n],name:this.backupFileName},method:"POST"}).pipe(Object(ie.a)((function(e){return e.response.id})))}},{key:"createBackupFolder",value:function(e){return Object(on.a)({url:this.googleDriveFilesAPI,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:{name:this.backupFolderName,mimeType:"application/vnd.google-apps.folder"},method:"POST"}).pipe(Object(ie.a)((function(e){return e.response.id})))}},{key:"uploadBackupFile",value:function(e,n){var t=this;return Object(R.a)("").pipe(Object(cn.a)((function(){return t.storageService.getBackupFromStorage()})),Object(cn.a)((function(r){return Object(on.a)({url:t.googleDriveUploadAPI+n,headers:{Authorization:"Bearer "+e},body:JSON.stringify(r,null,4),responseType:"text",method:"PATCH"}).pipe(Object(ie.a)((function(){return n})))})))}}]),e}(),un=t(42),ln=t.n(un),dn=t(61),pn=t(103),hn=function(){function e(n){var t=this;Object(p.a)(this,e),this.dataBaseService=n,this.cardsStorageID="cards-local-storage",this.authTokenLocalStorageID="auth-token",this.getBackupFromStorage=function(){return Object(pn.a)(t.getBackupFromDataBase())},this.getBackupFromDataBase=Object(dn.a)(ln.a.mark((function e(){var n;return ln.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,t.dataBaseService.get(t.cardsStorageID);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",n);case 11:if(!n){e.next=15;break}return e.abrupt("return",n);case 15:return e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,7]])}))),this.setBackupToDataBase=function(){var e=Object(dn.a)(ln.a.mark((function e(n){return ln.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.dataBaseService.set(t.cardsStorageID,n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(n){return e.apply(this,arguments)}}()}return Object(h.a)(e,[{key:"setBackupToStorage",value:function(e){return Object(pn.a)(this.setBackupToDataBase(e))}},{key:"getAuthToken",value:function(){var e=this;return Object(pn.a)(new Promise((function(n,t){var r=localStorage.getItem(e.authTokenLocalStorageID);r?n(r):t("Auth token is empty")})))}},{key:"setAuthToken",value:function(e){var n=this;return Object(pn.a)(new Promise((function(t){localStorage.setItem(n.authTokenLocalStorageID,e),t(e)})))}}]),e}(),jn=function(){function e(n){var t=this;Object(p.a)(this,e),this.storageService=n,this.cardsChannel=void 0,this.resetCardProgressChannel=void 0,this.deleteCardChannel=void 0,this.cardsChannel=new N((function(e){return Object(R.a)("").pipe(Object(cn.a)((function(){return t.getCards(e)})))})),this.resetCardProgressChannel=new N((function(e){var t=e.cardID,a=e.cardsGroupID;return n.getBackupFromStorage().pipe(Object(ie.a)((function(e){var n=e.findIndex((function(e){return a===e.id})),c=-1;return n>=0&&(c=e[n].cards.findIndex((function(e){return t===e.id}))),n>=0&&c>=0&&(e[n].cards[c].rangeOfKnowledge=r.TO_DO),e})),Object(an.a)((function(e){n.setBackupToStorage(e)})))})),this.deleteCardChannel=new N((function(e){var t=e.cardID,r=e.cardsGroupID;return n.getBackupFromStorage().pipe(Object(ie.a)((function(e){var n=e.findIndex((function(e){return r===e.id})),a=-1;return n>=0&&(a=e[n].cards.findIndex((function(e){return t===e.id}))),n>=0&&a>=0&&(e[n].cards=e[n].cards.filter((function(e){return e.id!==t}))),e})),Object(an.a)((function(e){n.setBackupToStorage(e)})))}))}return Object(h.a)(e,[{key:"getCards",value:function(e){var n=this;return Object(R.a)("").pipe(Object(cn.a)((function(){return n.storageService.getBackupFromStorage()})),Object(ie.a)((function(n){var t=n.find((function(n){return n.id===e}));return t?t.cards:[]})))}}]),e}(),bn=function(){function e(n){var t=this;Object(p.a)(this,e),this.storageService=n,this.currentCardChannel=void 0,this.cardChannel=void 0,this.repeatingResultChannel=void 0,this.statisticChannel=void 0,this.statisticValue={inProgress:0,todo:0,done:0},this.currentCardID=0,this.writeRangeOfKnowledge=function(e){return Object(R.a)("").pipe(Object(cn.a)((function(){return t.storageService.getBackupFromStorage()})),Object(ie.a)((function(n){return n.forEach((function(n){e.cardsGroupID&&n.id!==e.cardsGroupID||n.cards.forEach((function(n){e.cardID&&n.id!==e.cardID||(e.isKnown&&n.rangeOfKnowledge===r.IN_PROGRESS||e.isKnown&&n.rangeOfKnowledge===r.TO_DO?n.rangeOfKnowledge=r.DONE:e.isKnown||n.rangeOfKnowledge!==r.TO_DO||(n.rangeOfKnowledge=r.IN_PROGRESS))}))})),n})),Object(cn.a)((function(e){return t.storageService.setBackupToStorage(e)})))},this.cardChannel=new N((function(e){var n=e.cardsGroupID,r=e.cardID;return Object(R.a)("").pipe(Object(cn.a)((function(){return t.getCards(n,r)})),Object(ie.a)((function(e){return t.getCardForRepeating(e)})))})),this.repeatingResultChannel=new N((function(e){return t.writeRangeOfKnowledge(e)})),this.currentCardChannel=new N((function(e){return Object(R.a)("").pipe(Object(cn.a)((function(){return t.getCards(e,t.currentCardID)})),Object(ie.a)((function(e){return 1===e.length?e[0]:null})))})),this.statisticChannel=new N((function(){return Object(R.a)(t.statisticValue)}))}return Object(h.a)(e,[{key:"getCards",value:function(e,n){return this.storageService.getBackupFromStorage().pipe(Object(ie.a)((function(t){var r=t.find((function(n){return!e||n.id===e})),a=[];if(r&&(a=r.cards,n)){var c=a.find((function(e){return e.id===n}));c&&(a=[]).push(c)}return a})))}},{key:"getCardForRepeating",value:function(e){var n=e.find((function(e){return e.rangeOfKnowledge===r.TO_DO}));return n||(n=e.find((function(e){return e.rangeOfKnowledge===r.IN_PROGRESS}))),1===e.length&&(n=e[0]),this.updateStatistic(e),n&&(this.currentCardID=n.id),n}},{key:"updateStatistic",value:function(e){var n=this;this.statisticValue={inProgress:0,todo:0,done:0},e.forEach((function(e){e.rangeOfKnowledge===r.IN_PROGRESS?n.statisticValue.inProgress=n.statisticValue.inProgress+1:e.rangeOfKnowledge===r.TO_DO?n.statisticValue.todo=n.statisticValue.todo+1:n.statisticValue.done=n.statisticValue.done+1}))}}]),e}(),fn=function(){function e(n){var t=this;Object(p.a)(this,e),this.storageService=n,this.localBackupChannel=void 0,this.loadBackupChannel=void 0,this.localBackupChannel=new N((function(){return Object(R.a)("").pipe(Object(cn.a)((function(){return t.saveFile()})))})),this.loadBackupChannel=new N((function(e){return Object(R.a)("").pipe(Object(cn.a)((function(){return t.storageService.setBackupToStorage(JSON.parse(e))})))}))}return Object(h.a)(e,[{key:"saveFile",value:function(){return this.storageService.getBackupFromStorage().pipe(Object(an.a)((function(e){var n=JSON.stringify(e,null,4),t=new Blob([n],{type:"octet/stream"}),r=window.URL.createObjectURL(t),a=document.createElement("a");a&&(a.href=r,a.download="My Cards.txt",a.click()),window.URL.revokeObjectURL(r)})))}}]),e}(),On=t(141),gn=c.a.createContext(te),Cn=new function e(){Object(p.a)(this,e),this.errorChannel=void 0,this.errorChannel=new N((function(e){return Object(R.a)(e)}))},vn=new function e(){var n=this;Object(p.a)(this,e),this.spinnerCounterChannel=void 0,this.spinnerCounter=0,this.spinnerCounterChannel=new N((function(e){return Object(R.a)("").pipe(Object(ie.a)((function(){return n.spinnerCounter+e>=0&&(n.spinnerCounter=n.spinnerCounter+e),n.spinnerCounter})))}))},mn=new function e(){var n=this;Object(p.a)(this,e),this.openDialogChannel=new N((function(e){return Object(R.a)(e).pipe(Object(an.a)((function(e){e.isOpen||n.confirmationChannel.unsubscribe()})))})),this.confirmationChannel=new N((function(e){return Object(R.a)(e)}))},xn=new hn(new function e(n){var t=this;Object(p.a)(this,e),this.storeName=n,this.dataBase=void 0,this.DATA_BASE_NAME="app-data-base",this.get=function(){var e=Object(dn.a)(ln.a.mark((function e(n){return ln.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dataBase;case 2:return e.abrupt("return",e.sent.get(t.storeName,n));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.set=function(){var e=Object(dn.a)(ln.a.mark((function e(n,r){return ln.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dataBase;case 2:return e.abrupt("return",e.sent.put(t.storeName,r,n));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.dataBase=Object(On.a)(this.DATA_BASE_NAME,1,{upgrade:function(e){e.createObjectStore(n)}})}("cards-store")),kn=new function e(n){Object(p.a)(this,e),this.groupEditingChannel=void 0,this.groupChannel=void 0,this.groupEditingChannel=new N((function(e){return n.getBackupFromStorage().pipe(Object(ie.a)((function(n){var t=n.findIndex((function(n){return e.id===n.id}));return t<0?n.push(e):n[t]=e,n})),Object(an.a)((function(e){n.setBackupToStorage(e)})))})),this.groupChannel=new N((function(e){return n.getBackupFromStorage().pipe(Object(ie.a)((function(n){var t=n.find((function(n){return e===n.id}));return t||(t={cards:[],nameCardsGroup:"",dateRepeating:(new Date).getTime(),id:(new Date).getTime(),percentRepeatedCards:0}),t})))}))}(xn),Sn=new function e(n){Object(p.a)(this,e),this.groupsListChannel=void 0,this.groupDeleteChannel=void 0,this.resetProgressChannel=void 0,this.groupsListChannel=new N((function(){return n.getBackupFromStorage().pipe(Object(ie.a)((function(e){return e.map((function(e){var n=0;return e.cards.forEach((function(e){e.dateRepeating>n&&(n=e.dateRepeating)})),e.dateRepeating=n,e})),e})),Object(ie.a)((function(e){return e.sort((function(e,n){return e.dateRepeating&&n.dateRepeating?n.dateRepeating-e.dateRepeating:0}))})),Object(ie.a)((function(e){return e.map((function(e){var n=0;return e.cards.forEach((function(e){e.rangeOfKnowledge===r.DONE&&n++})),e.percentRepeatedCards=n/e.cards.length*100,e})),e})))})),this.groupDeleteChannel=new N((function(e){return n.getBackupFromStorage().pipe(Object(ie.a)((function(n){return n.filter((function(n){return n.id!==e}))})),Object(an.a)((function(e){return n.setBackupToStorage(e)})))})),this.resetProgressChannel=new N((function(e){return n.getBackupFromStorage().pipe(Object(ie.a)((function(n){var t=n.findIndex((function(n){return e===n.id}));return t<0||(n[t].cards=n[t].cards.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{rangeOfKnowledge:r.TO_DO})}))),n})),Object(an.a)((function(e){return n.setBackupToStorage(e)})))}))}(xn),Dn=new function e(n){Object(p.a)(this,e),this.loginChannel=void 0,this.loginChannel=new N((function(e){return Object(R.a)("").pipe(Object(an.a)((function(){n.setAuthToken(e)})))}))}(xn),wn=new sn(xn),In=new function e(n){Object(p.a)(this,e),this.cardEditingChannel=void 0,this.simplifiedCardsGroupsChannel=void 0,this.cardChannel=void 0,this.cardEditingChannel=new N((function(e){var t=e.card,r=e.cardsGroupID;return n.getBackupFromStorage().pipe(Object(ie.a)((function(e){var n=e.findIndex((function(e){return r===e.id})),a=-1;return n>=0&&(a=e[n].cards.findIndex((function(e){return t.id===e.id}))),n>=0&&a<0?e[n].cards.push(t):n>=0&&a>=0&&(e[n].cards[a]=t),e})),Object(an.a)((function(e){n.setBackupToStorage(e)})),Object(ie.a)((function(){return t})))})),this.cardChannel=new N((function(e){var t=e.cardID,a=e.cardsGroupID;return n.getBackupFromStorage().pipe(Object(ie.a)((function(e){var n=e.find((function(e){return a===e.id})),c={rangeOfKnowledge:r.TO_DO,answer:"",question:"",dateRepeating:0,id:(new Date).getTime()};return n&&(c=n.cards.find((function(e){return e.id===t}))),c})))})),this.simplifiedCardsGroupsChannel=new N((function(e){return n.getBackupFromStorage().pipe(Object(ie.a)((function(e){return e.map((function(e){return{id:e.id,nameCardsGroup:e.nameCardsGroup}}))})),Object(ie.a)((function(n){return{currentCardsGroup:n.find((function(n){return e===n.id})),cardsGroups:n}})))}))}(xn),Gn=new jn(xn),Bn=new bn(xn),yn=new fn(xn);var Fn=function(){var e=Object(a.useState)(te),n=Object(u.a)(e,2),t=n[0],r=n[1];return Object(a.useEffect)((function(){var e=window.screen.height,n=window.screen.width;t.height===e&&t.width===n||r(Object(s.a)(Object(s.a)({},t),{},{height:window.screen.height,width:window.screen.width}))})),Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(gn.Provider,{value:t,children:Object(F.jsx)(l.a,{children:Object(F.jsxs)("div",{children:[Object(F.jsx)(Z,{errorService:Cn}),Object(F.jsx)(L,{}),Object(F.jsx)(U,{}),Object(F.jsx)(ce,{confirmDialogService:mn}),Object(F.jsxs)("div",{className:"page-container",style:{height:t.height,width:t.width},children:[Object(F.jsx)(ne,{spinnerService:vn}),Object(F.jsx)(rn,{cardsGroupsListService:Sn,cardsGroupsEditorService:kn,googleAuthService:Dn,googleBackupsService:wn,errorService:Cn,spinnerService:vn,confirmDialogService:mn,cardsEditorService:In,cardsListService:Gn,cardsRepeaterService:Bn,localBackupsService:yn})]})]})})})})},En=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,267)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),r(e),a(e),c(e),i(e)}))};o.a.render(Object(F.jsx)(c.a.StrictMode,{children:Object(F.jsx)(Fn,{})}),document.getElementById("root")),En()}},[[180,1,2]]]);
//# sourceMappingURL=main.b14f9917.chunk.js.map