(this["webpackJsonpmy-cards-web"]=this["webpackJsonpmy-cards-web"]||[]).push([[0],{187:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},222:function(e,t,n){"use strict";n.r(t);var r,a=n(1),i=n.n(a),c=n(72),o=n.n(c),s=(n(187),n(3)),u=n(14),l=n(109),d=(n(188),n(305)),h=n(307),p=n(308),b=n(97),f=n(150),g=n.n(f),j=(n(189),n(0)),v=function(e){var t=e.pageLabel,n=e.onClick,r=e.cardsCount;return Object(j.jsx)(d.a,{position:"fixed",children:Object(j.jsxs)(h.a,{className:"toolbar",children:[Object(j.jsx)(p.a,{className:"toolbar_menu-icon",edge:"start",color:"inherit","aria-label":"menu",onClick:n,children:Object(j.jsx)(g.a,{})}),Object(j.jsxs)(b.a,{className:"toolbar_label",variant:"h6",children:[t,-1!==r?" (cards count: ".concat(r,")"):""]})]})})},O=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Object(a.useRef)({subscription:null});if(!i.current.subscription||i.current.subscription.closed){var c=e.subscribe(t,n,r);i.current.subscription=c}Object(a.useEffect)((function(){return function(){e.unsubscribe()}}),[e])},C=n(16),S=function(e,t,n){var r,i=Object(C.h)(),c=Object(C.g)(),o=Object(a.useState)(e),s=Object(u.a)(o,2),l=s[0],d=s[1],h=function(){var e=Object(a.useRef)([]);return Object(a.useEffect)((function(){return function(){e.current.forEach((function(e){e.closed||e.unsubscribe()})),e.current=[]}}),[]),{setSubscription:function(t){e.current.push(t)}}}().setSubscription,p={location:i,history:c,services:t,state:l,setState:d,context:Object(a.useContext)(n),setSubscription:h};return{callbackFactory:(r=p,function(e){return function(t){return e(r,t)}}),externalCallbackSettings:p}},m=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){return Object(s.a)(Object(s.a)({},e),{},{label:n})}))},x={empty:"empty"},D=function(e){e.services.navigationPanelService.navigationPanelOpenChannel.next(x)},k={dependenciesMap:{},updateDependency:function(){}},w=Object(a.createContext)(k),I=function(e){var t=e.dependenciesMap,n=e.children,r=Object(a.useRef)(t);return Object(j.jsx)(w.Provider,{value:{dependenciesMap:r.current,updateDependency:function(e,t){r.current[t].dependency=e}},children:n})},y=n(165),E=n(23),R=[],G=function e(t,n){var r,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[];a&&(R=[]),R.push(t);var c=0;if(R.forEach((function(e){e===t&&c++})),c>2)throw Error("There seems to be circular dependency: ".concat(R.join(" -> "),"!"));if(n.dependenciesMap[t]&&!n.dependenciesMap[t].dependency&&n.dependenciesMap[t].dependencyConstructor){var o=n.dependenciesMap[t].dependencyConstructor,s=n.dependenciesMap[t].arguments;i=s?s.map((function(t){return e(t,n,!1)})):[];var u=Object(y.a)(o,Object(E.a)(i));n.updateDependency(u,t),r=u}else{if(!n.dependenciesMap[t]||!n.dependenciesMap[t].dependency)throw Error("There is no any suited dependency with name: ".concat(t,"!"));r=n.dependenciesMap[t].dependency}return r},B=function(e){var t=Object(a.useContext)(w);return Object(a.useMemo)((function(){return G(e,t)}),[])},N=function(e){var t=e.location;e.services.toolbarService.cardsCountInGroupChannel.next({path:t.pathname,cardsGroupsId:t.state?t.state.cardsGroupID:-1})},T={label:"",cardsCount:-1},P=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t((function(e){return Object(s.a)(Object(s.a)({},e),{},{cardsCount:n})}))},L=function(e){var t=e.location;e.services.toolbarService.pageLabelChannel.next({path:t.pathname,cardsGroupsId:t.state?t.state.cardsGroupID:-1})};!function(e){e[e.GoogleAuthService=0]="GoogleAuthService",e[e.ErrorService=1]="ErrorService",e[e.CardsEditorService=2]="CardsEditorService",e[e.LocalBackupsService=3]="LocalBackupsService",e[e.SpinnerService=4]="SpinnerService",e[e.ConfirmDialogService=5]="ConfirmDialogService",e[e.StorageService=6]="StorageService",e[e.DataBaseService=7]="DataBaseService",e[e.SelectionDialogService=8]="SelectionDialogService",e[e.NavigationPanelService=9]="NavigationPanelService",e[e.ToolbarService=10]="ToolbarService",e[e.VoiceService=11]="VoiceService",e[e.CardsGroupsEditorService=12]="CardsGroupsEditorService",e[e.CardsGroupsListService=13]="CardsGroupsListService",e[e.GoogleBackupsService=14]="GoogleBackupsService",e[e.CardsService=15]="CardsService",e[e.CardsRepeaterService=16]="CardsRepeaterService",e[e.SettingsService=17]="SettingsService",e[e.CardViewerService=18]="CardViewerService",e[e.StatisticService=19]="StatisticService",e[e.RepeaterListService=20]="RepeaterListService",e[e.RepeaterEditorService=21]="RepeaterEditorService"}(r||(r={}));var A,F=function(){var e=B(r.ToolbarService),t=B(r.NavigationPanelService),n=S(T,{toolbarService:e,navigationPanelService:t},fc),i=n.callbackFactory,c=n.externalCallbackSettings,o=c.state,s=c.location;O(e.pageLabelChannel,i(m)),O(e.cardsCountInGroupChannel,i(P)),Object(a.useEffect)((function(){i(L)(),i(N)()}),[s.pathname]);var u=Object(a.useCallback)(i(D),[]);return Object(j.jsx)(v,{pageLabel:o.label,onClick:u,cardsCount:o.cardsCount})},_=n(285),K=n(309),M={path:"/google-auth",name:"Auth Google"},V={path:"/google-backups",name:"Google Backups"},q={path:"/cards-groups",name:"Cards Groups"},Q={path:"/cards-list",name:"Cards"},U={path:"/cards-repeater",name:"Repeat Card"},z={path:"/cards-editor",name:"Edit Card"},H={path:"/local-backups",name:"Local Backups"},W={path:"/cards-group-editor",name:"Edit Group"},J={path:"/settings",name:"Settings"},Y={path:"/card-viewer",name:"Card Preview"},$={path:"/statistic",name:"Statistic"},X={path:"/repeater-editor",name:"Edit repeater"},Z={path:"/repeater-list",name:"Repeater list"},ee=n(289),te=function(e){var t=e.path,n=e.name,r=e.toggleDrawer;return Object(j.jsx)(ee.a,{button:!0,children:Object(j.jsx)(l.b,{to:t,onClick:r,children:n})})},ne=function(e){var t=e.isOpen,n=e.toggleDrawer;return Object(j.jsx)(_.a,{anchor:"left",open:t,onClose:n,onOpen:n,children:Object(j.jsxs)(K.a,{children:[Object(j.jsx)(te,{path:q.path,name:q.name,toggleDrawer:n}),Object(j.jsx)(te,{path:Z.path,name:Z.name,toggleDrawer:n}),Object(j.jsx)(te,{path:$.path,name:$.name,toggleDrawer:n}),Object(j.jsx)(te,{path:M.path,name:M.name,toggleDrawer:n}),Object(j.jsx)(te,{path:H.path,name:H.name,toggleDrawer:n}),Object(j.jsx)(te,{path:J.path,name:J.name,toggleDrawer:n})]})})},re={isOpen:!1},ae=function(e){(0,e.setState)((function(e){return Object(s.a)(Object(s.a)({},e),{},{isOpen:!0})}))},ie=function(e,t){var n=e.setState,r=t&&t.nativeEvent;(!t||"keydown"!==t.type||"Tab"!==(null===r||void 0===r?void 0:r.key)&&"Shift"!==(null===r||void 0===r?void 0:r.key))&&n((function(e){return Object(s.a)(Object(s.a)({},e),{},{isOpen:!e.isOpen})}))},ce=function(){var e=B(r.NavigationPanelService),t=S(re,{navigationPanelService:e},fc),n=t.callbackFactory,i=t.externalCallbackSettings.state;O(e.navigationPanelOpenChannel,n(ae));var c=Object(a.useCallback)(n(ie),[]);return Object(j.jsx)(ne,{isOpen:i.isOpen,toggleDrawer:c})},oe=n(300),se=n(272),ue=n(301),le=n(302),de=n(303),he=n(304),pe=function(e){var t=e.isOpen,n=e.errorMessage,r=e.handleClose;return Object(j.jsxs)(oe.a,{open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:r,children:[Object(j.jsx)(se.a,{id:"alert-dialog-title",children:"Something went wrong"}),Object(j.jsx)(ue.a,{children:Object(j.jsx)(le.a,{id:"alert-dialog-description",children:n})}),Object(j.jsx)(de.a,{children:Object(j.jsx)(he.a,{color:"primary",onClick:r,children:"Ok"})})]})},be={isOpen:!1,errorMessage:""},fe=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(){return{isOpen:!0,errorMessage:n}}))},ge=function(e){(0,e.setState)((function(){return be}))},je=function(){var e=B(r.ErrorService),t=S(be,{errorService:e},fc),n=t.callbackFactory,i=t.externalCallbackSettings.state;O(e.errorChannel,n(fe));var c=Object(a.useCallback)(n(ge),[]);return Object(j.jsx)(pe,{isOpen:i.isOpen,errorMessage:i.errorMessage,handleClose:c})},ve=n(310),Oe=function(e){return e.isShow?Object(j.jsx)(ve.a,{color:"secondary"}):null},Ce=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t((function(){return 0!==n}))},Se=function(){var e=B(r.SpinnerService),t=S(!1,{spinnerService:e},fc),n=t.callbackFactory,a=t.externalCallbackSettings.state;return O(e.spinnerCounterChannel,n(Ce)),Object(j.jsx)(Oe,{isShow:a})},me=(n(199),function(e){var t=e.titleBackgroundColor,n=void 0===t?"grey":t,r=e.icon,a=void 0===r?null:r;return Object(j.jsx)(se.a,{id:"alert-dialog-title",style:{backgroundColor:n,color:"white"},children:Object(j.jsxs)("div",{className:"dialog-title_value",children:["Warning ",a]})})}),xe=function(e){var t=e.onClickAgree,n=e.onClickDisagree,r=e.isOpen,a=e.message,i=e.onClose,c=e.titleBackgroundColor,o=void 0===c?"grey":c,s=e.icon,u=void 0===s?null:s;return Object(j.jsx)("div",{children:Object(j.jsxs)(oe.a,{open:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:i,children:[Object(j.jsx)(me,{titleBackgroundColor:o,icon:u}),Object(j.jsx)(ue.a,{children:Object(j.jsx)(le.a,{id:"alert-dialog-description",children:a})}),Object(j.jsxs)(de.a,{children:[Object(j.jsx)(he.a,{onClick:n,color:"primary",children:"Disagree"}),Object(j.jsx)(he.a,{onClick:t,color:"primary",autoFocus:!0,children:"Agree"})]})]})})},De={isOpen:!1,message:"",icon:null,titleBackgroundColor:"grey"},ke=function(e){var t=e.setState,n=(e.services.confirmDialogService,arguments.length>1&&void 0!==arguments[1]?arguments[1]:De);t((function(){return Object(s.a)({},n)}))},we=function(e){var t=e.setState,n=e.services.confirmDialogService;t((function(e){return Object(s.a)(Object(s.a)({},e),{},{isOpen:!1,message:""})})),n.confirmationChannel.unsubscribe()},Ie=function(e){e.services.confirmDialogService.confirmationChannel.next(!0)},ye=function(e){e.services.confirmDialogService.confirmationChannel.next(!1)},Ee=function(){var e=B(r.ConfirmDialogService),t=S(De,{confirmDialogService:e},fc),n=t.callbackFactory,i=t.externalCallbackSettings.state;O(e.openDialogChannel,n(ke));var c=Object(a.useCallback)(n(we),[]),o=Object(a.useCallback)(n(Ie),[]),s=Object(a.useCallback)(n(ye),[]);return Object(j.jsx)(xe,{isOpen:i.isOpen,onClickAgree:o,onClickDisagree:s,onClose:c,message:i.message,titleBackgroundColor:i.titleBackgroundColor,icon:i.icon})},Re=n(70),Ge=(n(200),n(311)),Be=n(112),Ne=n.n(Be),Te=(n(201),function(e){var t=e.onClick;return Object(j.jsx)(Ge.a,{size:"medium",color:"secondary","aria-label":"add",className:"add-button",onClick:t,children:Object(j.jsx)(Ne.a,{})})}),Pe=n(123),Le=n(51),Ae=n(66),Fe=n(313),_e=n(312),Ke=function(e){var t=e.percent;return Object(j.jsxs)(_e.a,{position:"relative",display:"inline-flex",children:[Object(j.jsx)(Fe.a,{variant:"determinate",value:t}),Object(j.jsx)(_e.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(j.jsx)(b.a,{variant:"caption",component:"div",color:"textSecondary",children:"".concat(Math.round(t),"%")})})]})},Me=n(113),Ve=n.n(Me),qe=n(164),Qe=n(295),Ue=function(e){var t=e.menuSetup,n=i.a.useState(null),r=Object(u.a)(n,2),a=r[0],c=r[1],o=function(){c(null)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(qe.a,{id:"menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:o,children:t.map((function(e){return Object(j.jsx)(Qe.a,{onClick:(t=e.handler,function(){t(),o()}),children:e.fieldName},e.fieldName);var t}))}),Object(j.jsx)(p.a,{"aria-controls":"menu","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},children:Object(j.jsx)(Ve.a,{})})]})},ze=(n(203),"dd-MM-yyyy"),He=function(e){var t=e.cardsGroup,n=e.onClickItem,r=e.onEditItem,a=e.onDeleteItem,i=e.onResetProgress,c=e.onStartRepeatingDifficultCards,o=[{fieldName:"Start Repeating Difficult Cards",handler:function(){c(t.id)}},{fieldName:"Edit",handler:function(){r(t.id)}},{fieldName:"Delete",handler:function(){a(t.id)}},{fieldName:"Reset progress",handler:function(){i(t.id)}}];return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(ee.a,{button:!0,component:"div",children:[Object(j.jsx)(Le.a,{onClick:function(){return n(t.id)},children:Object(j.jsx)(Ke,{percent:t.percentRepeatedCards||0})}),Object(j.jsx)(Ae.a,{className:"cards-groups-list-item_card-name",onClick:function(){return n(t.id)},primary:t.nameCardsGroup,secondary:"Last repeating date: "+Object(Pe.a)(t.repeatingDate?t.repeatingDate:new Date,ze)}),Object(j.jsx)(Le.a,{children:Object(j.jsx)(Ue,{menuSetup:o})})]},t.id)})},We=n(290),Je=n(314),Ye=n(283),$e=n(317),Xe=n(287),Ze=n(152),et=n.n(Ze),tt=function(e){var t=e.onChangeSearchableText,n=e.filter,r=e.onChangeSorting,a=e.sortVariants;return Object(j.jsxs)(We.a,{children:[Object(j.jsx)(Je.a,{expandIcon:Object(j.jsx)(et.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(j.jsx)(Ye.a,{className:"text-editor",required:!0,id:"outlined-required",placeholder:"Search text",onChange:function(e){t(e.target.value)},value:n.searchableText,style:{marginRight:"20px"},onClick:function(e){e.stopPropagation(),e.preventDefault()}})}),Object(j.jsx)($e.a,{children:Object(j.jsx)(Xe.a,{value:n.sort,label:"Sorting",onChange:function(e){r(e.target.value)},children:a.map((function(e){return Object(j.jsx)(Qe.a,{value:e,children:e},e)}))})})]})};!function(e){e.NONE="\u041d\u0435\u0442 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438",e.QUESTION_ASK="\u041f\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u0443 \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",e.QUESTION_DESK="\u041f\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u0443 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",e.ANSWER_ASK="\u041f\u043e \u043e\u0442\u0432\u0435\u0442\u0443 \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",e.ANSWER_DESK="\u041f\u043e \u043e\u0442\u0432\u0435\u0442\u0443 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",e.NAME_ASK="\u041f\u043e \u0438\u043c\u0435\u043d\u0438 \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",e.NAME_DESK="\u041f\u043e \u0438\u043c\u0435\u043d\u0438 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",e.STATUS_ASK="\u041f\u043e \u0441\u0442\u0441\u0430\u0442\u0443\u0441\u0443 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u043d\u044b\u0435",e.STATUS_DESK="\u041f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0435 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u043d\u044b\u0435",e.DATE_ASK="\u041f\u043e \u0434\u0430\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u044f \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u0435",e.DATE_DESK="\u041f\u043e \u0434\u0430\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u044f \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435",e.PROGRESS_ASK="\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441 \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u0435",e.PROGRESS_DESC="\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441 \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u044f \u043f\u043e\u043d\u0438\u0436\u0435\u043d\u0438\u0435"}(A||(A={}));var nt,rt=function(e){var t=e.cardsGroups,n=e.onClickItem,r=e.onEditItem,a=e.onDeleteItem,i=e.onOpenEditor,c=e.onResetProgress,o=e.onChangeSearchableText,s=e.onChangeSorting,u=e.onStartRepeatingDifficultCards,l=e.filter,d=e.height;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(tt,{filter:l,onChangeSearchableText:o,onChangeSorting:s,sortVariants:[A.NONE,A.DATE_ASK,A.DATE_DESK,A.NAME_ASK,A.NAME_DESK,A.PROGRESS_ASK,A.PROGRESS_DESC]}),Object(j.jsx)(Re.a,{className:"cards-groups",itemData:t,itemSize:55,itemCount:t.length,overscanCount:5,height:d,width:"100%",children:function(e){var i=e.index,o=e.style,s=t[i];return Object(j.jsx)("div",{style:o,children:Object(j.jsx)(He,{cardsGroup:s,onClickItem:n,onEditItem:r,onDeleteItem:a,onResetProgress:c,onStartRepeatingDifficultCards:u},s.id)})}}),Object(j.jsx)(Te,{onClick:i})]})},at=function(e){var t=Object(a.useRef)({isFirstRun:!0});t.current.isFirstRun&&(e(),t.current.isFirstRun=!1)},it=n(153),ct=n.n(it),ot=function(e){var t=e.services,n=e.setSubscription,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=t.confirmDialogService,i=t.cardsGroupsListService,c=a.confirmationChannel.subscribe((function(e){e&&i.resetProgressChannel.next(r),a.openDialogChannel.next(De)}));n(c),a.openDialogChannel.next({isOpen:!0,message:"Do you want to reset progress of this group?",titleBackgroundColor:"green",icon:Object(j.jsx)(ct.a,{})})},st=function(e){var t=e.history,n=e.location,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.push({pathname:W.path,state:Object(s.a)(Object(s.a)({},n.state),{},{cardsGroupID:r})})},ut=n(27),lt=n.n(ut),dt=function(e){e.history,e.location;var t=e.services,n=t.confirmDialogService,r=t.cardsGroupsListService,a=e.setSubscription,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,c=n.confirmationChannel.subscribe((function(e){e&&r.groupDeleteChannel.next(i),n.openDialogChannel.next(De)}));a(c),n.openDialogChannel.next({isOpen:!0,message:"Do you want to remove this group?",icon:Object(j.jsx)(lt.a,{}),titleBackgroundColor:"red"})},ht=function(e){e.history.push({pathname:W.path})},pt=function(e){var t=e.history,n=e.location,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.push({pathname:Q.path,state:Object(s.a)(Object(s.a)({},n.state),{},{cardsGroupID:r})})},bt=function(e){var t=e.services;t.cardsGroupsListService.groupsListChannel.next(x),t.cardsGroupsListService.filterChannel.next(x)},ft=function(e){e.services.cardsGroupsListService.groupsListChannel.next(x)},gt=function(e){e.services.cardsGroupsListService.groupsListChannel.next(x)},jt=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t((function(e){return Object(s.a)(Object(s.a)({},e),{},{cardsGroups:n})}))},vt=function(e){var t=e.services.cardsGroupsListService,n=e.setState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.NONE;n((function(e){var n=Object(s.a)(Object(s.a)({},e.filter),{},{sort:r});return t.changeFilterChannel.next(n),e}))},Ot=function(e){var t=e.services.cardsGroupsListService;t.filterChannel.next(x),t.groupsListChannel.next(x)},Ct={searchableText:"",sort:A.NONE},St=function(e){var t=e.setState,n=(e.services,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ct);t((function(e){return Object(s.a)(Object(s.a)({},e),{},{filter:n})}))},mt=function(e){var t=e.setState,n=e.services.cardsGroupsListService,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){return n.changeFilterChannel.next(Object(s.a)(Object(s.a)({},e.filter),{},{searchableText:r})),e}))},xt={cardsGroups:[],filter:Ct},Dt=function(e){var t=e.services.cardsGroupsListService,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.startRepeatingDifficultCardsChannel.next(n)},kt=function(e){var t=e.history,n=e.location,r=(e.services.cardsGroupsListService,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]);t.push({pathname:U.path,state:Object(s.a)(Object(s.a)({},n.state),{},{cardsIDsForRepeating:r})})},wt=function(){var e=B(r.CardsGroupsListService),t=B(r.ConfirmDialogService),n=S(xt,{cardsGroupsListService:e,confirmDialogService:t},fc),i=n.callbackFactory,c=n.externalCallbackSettings,o=c.state,s=c.context;O(e.groupsListChannel,i(jt)),O(e.groupDeleteChannel,i(gt)),O(e.resetProgressChannel,i(ft)),O(e.changeFilterChannel,i(Ot)),O(e.filterChannel,i(St)),O(e.startRepeatingDifficultCardsChannel,i(kt)),at(i(bt));var u=Object(a.useCallback)(i(pt),[]),l=Object(a.useCallback)(i(ht),[]),d=Object(a.useCallback)(i(dt),[]),h=Object(a.useCallback)(i(st),[]),p=Object(a.useCallback)(i(ot),[]),b=Object(a.useCallback)(i(vt),[]),f=Object(a.useCallback)(i(mt),[]),g=Object(a.useCallback)(i(Dt),[]);return Object(j.jsx)(rt,{onClickItem:u,onOpenEditor:l,onDeleteItem:d,onEditItem:h,onResetProgress:p,onChangeSorting:b,filter:o.filter,onChangeSearchableText:f,onStartRepeatingDifficultCards:g,height:s.height,cardsGroups:o.cardsGroups})},It=n(154),yt=n.n(It),Et=(n(204),function(e){var t=e.onSuccess,n=e.onFailure,r=e.height;return Object(j.jsx)("div",{className:"google-auth",style:{height:r},children:Object(j.jsx)(yt.a,{className:"google-auth_button",clientId:"627973926597-tj2la0mnorvm04cqmcosu2nj3b02g6k2.apps.googleusercontent.com",buttonText:"Login",onSuccess:t,onFailure:n,scope:"profile email https://www.googleapis.com/auth/drive"})})}),Rt=function(e,t){e.services.googleAuthService.loginChannel.next(t.accessToken)},Gt=function(e){e.services.errorService.errorChannel.next("Error of connection")},Bt=function(e){e.history.replace(V.path)},Nt=function(){var e=B(r.GoogleAuthService),t=B(r.ErrorService),n=S(null,{googleAuthService:e,errorService:t},fc),i=n.callbackFactory,c=n.externalCallbackSettings.context;O(e.loginChannel,i(Bt));var o=Object(a.useCallback)(i(Rt),[]),s=Object(a.useCallback)(i(Gt),[]);return Object(j.jsx)(Et,{onSuccess:o,onFailure:s,height:c.height})},Tt=function(e){var t=e.backupID,n=e.onLoad,r=e.onDelete,a=i.a.useState(null),c=Object(u.a)(a,2),o=c[0],s=c[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(qe.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:function(){s(null)},children:[Object(j.jsx)(Qe.a,{onClick:function(){s(null),n(t)},children:"Load"}),Object(j.jsx)(Qe.a,{onClick:function(){s(null),r(t)},children:"Delete"})]}),Object(j.jsx)(p.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:Object(j.jsx)(Ve.a,{})})]})},Pt=function(e){var t=e.backupName,n=e.backupDate,r=e.backupID,a=e.onLoad,i=e.onDelete;return Object(j.jsxs)(ee.a,{children:[Object(j.jsx)(Ae.a,{primary:t,secondary:n}),Object(j.jsx)(Le.a,{children:Object(j.jsx)(Tt,{backupID:r,onLoad:a,onDelete:i})})]})},Lt=function(e){var t=e.backupsFiles,n=e.onLoad,r=e.onCreate,a=e.onDelete;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(K.a,{children:t.map((function(e){return Object(j.jsx)(Pt,{backupName:e.name,backupDate:e.createdTime,onLoad:n,onDelete:a,backupID:e.id},e.id)}))}),Object(j.jsx)(Te,{onClick:r})]})},At=function(e){var t=e.history;e.services.spinnerService.spinnerCounterChannel.next(-1),t.replace(M.path)},Ft=function(e){var t=e.setState,n=e.services.spinnerService,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t((function(e){return Object(s.a)(Object(s.a)({},e),{},{backupsFiles:r})})),n.spinnerCounterChannel.next(-1)},_t=function(e){var t=e.history;e.services.spinnerService.spinnerCounterChannel.next(-1),t.replace(M.path)},Kt=function(e){e.services.spinnerService.spinnerCounterChannel.next(-1)},Mt=function(e){var t=e.services,n=t.googleBackupsService;t.spinnerService.spinnerCounterChannel.next(-1),n.backupsNameLoadChannel.next(x)},Vt=function(e){var t=e.services,n=t.spinnerService;t.googleBackupsService.backupsNameLoadChannel.next(x),n.spinnerCounterChannel.next(-1)},qt=function(e){e.services.googleBackupsService.backupsNameLoadChannel.next(x)},Qt=n(155),Ut=n.n(Qt),zt=function(e){var t=e.setSubscription,n=e.services,r=n.spinnerService,a=n.googleBackupsService,i=n.confirmDialogService,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-1",o=i.confirmationChannel.subscribe((function(e){e&&(r.spinnerCounterChannel.next(1),a.backupLoadChannel.next(c)),i.openDialogChannel.next(De)}));t(o),i.openDialogChannel.next({isOpen:!0,message:"Do you want to load this backup?",titleBackgroundColor:"red",icon:Object(j.jsx)(Ut.a,{})})},Ht=function(e){var t=e.setSubscription,n=e.services,r=n.spinnerService,a=n.googleBackupsService,i=n.confirmDialogService,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-1",o=i.confirmationChannel.subscribe((function(e){e&&(r.spinnerCounterChannel.next(1),a.backupDeleteChannel.next(c)),i.openDialogChannel.next(De)}));t(o),i.openDialogChannel.next({isOpen:!0,message:"Do you want to delete this backup?",titleBackgroundColor:"red",icon:Object(j.jsx)(lt.a,{})})},Wt=function(){var e=B(r.GoogleBackupsService),t=B(r.SpinnerService),n=B(r.ConfirmDialogService),i=S({backupsFiles:[]},{googleBackupsService:e,spinnerService:t,confirmDialogService:n},fc),c=i.callbackFactory,o=i.externalCallbackSettings.state;O(e.backupsNameLoadChannel,c(Ft),c(At)),O(e.backupLoadChannel,c(Kt),c(_t)),O(e.backupDeleteChannel,c(Mt)),O(e.backupUploadChannel,c(Vt)),at(c(qt));var s=Object(a.useCallback)(c(zt),[]),u=Object(a.useCallback)(c(Ht),[]);return Object(j.jsx)(Lt,{backupsFiles:o.backupsFiles,onLoad:s,onDelete:u,onCreate:function(){t.spinnerCounterChannel.next(1),e.backupUploadChannel.next()}})},Jt=n(115),Yt=n.n(Jt),$t=n(157),Xt=n.n($t),Zt=n(156),en=n.n(Zt),tn=n(158),nn=n.n(tn),rn=(n(205),function(e){var t=e.onOpenEditor,n=e.onOpenRepeater,r=e.onStartSelecting,a=e.onMovingSelectedCards,i=e.onDeleteSelectedCards,c=e.onCopySelectedCards,o=(e.hideOpenRepeaterButton,e.hideOpenEditorButton),s=void 0!==o&&o,u=e.hideMovingSelectedCardsButton,l=void 0!==u&&u,d=e.hideDeleteSelectedCardsButton,h=void 0!==d&&d,p=e.hideCopySelectedCardButton,b=void 0!==p&&p;return Object(j.jsxs)("div",{className:"cards-list-actions",children:[Object(j.jsx)(Ge.a,{size:"medium",color:"secondary",onClick:r,children:Object(j.jsx)(en.a,{})}),Object(j.jsx)(Ge.a,{size:"medium",color:"primary",onClick:n,children:Object(j.jsx)(Xt.a,{})}),!s&&Object(j.jsx)(Ge.a,{size:"medium",color:"secondary",onClick:t,children:Object(j.jsx)(Ne.a,{})}),!l&&Object(j.jsx)(Ge.a,{size:"medium",color:"primary",onClick:a,children:Object(j.jsx)(nn.a,{})}),!b&&Object(j.jsx)(Ge.a,{size:"medium",color:"secondary",onClick:c,children:Object(j.jsx)(Yt.a,{})}),!h&&Object(j.jsx)(Ge.a,{size:"medium",color:"secondary",onClick:i,children:Object(j.jsx)(lt.a,{})})]})}),an=(n(206),n(159)),cn=n.n(an),on=n(291);!function(e){e[e.TO_DO=0]="TO_DO",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.DONE=2]="DONE"}(nt||(nt={}));n(207);var sn,un=function(e){var t=e.card;return Object(j.jsxs)("div",{className:"card-primary-text",children:[Object(j.jsx)("p",{className:"card-primary-text_title",children:t.question}),Object(j.jsx)("p",{className:"card-primary-text_content",children:t.answer})]})},ln=function(e){var t=e.card,n=e.onEditItem,r=e.onDeleteItem,a=e.onResetProgress,i=e.onClickItem,c=e.onSelect,o=e.isEnabledSelecting,s=e.isSelected,u="Last repeating date: "+Object(Pe.a)(t.dateRepeating?t.dateRepeating:new Date,ze),l=[{fieldName:"Edit",handler:function(){n(t.id)}},{fieldName:"Delete",handler:function(){r(t.id)}},{fieldName:"Reset progress",handler:function(){a(t.id)}}];return Object(j.jsxs)(ee.a,{button:!0,children:[Object(j.jsx)(Le.a,{onClick:function(){return i(t.id)},children:Object(j.jsx)(cn.a,{style:{color:function(e){return e.rangeOfKnowledge===nt.DONE?"green":e.rangeOfKnowledge===nt.IN_PROGRESS?"yellow":"red"}(t)}})}),Object(j.jsx)(Ae.a,{onClick:function(){return i(t.id)},primary:Object(j.jsx)(un,{card:t}),secondary:u}),o?Object(j.jsx)(Le.a,{onClick:function(){return o&&c(t.id)},children:Object(j.jsx)(on.a,{edge:"start",checked:s,tabIndex:-1,disableRipple:!0})}):Object(j.jsx)(Le.a,{children:Object(j.jsx)(Ue,{menuSetup:l})})]},t.id)},dn=function(e){var t=e.cards,n=e.height,r=e.onEditItem,a=e.onDeleteItem,i=e.onSelectItem,c=e.onResetProgress,o=e.onClickItem,s=e.isEnabledSelecting,u=e.selectedItems;return Object(j.jsx)(Re.a,{className:"cards",itemData:t,itemSize:75,itemCount:t.length,overscanCount:5,height:n,width:"100%",children:function(e){var n=e.index,l=e.style,d=t[n];return Object(j.jsx)("div",{style:l,children:Object(j.jsx)(ln,{card:d,onEditItem:r,onDeleteItem:a,onResetProgress:c,onClickItem:o,onSelect:i,isEnabledSelecting:s,isSelected:u[d.id]},d.id)})}})},hn=function(e){var t=e.cards,n=e.filter,r=e.onOpenEditor,a=e.onEditItem,i=e.onDeleteItem,c=e.onResetProgress,o=e.onClickItem,s=e.onChangeSearchableText,u=e.onChangeSorting,l=e.height,d=e.onOpenRepeater,h=e.onStartSelecting,p=e.onSelectItem,b=e.onDeleteSelectedCards,f=e.onMovingSelectedCards,g=e.onCopySelectedCards,v=e.isEnabledSelecting,O=e.selectedItems;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(tt,{onChangeSearchableText:s,onChangeSorting:u,filter:n,sortVariants:[A.NONE,A.DATE_ASK,A.DATE_DESK,A.QUESTION_ASK,A.QUESTION_DESK,A.STATUS_ASK,A.STATUS_DESK,A.ANSWER_ASK,A.ANSWER_DESK]}),Object(j.jsx)(dn,{cards:t,height:l,onEditItem:a,onDeleteItem:i,onResetProgress:c,onClickItem:o,onSelectItem:p,isEnabledSelecting:v,selectedItems:O}),Object(j.jsx)(rn,{onOpenRepeater:d,onOpenEditor:r,onStartSelecting:h,onCopySelectedCards:g,hideOpenEditorButton:v,hideOpenRepeaterButton:v,hideDeleteSelectedCardsButton:!v,hideMovingSelectedCardsButton:!v,hideCopySelectedCardButton:!v,onDeleteSelectedCards:b,onMovingSelectedCards:f})]})},pn=function(e){var t=e.services,n=t.confirmDialogService,r=t.cardsListService,a=e.setState;(0,e.setSubscription)(n.confirmationChannel.subscribe((function(e){e&&a((function(e){return r.deleteCardsChannel.next(e.selectedItems),e})),n.openDialogChannel.next(De)}))),n.openDialogChannel.next({isOpen:!0,message:"Do you want to delete this cards?",titleBackgroundColor:"red",icon:Object(j.jsx)(lt.a,{})})},bn=function(e){var t=e.services,n=e.setState,r=e.setSubscription,a=t.cardsListService,i=t.confirmDialogService,c=t.selectionDialogService;n((function(e){var t=c.selectionChannel.subscribe((function(t){var n=i.confirmationChannel.subscribe((function(n){n&&(a.copyCardsChannel.next({selectedItems:e.selectedItems,destinationGroupID:t}),c.openDialogChannel.next({isOpen:!1,title:"",selectionItems:[]})),i.openDialogChannel.next(De)}));r(n),i.openDialogChannel.next({isOpen:!0,message:"Do you want to copy this cards?",titleBackgroundColor:"orange",icon:Object(j.jsx)(Yt.a,{})})}));return r(t),c.openDialogChannel.next({isOpen:!0,title:"Select cards group",selectionItems:e.existedGroupsIDs}),e}))},fn=n(160),gn=n.n(fn),jn=function(e){var t=e.services,n=e.setState,r=e.setSubscription;n((function(e){var n=t.cardsListService,a=t.confirmDialogService,i=t.selectionDialogService,c=i.selectionChannel.subscribe((function(t){var c=a.confirmationChannel.subscribe((function(r){r&&(n.movingCardsChannel.next({selectedItems:e.selectedItems,destinationGroupID:t}),i.openDialogChannel.next({isOpen:!1,title:"",selectionItems:[]})),a.openDialogChannel.next(De)}));r(c),a.openDialogChannel.next({isOpen:!0,message:"Do you want to move this cards?",titleBackgroundColor:"green",icon:Object(j.jsx)(gn.a,{})})}));return r(c),i.openDialogChannel.next({isOpen:!0,title:"Select cards group",selectionItems:e.existedGroupsIDs}),e}))},vn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.setState;n((function(e){var n=Object(s.a)({},e.selectedItems);return n[t]?n[t]=!n[t]:n[t]=!0,Object(s.a)(Object(s.a)({},e),{},{selectedItems:n})}))},On=function(e){(0,e.setState)((function(e){return Object(s.a)(Object(s.a)({},e),{},{isEnabledSelecting:!e.isEnabledSelecting,selectedItems:e.isEnabledSelecting?e.selectedItems:{}})}))},Cn=function(e){var t=e.setState,n=e.location,r=e.services;t((function(e){return e.isEnabledSelecting?r.cardsListService.cardsIDsBySelectedItemsChannel.next(e.selectedItems):r.cardsListService.cardsIDsByGroupIDsChannel.next(n.state.cardsGroupID),e}))},Sn=function(e){var t=e.setState,n=e.services,r=(e.location,arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.NONE);t((function(e){var t=Object(s.a)(Object(s.a)({},e.filter),{},{sort:r});return n.cardsListService.changeFilterChannel.next(t),e}))},mn=function(e){var t=e.services,n=e.setState,r=(e.location,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"");n((function(e){var n=Object(s.a)(Object(s.a)({},e.filter),{},{searchableText:r});return t.cardsListService.changeFilterChannel.next(n),e}))},xn=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t((function(e){return Object(s.a)(Object(s.a)({},e),{},{cards:n})}))},Dn=function(e,t){var n=e.history,r=e.location;n.push({pathname:U.path,state:Object(s.a)(Object(s.a)({},r.state),{},{cardsIDsForRepeating:t||[]})})},kn=function(e,t){var n=e.history,r=e.location;t&&t.length>1?n.push({pathname:U.path,state:Object(s.a)(Object(s.a)({},r.state),{},{cardsIDsForRepeating:t||[]})}):t&&1===t.length&&n.push({pathname:Y.path,state:Object(s.a)(Object(s.a)({},r.state),{},{cardsGroupID:r.state.cardsGroupID,cardID:t[0]})})},wn=function(e){var t=e.setState,n=e.services,r=e.location,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ct;t((function(e){return Object(s.a)(Object(s.a)({},e),{},{filter:a})})),n.cardsListService.cardsChannel.next({cardsGroupID:r.state.cardsGroupID,filter:a})},In=function(e){var t=e.services,n=e.setState,r=(e.location,t.cardsListService);n((function(e){return r.filterChannel.next(x),r.existedGroupsIDsChannel.next(x),e}))},yn=function(e){var t=e.services;e.location;t.cardsListService.filterChannel.next(x)},En=function(e){var t=e.setState,n=e.services,r=e.location;t((function(e){return n.cardsListService.cardsChannel.next({cardsGroupID:r.state.cardsGroupID,filter:e.filter}),e}))},Rn=function(e){var t=e.setState,n=e.services,r=e.location;t((function(e){return n.cardsListService.cardsChannel.next({cardsGroupID:r.state.cardsGroupID,filter:e.filter}),e}))},Gn=function(e){var t=e.setState,n=e.services,r=e.location;t((function(e){return n.cardsListService.cardsChannel.next({cardsGroupID:r.state.cardsGroupID,filter:e.filter}),e}))},Bn=function(e){var t=e.services,n=e.setState,r=e.location;n((function(e){return t.cardsListService.cardsChannel.next({cardsGroupID:r.state.cardsGroupID,filter:e.filter}),e}))},Nn=function(e){var t=e.setState,n=e.services,r=e.location;t((function(e){return n.cardsListService.cardsChannel.next({cardsGroupID:r.state.cardsGroupID,filter:e.filter}),e}))},Tn=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t((function(e){return Object(s.a)(Object(s.a)({},e),{},{existedGroupsIDs:n})}))},Pn=function(e){var t=e.location;e.history.push({pathname:z.path,state:Object(s.a)(Object(s.a)({},t.state),{},{cardsGroupID:t.state.cardsGroupID})})},Ln=function(e){var t=e.location,n=e.history,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;n.push({pathname:z.path,state:Object(s.a)(Object(s.a)({},t.state),{},{cardsGroupID:t.state.cardsGroupID,cardID:r})})},An=function(e){var t=e.setSubscription,n=e.services,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=n.confirmDialogService,i=n.cardsListService,c=a.confirmationChannel.subscribe((function(e){e&&i.deleteSingleCardChannel.next(r),a.openDialogChannel.next(De)}));t(c),a.openDialogChannel.next({isOpen:!0,message:"Do you want to remove this card?",titleBackgroundColor:"red",icon:Object(j.jsx)(lt.a,{})})},Fn=function(e){var t=e.services,n=e.location,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.cardsListService.resetCardProgressChannel.next({cardID:r,cardsGroupID:n.state.cardsGroupID})},_n=function(e){var t=e.location,n=e.history,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;n.push({pathname:Y.path,state:Object(s.a)(Object(s.a)({},t.state),{},{cardsGroupID:t.state.cardsGroupID,cardID:r})})},Kn={cards:[],filter:Ct,isEnabledSelecting:!1,selectedItems:{},existedGroupsIDs:[]},Mn=function(){var e=B(r.CardsService),t=B(r.SelectionDialogService),n=B(r.ConfirmDialogService),i=S(Kn,{cardsListService:e,selectionDialogService:t,confirmDialogService:n},fc),c=i.callbackFactory,o=i.externalCallbackSettings,s=o.state,u=o.context;O(e.cardsChannel,c(xn)),O(e.cardsIDsByGroupIDsChannel,c(Dn)),O(e.cardsIDsBySelectedItemsChannel,c(kn)),O(e.filterChannel,c(wn)),O(e.changeFilterChannel,c(yn)),O(e.resetCardProgressChannel,c(En)),O(e.deleteSingleCardChannel,c(Rn)),O(e.movingCardsChannel,c(Gn)),O(e.copyCardsChannel,c(Bn)),O(e.deleteCardsChannel,c(Nn)),O(e.existedGroupsIDsChannel,c(Tn)),at(c(In));var l=Object(a.useCallback)(c(Pn),[]),d=Object(a.useCallback)(c(Ln),[]),h=Object(a.useCallback)(c(An),[]),p=Object(a.useCallback)(c(Fn),[]),b=Object(a.useCallback)(c(_n),[]),f=Object(a.useCallback)(c(mn),[s.filter]),g=Object(a.useCallback)(c(Sn),[s.filter]),v=Object(a.useCallback)(c(On),[]),C=Object(a.useCallback)(c(Cn),[]),m=Object(a.useCallback)(c(vn),[]),x=Object(a.useCallback)(c(jn),[]),D=Object(a.useCallback)(c(bn),[]),k=Object(a.useCallback)(c(pn),[]);return Object(j.jsx)(hn,{filter:s.filter,onChangeSorting:g,onChangeSearchableText:f,cards:s.cards,onOpenEditor:l,onEditItem:d,onDeleteItem:h,onResetProgress:p,onClickItem:b,height:u.height,onOpenRepeater:C,onStartSelecting:v,isEnabledSelecting:s.isEnabledSelecting,onSelectItem:m,selectedItems:s.selectedItems,onMovingSelectedCards:x,onDeleteSelectedCards:k,onCopySelectedCards:D})},Vn=function(e){var t=e.repeatingProgress;return Object(j.jsxs)("div",{children:[Object(j.jsx)(he.a,{size:"small",children:Object(j.jsxs)("span",{style:{color:"red"},children:["To Do: ",t.todo]})}),Object(j.jsx)(he.a,{size:"small",children:Object(j.jsxs)("span",{style:{color:"orange"},children:["In progress: ",t.inProgress]})}),Object(j.jsx)(he.a,{size:"small",children:Object(j.jsxs)("span",{style:{color:"green"},children:["Completed: ",t.done]})})]})},qn=(n(208),function(e){var t=e.onBackClick;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{children:"No cards for repeating"}),Object(j.jsx)(he.a,{size:"small",color:"primary",onClick:t,children:"Go back"})]})}),Qn=n(275),Un=n(276),zn=n(277),Hn=function(e){var t=e.isQuestionSide,n=e.onSwitchEditing,r=e.onReadByVoiceEngine,a=e.isEditable;return Object(j.jsxs)("div",{className:"cards-repeater_title",children:[Object(j.jsx)(p.a,{color:"inherit",onClick:r,children:Object(j.jsx)(Qn.a,{})}),Object(j.jsx)(b.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t?"Question":"Answer"}),Object(j.jsx)(p.a,{color:"inherit",onClick:n,children:a?Object(j.jsx)(Un.a,{}):Object(j.jsx)(zn.a,{})})]})},Wn=n(320),Jn=n(319),Yn=(n(209),function(e){var t=e.viewHeight,n=e.text,r=e.onClickText,a=void 0===r?function(){}:r;return Object(j.jsx)(b.a,{component:"div",color:"textSecondary",gutterBottom:!0,onClick:a,className:"long-text-viewer",style:{height:t-20},children:Object(j.jsx)(K.a,{style:{paddingTop:0},children:n})})}),$n=(n(210),function(e){var t=e.onChangeText,n=e.changeableText,r=e.label;return Object(j.jsx)(Ye.a,{className:"text-editor",required:!0,id:"outlined-required",label:r||"",multiline:!0,onChange:function(e){t(e.target.value)},value:n,variant:"filled"})}),Xn=(n(211),function(e){var t=e.viewHeight,n=e.text,r=e.onChangeText;return Object(j.jsx)("div",{className:"long-text-editor",style:{height:t-20},children:Object(j.jsx)($n,{onChangeText:r,changeableText:n})})}),Zn=n(318),er=function(e){var t=e.onClick;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(Zn.a,{className:"cards-repeater_buttons-container",style:{height:10},children:Object(j.jsx)(he.a,{size:"small",color:"primary",onClick:function(){return t()},children:"Remove"})})})},tr=function(e){var t=e.card,n=e.onClickCard,r=e.cardHeight,a=e.isEditable,i=e.onDeleteCard,c=e.onChangeQuestion,o=t?t.question:"";return Object(j.jsx)(Jn.a,{children:Object(j.jsx)(Wn.a,{onClick:n,style:{height:r},children:a?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Xn,{text:o,viewHeight:r,onChangeText:c}),Object(j.jsx)(er,{onClick:i})]}):Object(j.jsx)(Yn,{viewHeight:r,text:o})})})},nr=(n(212),function(e){var t=e.card,n=e.onClickYesNoButton;return Object(j.jsx)(j.Fragment,{children:t&&t.rangeOfKnowledge!==nt.DONE?Object(j.jsxs)(Zn.a,{className:"answer-card-footer",children:[Object(j.jsx)(he.a,{className:"answer-card-footer_action answer-card-footer_action-button-yes",size:"small",color:"primary",onClick:function(){return n(!0)},children:"Yes"}),Object(j.jsx)(he.a,{className:"answer-card-footer_action answer-card-footer_action-button-no",size:"small",color:"primary",onClick:function(){return n(!1)},children:"No"})]}):Object(j.jsx)("div",{children:"Repeated"})})}),rr=function(e){var t=e.card,n=e.cardHeight,r=e.onClickText,i=e.onClickYesNoButton,c=e.isEditable,o=e.onChangeAnswer,s=e.onDeleteCard,l=Object(a.useState)(null),d=Object(u.a)(l,2),h=d[0],p=d[1],b=function(){return t?t.answer:""},f="yes"===h?"rgba(0,128,0,0.35)":"no"===h?"rgb(252,189,154)":"white";return Object(j.jsx)(Jn.a,{className:"cards-repeater answer-card-component",style:{backgroundColor:f},children:Object(j.jsx)(Wn.a,{style:{height:n},children:c?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Xn,{text:b(),viewHeight:n,onChangeText:o}),Object(j.jsx)(er,{onClick:s})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Yn,{viewHeight:n,text:b(),onClickText:r}),Object(j.jsx)(nr,{onClickYesNoButton:function(e){i(e),p(e?"yes":"no")},card:t})]})})})},ar=function(e){var t=e.isQuestionSide,n=e.isEditable,r=e.onSwitchEditing,a=e.card,i=e.cardHeight,c=e.onClickCard,o=e.onChangeAnswer,s=e.onChangeQuestion,u=e.onDeleteCard,l=e.onClickYesNoButton,d=e.onReadByVoiceEngine;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Hn,{onReadByVoiceEngine:d,isQuestionSide:t,isEditable:n,onSwitchEditing:r}),t?Object(j.jsx)(tr,{card:a,onClickCard:c,cardHeight:i,isEditable:n,onChangeQuestion:s,onDeleteCard:u}):Object(j.jsx)(rr,{card:a,onClickText:c,cardHeight:i,onClickYesNoButton:l,onChangeAnswer:o,isEditable:n,onDeleteCard:u})]})},ir=function(e){var t=e.card,n=e.cardHeight,r=e.isQuestionSide,a=e.onClickCard,i=e.onClickYesNoButton,c=e.repeatingProgress,o=e.onBackClick,s=e.onSwitchEditing,u=e.isEditable,l=e.onChangeAnswer,d=e.onChangeQuestion,h=e.onReadByVoiceEngine,p=e.onDeleteCard;return t&&-1!==t.id?Object(j.jsxs)("div",{className:"cards-repeater",children:[Object(j.jsx)(Vn,{repeatingProgress:c}),Object(j.jsx)(ar,{card:t,onDeleteCard:p,onClickYesNoButton:i,isQuestionSide:r,onClickCard:a,cardHeight:n,onSwitchEditing:s,isEditable:u,onChangeQuestion:d,onChangeAnswer:l,onReadByVoiceEngine:h})]}):Object(j.jsx)(qn,{onBackClick:o})},cr=function(e){var t=e.services,n=e.setState,r=e.setSubscription,a=t.confirmDialogService,i=t.cardsRepeaterService;r(a.confirmationChannel.subscribe((function(e){e&&n((function(e){return i.deleteSingleCardChannel.next(e.card.id),e})),a.openDialogChannel.next(De)}))),a.openDialogChannel.next({isOpen:!0,message:"Do you want to delete this cards?",titleBackgroundColor:"red",icon:Object(j.jsx)(lt.a,{})})},or=function(e){var t=e.services,n=e.location;t.cardsRepeaterService.cardChannel.next(n.state?n.state.cardsIDsForRepeating:[])},sr={id:-1,question:"",answer:"",rangeOfKnowledge:nt.IN_PROGRESS,dateRepeating:0},ur=function(e){var t=e.services.cardsRepeaterService,n=e.setState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sr;n((function(e){return Object(s.a)(Object(s.a)({},e),{},{card:r,isQuestionSide:!0,isEditable:!1})})),t.repeatingProgressChannel.next(x)},lr=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sr;t((function(e){return Object(s.a)(Object(s.a)({},e),{},{card:n})}))},dr={inProgress:0,todo:0,done:0},hr=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dr;t((function(e){return Object(s.a)(Object(s.a)({},e),{},{repeatingProgress:n})}))},pr=function(e){var t=e.services.cardsRepeaterService,n=e.location;t.cardChannel.next(n.state.cardsIDsForRepeating)},br=function(e){var t=e.services.cardsRepeaterService,n=e.location;n.state&&t.cardChannel.next(n.state.cardsIDsForRepeating),t.repeatingProgressChannel.next(x)},fr=function(e){var t=e.setState,n=e.location,r=e.services.cardsRepeaterService,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t((function(e){return e.card?(r.repeatingResultChannel.next({isKnown:a,cardID:e.card.id,cardsGroupID:n.state.cardsGroupID}),e):Object(s.a)(Object(s.a)({},e),{},{card:{id:-1,question:"",answer:"",rangeOfKnowledge:nt.IN_PROGRESS,dateRepeating:0},isQuestionSide:!1,isEditable:!1})}))},gr=function(e){(0,e.setState)((function(e){return e.isEditable?e:Object(s.a)(Object(s.a)({},e),{},{isQuestionSide:!e.isQuestionSide})}))},jr=function(e){e.history.goBack()},vr=function(){return{rangeOfKnowledge:nt.IN_PROGRESS,answer:"",question:"",dateRepeating:0,id:(new Date).getTime()}},Or=function(e){var t=e.setState,n=e.location,r=e.services.cardsEditorService;t((function(e){return e.isEditable&&r.cardEditingChannel.next({card:e.card||vr(),cardsGroupID:n.state.cardsGroupID}),Object(s.a)(Object(s.a)({},e),{},{isEditable:!e.isEditable})}))},Cr=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){if(e.card){var t=Object(s.a)(Object(s.a)({},e.card),{},{question:n});return Object(s.a)(Object(s.a)({},e),{},{card:t})}return e}))},Sr=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){if(e.card){var t=Object(s.a)(Object(s.a)({},e.card),{},{answer:n});return Object(s.a)(Object(s.a)({},e),{},{card:t})}return e}))},mr={card:{id:-1,question:"",answer:"",rangeOfKnowledge:nt.IN_PROGRESS,dateRepeating:0},isQuestionSide:!0,isEditable:!1,repeatingProgress:dr},xr=function(e){var t=e.setState,n=e.services;t((function(e){return e.isQuestionSide?n.cardsRepeaterService.readByVoiceEngineChannel.next(e.card.question):n.cardsRepeaterService.readByVoiceEngineChannel.next(e.card.answer),e}))},Dr=n(116),kr=function(e){Object(Dr.a)(e)},wr=function(){var e=B(r.CardsRepeaterService),t=B(r.CardsEditorService),n=B(r.ConfirmDialogService),i=B(r.ToolbarService),c=S(mr,{cardsRepeaterService:e,cardsEditorService:t,confirmDialogService:n,toolbarService:i},fc),o=c.callbackFactory,s=c.externalCallbackSettings,u=s.state,l=s.context;O(e.deleteSingleCardChannel,o(or)),O(e.cardChannel,o(ur)),O(t.cardEditingChannel,o(lr)),O(e.repeatingProgressChannel,o(hr)),O(e.repeatingResultChannel,o(pr)),O(e.readByVoiceEngineChannel,o(kr)),at(o(br));var d=Object(a.useCallback)(o(fr),[]),h=Object(a.useCallback)(o(gr),[]),p=Object(a.useCallback)(o(jr),[]),b=Object(a.useCallback)(o(Or),[]),f=Object(a.useCallback)(o(Cr),[]),g=Object(a.useCallback)(o(Sr),[]),v=Object(a.useCallback)(o(cr),[]),C=Object(a.useCallback)(o(xr),[]);return Object(j.jsx)(ir,{onReadByVoiceEngine:C,onDeleteCard:v,cardHeight:.55*l.height,isQuestionSide:u.isQuestionSide,onClickCard:h,onClickYesNoButton:d,card:u.card,repeatingProgress:u.repeatingProgress,onBackClick:p,onSwitchEditing:b,isEditable:u.isEditable,onChangeQuestion:f,onChangeAnswer:g})},Ir=function(e){e.services.spinnerService.spinnerCounterChannel.next(-1)},yr=n(161),Er=n.n(yr),Rr=function(e,t){var n=e.setSubscription,r=e.services,a=r.spinnerService,i=r.confirmDialogService,c=r.localBackupsService,o=null;if(t&&(o=t.target.files[0]),o){var s=new FileReader;s.onload=function(e){var t=e.target.result,r=i.confirmationChannel.subscribe((function(e){e&&(a.spinnerCounterChannel.next(1),c.loadBackupChannel.next(t)),i.openDialogChannel.next(De)}));n(r),i.openDialogChannel.next({isOpen:!0,message:"Do you want to load this backup, your current changes could be removed?",titleBackgroundColor:"red",icon:Object(j.jsx)(Er.a,{})})},s.readAsText(o)}},Gr=function(){var e=B(r.LocalBackupsService),t=B(r.SpinnerService),n=B(r.ConfirmDialogService),i=S(null,{localBackupsService:e,spinnerService:t,confirmDialogService:n},fc).callbackFactory;O(e.localBackupChannel),O(e.loadBackupChannel,i(Ir));var c=Object(a.useCallback)(i(Rr),[]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"file",onChange:c}),Object(j.jsx)(he.a,{size:"small",onClick:function(){return e.localBackupChannel.next()},children:"Save"})]})},Br=(n(213),function(e){var t=e.groupName,n=e.onChangeGroupName,r=e.onSaveGroup;return Object(j.jsxs)("div",{className:"group-editor",children:[Object(j.jsx)(Ye.a,{className:"group-editor_text",required:!0,id:"outlined-required",label:"Group name",onChange:function(e){n(e.target.value)},value:t,variant:"filled"}),Object(j.jsx)(he.a,{variant:"outlined",className:"group-editor_button",size:"small",onClick:function(){return r()},children:"Save"})]})}),Nr=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){return{cardsGroup:Object(s.a)(Object(s.a)({},e.cardsGroup),{},{nameCardsGroup:n})}}))},Tr=function(e){var t=e.setState,n=e.services;t((function(e){return n.cardsGroupsEditorService.groupEditingChannel.next(e.cardsGroup),e}))},Pr=function(e){var t=e.services,n=e.location,r=n.state?n.state.cardsGroupID:-1;t.cardsGroupsEditorService.groupChannel.next(r)},Lr=function(e){e.history.goBack()},Ar={cards:[],nameCardsGroup:"",repeatingDate:(new Date).getTime(),id:(new Date).getTime(),percentRepeatedCards:0},Fr=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ar;t((function(e){return{cardsGroup:n}}))},_r={cardsGroup:Ar},Kr=function(){var e=B(r.CardsGroupsEditorService),t=S(_r,{cardsGroupsEditorService:e},fc),n=t.callbackFactory,i=t.externalCallbackSettings.state;O(e.groupEditingChannel,n(Lr)),O(e.groupChannel,n(Fr)),at(n(Pr));var c=Object(a.useCallback)(n(Nr),[]),o=Object(a.useCallback)(n(Tr),[]);return Object(j.jsx)(Br,{groupName:i.cardsGroup.nameCardsGroup,onChangeGroupName:c,onSaveGroup:o})},Mr=(n(214),function(e){var t=e.answer,n=e.question,r=e.onChangeAnswer,a=e.onChangeQuestion,i=e.onSaveCard;return Object(j.jsxs)("div",{className:"cards-editor",children:[Object(j.jsx)($n,{onChangeText:a,changeableText:n,label:"Question"}),Object(j.jsx)($n,{onChangeText:r,changeableText:t,label:"Answer"}),Object(j.jsx)(he.a,{variant:"outlined",className:"group-editor_button",size:"small",onClick:function(){return i()},children:"Save"})]})}),Vr=function(e){e.history.goBack()},qr=function(e){e.history;var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sr;n&&t((function(e){return Object(s.a)(Object(s.a)({},e),{},{card:n})}))},Qr=function(e){var t=e.location,n=e.services,r=t.state?t.state.cardsGroupID:-1,a=t.state?t.state.cardID:-1;n.cardsEditorService.cardChannel.next({cardID:a,cardsGroupID:r})},Ur=function(e){e.history;var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){return{card:Object(s.a)(Object(s.a)({},e.card),{},{question:n})}}))},zr=function(e){e.history;var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){return{card:Object(s.a)(Object(s.a)({},e.card),{},{answer:n})}}))},Hr=function(e){var t=e.services,n=e.setState,r=e.location;n((function(e){return t.cardsEditorService.cardEditingChannel.next({card:e.card,cardsGroupID:r.state.cardsGroupID}),e}))},Wr={card:vr()},Jr=function(){var e=B(r.CardsEditorService),t=S(Wr,{cardsEditorService:e},fc),n=t.callbackFactory,i=t.externalCallbackSettings.state;O(e.cardEditingChannel,n(Vr)),O(e.cardChannel,n(qr)),at(n(Qr));var c=Object(a.useCallback)(n(Ur),[]),o=Object(a.useCallback)(n(zr),[]),s=Object(a.useCallback)(n(Hr),[]);return Object(j.jsx)(Mr,{question:i.card.question,answer:i.card.answer,onChangeQuestion:c,onChangeAnswer:o,onSaveCard:s})},Yr=n(230),$r=n(274),Xr=n(321),Zr=n(288),ea=n(278),ta=n(322),na=function(e){var t=e.checked,n=e.label,r=e.onChange;return Object(j.jsx)(Xr.a,{control:Object(j.jsx)(ta.a,{checked:t,onChange:function(e){r(e.target.checked)}}),label:n})},ra=n(315),aa=function(e){var t=e.value,n=e.label,r=e.onChange;return Object(j.jsx)(Xr.a,{control:Object(j.jsx)(ra.a,{type:"number",value:t,onChange:function(e){r(Number(e.target.value))}}),label:n})};n(215);!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.RANDOM=1]="RANDOM"}(sn||(sn={}));var ia=function(e){var t,n,r,a=e.settings,i=e.onChangeAlgorithm,c=e.onChangeAutoObsolete,o=e.onChangeTimeInDone,s=e.onChangeTimeInProgress;return Object(j.jsxs)(Yr.a,{className:"settings-form",children:[Object(j.jsx)($r.a,{children:"Random repeating algorithm"}),Object(j.jsxs)(ea.a,{value:a.repeatingType,onChange:function(e){var t=Number(e.target.value);i(t)},children:[Object(j.jsx)(Xr.a,{value:sn.DEFAULT,control:Object(j.jsx)(Zr.a,{}),label:"Default"}),Object(j.jsx)(Xr.a,{value:sn.RANDOM,control:Object(j.jsx)(Zr.a,{}),label:"Random"})]}),Object(j.jsx)(na,{checked:null===(t=a.autoObsolete)||void 0===t?void 0:t.isEnable,label:"Enable auto obsolete",onChange:c}),Object(j.jsx)(aa,{value:null===(n=a.autoObsolete)||void 0===n?void 0:n.timeInDone,onChange:o,label:"How long cards exist in done status (days)"}),Object(j.jsx)(aa,{value:null===(r=a.autoObsolete)||void 0===r?void 0:r.timeInProgress,onChange:s,label:"How long cards exist in progress status (days)"}),Object(j.jsx)(aa,{value:a.difficultCardsAmountForRepeating,onChange:s,label:"How many difficult cards do you want to repeat by default"})]})},ca={repeatingType:sn.DEFAULT,autoObsolete:{isEnable:!1,timeInDone:7,timeInProgress:7},difficultCardsAmountForRepeating:15},oa=function(e){e.services.settingsService.settingsChannel.next(x)},sa=function(e){var t=e.setState,n=(e.services.settingsService,arguments.length>1&&void 0!==arguments[1]?arguments[1]:ca);t((function(e){return Object(s.a)(Object(s.a)({},e),n)}))},ua=function(e){e.setState;e.services.settingsService.settingsChannel.next(x)},la=function(e){var t=e.setState,n=e.services.settingsService,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sn.DEFAULT;t((function(e){return n.changeSettingsChannel.next(Object(s.a)(Object(s.a)({},e),{},{repeatingType:r})),e}))},da=function(e){var t=e.setState,n=e.services.settingsService,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t((function(e){return n.changeSettingsChannel.next(Object(s.a)(Object(s.a)({},e),{},{autoObsolete:Object(s.a)(Object(s.a)({},e.autoObsolete),{},{isEnable:r})})),e}))},ha=function(e){var t=e.setState,n=e.services.settingsService,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t((function(e){return n.changeSettingsChannel.next(Object(s.a)(Object(s.a)({},e),{},{autoObsolete:Object(s.a)(Object(s.a)({},e.autoObsolete),{},{timeInDone:r})})),e}))},pa=function(e){var t=e.setState,n=e.services.settingsService,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t((function(e){return n.changeSettingsChannel.next(Object(s.a)(Object(s.a)({},e),{},{autoObsolete:Object(s.a)(Object(s.a)({},e.autoObsolete),{},{timeInProgress:r})})),e}))},ba=function(){var e=B(r.SettingsService),t=S(ca,{settingsService:e},fc),n=t.callbackFactory,i=t.externalCallbackSettings.state;O(e.changeSettingsChannel,n(oa)),O(e.settingsChannel,n(sa)),at(n(ua));var c=Object(a.useCallback)(n(la),[]),o=Object(a.useCallback)(n(da),[]),s=Object(a.useCallback)(n(ha),[]),u=Object(a.useCallback)(n(pa),[]);return Object(j.jsx)(ia,{settings:i,onChangeAlgorithm:c,onChangeAutoObsolete:o,onChangeTimeInDone:s,onChangeTimeInProgress:u})},fa=function(e){return Object(j.jsx)("div",{className:"cards-viewer",children:-1===e.card.id?Object(j.jsx)("div",{children:"No card for viewing"}):Object(j.jsx)(ar,Object(s.a)({},e))})},ga=function(e){var t=e.services,n=e.setSubscription;(0,e.setState)((function(e){var r=t.confirmDialogService,a=t.cardViewerService,i=r.confirmationChannel.subscribe((function(t){t&&a.deleteSingleCardChannel.next(e.card.id),r.openDialogChannel.next(De)}));return n(i),r.openDialogChannel.next({isOpen:!0,message:"Do you want to delete this cards?",titleBackgroundColor:"red",icon:Object(j.jsx)(lt.a,{})}),e}))},ja=function(e){e.history.goBack()},va=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){if(e.card){var t=Object(s.a)(Object(s.a)({},e.card),{},{answer:n});return Object(s.a)(Object(s.a)({},e),{},{card:t})}return e}))},Oa=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){if(e.card){var t=Object(s.a)(Object(s.a)({},e.card),{},{question:n});return Object(s.a)(Object(s.a)({},e),{},{card:t})}return e}))},Ca=function(e){var t=e.setState,n=e.services,r=e.location;t((function(e){return e.isEditable&&n.cardsEditorService.cardEditingChannel.next({card:e.card||vr(),cardsGroupID:r.state.cardsGroupID}),Object(s.a)(Object(s.a)({},e),{},{isEditable:!e.isEditable})}))},Sa=function(e){var t=e.setState,n=e.services,r=e.location,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t((function(e){return e.card?(n.cardViewerService.repeatingResultChannel.next({isKnown:a,cardID:e.card.id,cardsGroupID:r.state.cardsGroupID}),e):{card:sr,isQuestionSide:!1,isEditable:!1}}))},ma=function(e){(0,e.setState)((function(e){return e.isEditable?e:Object(s.a)(Object(s.a)({},e),{},{isQuestionSide:!e.isQuestionSide})}))},xa=function(e){e.services;var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sr;t((function(e){return Object(s.a)(Object(s.a)({},e),{},{card:n})}))},Da=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sr;t((function(e){return Object(s.a)(Object(s.a)({},e),{},{card:n})}))},ka=function(e){var t=e.services,n=e.location;t.cardViewerService.cardChannel.next(n.state.cardID)},wa=function(e){var t=e.services,n=e.location;t.cardViewerService.cardChannel.next(n.state.cardID)},Ia={card:{id:-1,question:"",answer:"",rangeOfKnowledge:nt.IN_PROGRESS,dateRepeating:0},isQuestionSide:!0,isEditable:!1},ya=function(e){var t=e.services;(0,e.setState)((function(e){return e.isQuestionSide?t.cardViewerService.readByVoiceEngineChannel.next(e.card.question):t.cardViewerService.readByVoiceEngineChannel.next(e.card.answer),e}))},Ea=function(e){Object(Dr.a)(e)},Ra=function(){var e=B(r.CardViewerService),t=B(r.CardsEditorService),n=B(r.ToolbarService),i=B(r.ConfirmDialogService),c=S(Ia,{cardViewerService:e,cardsEditorService:t,toolbarService:n,confirmDialogService:i},fc),o=c.callbackFactory,s=c.externalCallbackSettings,u=s.state,l=s.context;O(e.deleteSingleCardChannel,o(ja)),O(e.cardChannel,o(xa)),O(t.cardEditingChannel,o(Da)),O(e.repeatingResultChannel,o(ka)),O(e.readByVoiceEngineChannel,o(Ea)),at(o(wa));var d=Object(a.useCallback)(o(ma),[]),h=Object(a.useCallback)(o(Sa),[]),p=Object(a.useCallback)(o(Ca),[]),b=Object(a.useCallback)(o(Oa),[]),f=Object(a.useCallback)(o(va),[]),g=Object(a.useCallback)(o(ga),[]),v=Object(a.useCallback)(o(ya),[]);return Object(j.jsx)(fa,{onReadByVoiceEngine:v,cardHeight:.55*l.height,isQuestionSide:u.isQuestionSide,onClickCard:d,onClickYesNoButton:h,card:u.card,onSwitchEditing:p,isEditable:u.isEditable,onChangeQuestion:b,onChangeAnswer:f,onDeleteCard:g})},Ga=n(323),Ba=n(306),Na=n(324),Ta=n(325),Pa=n(326),La=n(327),Aa=n(328),Fa=(n(216),n(217),function(e){var t=e.onClick;return Object(j.jsx)("div",{className:"remove-button-container",children:Object(j.jsx)(Ge.a,{size:"medium",color:"secondary",onClick:t,children:Object(j.jsx)(lt.a,{})})})}),_a=function(e){var t=e.rows,n=e.onRemoveStatistic;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Ga.a,{component:Ba.a,children:Object(j.jsxs)(Na.a,{"aria-label":"simple table",children:[Object(j.jsx)(Ta.a,{children:Object(j.jsxs)(Pa.a,{children:[Object(j.jsx)(La.a,{children:"Date"}),Object(j.jsx)(La.a,{children:"Done"}),Object(j.jsx)(La.a,{children:"In Progress"})]})}),Object(j.jsx)(Aa.a,{children:t.map((function(e){return Object(j.jsxs)(Pa.a,{children:[Object(j.jsx)(La.a,{children:e.date}),Object(j.jsx)(La.a,{children:e.done}),Object(j.jsx)(La.a,{children:e.inProgress})]},e.date)}))})]})}),Object(j.jsx)(Fa,{onClick:n})]})},Ka={rows:[]},Ma=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t((function(e){return Object(s.a)(Object(s.a)({},e),{},{rows:n})}))},Va=function(e){e.services.statisticService.statisticChannel.next(x)},qa=function(e){var t=e.setSubscription,n=e.services,r=n.statisticService,a=n.confirmDialogService;t(a.confirmationChannel.subscribe((function(e){e&&r.removeStatisticChannel.next(x),a.openDialogChannel.next(De)}))),a.openDialogChannel.next({isOpen:!0,message:"Do you want to delete statistic?",titleBackgroundColor:"red",icon:Object(j.jsx)(lt.a,{})})},Qa=function(e){(0,e.setState)((function(){return Ka}))},Ua=function(){var e=B(r.StatisticService),t=B(r.ConfirmDialogService),n=S(Ka,{statisticService:e,confirmDialogService:t},fc),i=n.callbackFactory,c=n.externalCallbackSettings.state;O(e.statisticChannel,i(Ma)),O(e.removeStatisticChannel,i(Qa)),at(i(Va));var o=Object(a.useCallback)(i(qa),[]);return Object(j.jsx)(_a,{rows:c.rows,onRemoveStatistic:o})},za=(n(218),function(e){var t=e.cardsGroup,n=e.onSelect,r=e.isSelected;return Object(j.jsxs)(ee.a,{button:!0,children:[Object(j.jsx)(Ae.a,{primary:Object(j.jsx)("div",{children:t.nameCardsGroup})}),Object(j.jsx)(Le.a,{onClick:function(){return n(t.id)},children:Object(j.jsx)(on.a,{edge:"start",checked:r,tabIndex:-1,disableRipple:!0})})]},t.id)}),Ha=function(e){var t=e.onSaveRepeater,n=e.cardsGroups,r=e.height,a=e.onSelect,i=e.selectedGroups,c=e.onChangeName,o=e.repeaterName;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Ye.a,{className:"repeater-editor_text",required:!0,id:"outlined-required",label:"Repeater name",onChange:function(e){c(e.target.value)},value:o,variant:"filled"}),Object(j.jsx)(Re.a,{className:"repeater-editor_list",itemData:n,itemSize:55,itemCount:n.length,overscanCount:5,height:r-500,width:"100%",children:function(e){var t=e.index,r=e.style;return Object(j.jsx)("div",{style:r,children:Object(j.jsx)(za,{cardsGroup:n[t],onSelect:a,isSelected:i[n[t].id]})})}}),Object(j.jsx)(he.a,{variant:"outlined",className:"repeater-editor_button",size:"small",onClick:t,children:"Save"})]})},Wa={id:-1,cardsGroupsIDs:[],name:""},Ja={cardsGroups:[],selectedGroups:{},repeater:Wa},Ya=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t((function(e){return Object(s.a)(Object(s.a)({},e),{},{cardsGroups:n})}))},$a=function(e){e.history.goBack()},Xa=function(e){var t=e.setState,n=e.services,r=n.repeaterEditorService,a=n.errorService;t((function(e){return e.repeater.name?r.saveRepeaterChannel.next(e.repeater):a.errorChannel.next("You cannot save repeater that does not have the name"),e}))},Za=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wa;t((function(e){return Object(s.a)(Object(s.a)({},e),{},{repeater:n})}))},ei=function(e){var t=e.setState,n=e.services.repeaterEditorService,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t((function(e){return e.selectedGroups[r]=!e.selectedGroups[r],n.updateGroupsIDsChannel.next({selectedGroups:e.selectedGroups,repeater:e.repeater}),Object(s.a)({},e)}))},ti=function(e){var t=e.setState,n=e.services.repeaterEditorService,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wa;n.selectedGroupsChannel.next(r),t((function(e){return Object(s.a)(Object(s.a)({},e),{},{repeater:r})}))},ni=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t((function(e){return Object(s.a)(Object(s.a)({},e),{},{repeater:Object(s.a)(Object(s.a)({},e.repeater),{},{name:n})})}))},ri=function(e){var t=e.services.repeaterEditorService,n=e.location,r=n.state&&n.state.repeaterID;r&&t.repeaterChannel.next(r),t.groupsListChannel.next(x)},ai=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t((function(e){return Object(s.a)(Object(s.a)({},e),{},{selectedGroups:n})}))},ii=function(){var e=B(r.RepeaterEditorService),t=B(r.ErrorService),n=S(Ja,{repeaterEditorService:e,errorService:t},fc),i=n.callbackFactory,c=n.externalCallbackSettings,o=c.state,s=c.context;O(e.groupsListChannel,i(Ya)),O(e.saveRepeaterChannel,i($a)),O(e.updateGroupsIDsChannel,i(Za)),O(e.repeaterChannel,i(ti)),O(e.selectedGroupsChannel,i(ai)),at(i(ri));var u=Object(a.useCallback)(i(Xa),[]),l=Object(a.useCallback)(i(ei),[]),d=Object(a.useCallback)(i(ni),[]);return Object(j.jsx)(Ha,{onSaveRepeater:u,cardsGroups:o.cardsGroups,height:s.height,selectedGroups:o.selectedGroups,onSelect:l,onChangeName:d,repeaterName:o.repeater.name})},ci=(n(219),n(220),n(279)),oi=n(297),si=["red","blue","orange","grey","green"],ui=[],li=function(e){var t,n=e.repeater,r=e.onStartRepeating,a=e.onDeleteRepeater,i=e.onResetProgress,c=e.onEditItem,o=[{fieldName:"Edit",handler:function(){c(n.id)}},{fieldName:"Delete",handler:function(){a(n.id)}},{fieldName:"Reset progress",handler:function(){i(n.id)}}];return Object(j.jsxs)(ee.a,{button:!0,component:"div",children:[Object(j.jsx)(Le.a,{onClick:function(){return r(n.id)},children:Object(j.jsx)(Ke,{percent:n.percentRepeatedCards||0})}),Object(j.jsx)(Ae.a,{className:"repeater-list-item_content",primary:n.name,secondary:Object(j.jsx)(ci.a,{className:"repeater-list-item_tag-container",direction:"row",children:null===(t=n.groupsNames)||void 0===t?void 0:t.map((function(e){var t=function(){var e=si[0],t=!0;do{e=si[Math.floor(Math.random()*si.length)],t=ui.indexOf(e)>-1,ui.length===si.length&&(ui=[])}while(t);return ui.push(e),e}();return Object(j.jsx)(oi.a,{className:"repeater-list-item_tag",label:e,size:"small",variant:"outlined",style:{color:t,borderColor:t}})}))}),onClick:function(){return r(n.id)}}),Object(j.jsx)(Le.a,{children:Object(j.jsx)(Ue,{menuSetup:o})})]},n.id)},di=function(e){var t=e.repeaters,n=e.height,r=e.onOpenEditor,a=e.onStartRepeating,i=e.onDeleteRepeater,c=e.onEditRepeater,o=e.onResetProgress;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Re.a,{className:"repeater-list",itemData:t,itemSize:55,itemCount:t.length,overscanCount:5,height:n,width:"100%",children:function(e){var n=e.index,r=e.style;return Object(j.jsx)("div",{style:r,children:Object(j.jsx)(li,{repeater:t[n],onStartRepeating:a,onDeleteRepeater:i,onEditItem:c,onResetProgress:o})})}}),Object(j.jsx)(Te,{onClick:r})]})},hi={repeaters:[]},pi=function(e){var t=e.history;e.location;t.push({pathname:X.path})},bi=function(e){var t=e.setState,n=(e.services.repeaterListService,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]);t((function(e){return Object(s.a)(Object(s.a)({},e),{},{repeaters:n})}))},fi=function(e){e.services.repeaterListService.repeaterListChannel.next(x)},gi=function(e){e.setState;var t=e.history,n=e.location,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.push({pathname:U.path,state:Object(s.a)(Object(s.a)({},n.state),{},{cardsIDsForRepeating:r})})},ji=function(e){var t=e.services.repeaterListService,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.startRepeatingChannel.next(n)},vi=function(e){var t=e.setSubscription,n=e.services,r=n.repeaterListService,a=n.confirmDialogService,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,c=a.confirmationChannel.subscribe((function(e){e&&r.removingRepeaterChannel.next(i),a.openDialogChannel.next(De)}));t(c),a.openDialogChannel.next({isOpen:!0,message:"Do you want to remove this repeater?",titleBackgroundColor:"red",icon:Object(j.jsx)(lt.a,{})})},Oi=function(e){e.services.repeaterListService.repeaterListChannel.next(x)},Ci=function(e){var t=e.services.repeaterListService,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.resetProgressChannel.next(n)},Si=function(e){var t=e.history,n=e.location,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.push({pathname:X.path,state:Object(s.a)(Object(s.a)({},n.state),{},{repeaterID:r})})},mi=function(){var e=B(r.RepeaterListService),t=B(r.ConfirmDialogService),n=S(hi,{repeaterListService:e,confirmDialogService:t},fc),i=n.callbackFactory,c=n.externalCallbackSettings,o=c.state,s=c.context;O(e.repeaterListChannel,i(bi)),O(e.startRepeatingChannel,i(gi)),O(e.removingRepeaterChannel,i(bi)),O(e.resetProgressChannel,i(Oi)),at(i(fi));var u=Object(a.useCallback)(i(pi),[]),l=Object(a.useCallback)(i(ji),[]),d=Object(a.useCallback)(i(vi),[]),h=Object(a.useCallback)(i(Ci),[]),p=Object(a.useCallback)(i(Si),[]);return Object(j.jsx)(di,{repeaters:o.repeaters,height:s.height,onOpenEditor:u,onDeleteRepeater:d,onStartRepeating:l,onResetProgress:h,onEditRepeater:p})},xi=function(){return Object(j.jsxs)(C.d,{children:[Object(j.jsx)(C.a,{exact:!0,from:"/MyCardsWeb",to:q.path}),Object(j.jsx)(C.a,{exact:!0,from:"/",to:q.path}),Object(j.jsx)(C.b,{path:q.path,children:Object(j.jsx)(wt,{})}),Object(j.jsx)(C.b,{path:M.path,children:Object(j.jsx)(Nt,{})}),Object(j.jsx)(C.b,{path:V.path,children:Object(j.jsx)(Wt,{})}),Object(j.jsx)(C.b,{path:Q.path,children:Object(j.jsx)(Mn,{})}),Object(j.jsx)(C.b,{path:U.path,children:Object(j.jsx)(wr,{})}),Object(j.jsx)(C.b,{path:H.path,children:Object(j.jsx)(Gr,{})}),Object(j.jsx)(C.b,{path:W.path,children:Object(j.jsx)(Kr,{})}),Object(j.jsx)(C.b,{path:z.path,children:Object(j.jsx)(Jr,{})}),Object(j.jsx)(C.b,{path:J.path,children:Object(j.jsx)(ba,{})}),Object(j.jsx)(C.b,{path:Y.path,children:Object(j.jsx)(Ra,{})}),Object(j.jsx)(C.b,{path:$.path,children:Object(j.jsx)(Ua,{})}),Object(j.jsx)(C.b,{path:X.path,children:Object(j.jsx)(ii,{})}),Object(j.jsx)(C.b,{path:Z.path,children:Object(j.jsx)(mi,{})})]})},Di=function(e){var t=e.isOpen,n=e.onClose,r=e.onClickItem,a=e.selectionItems,i=e.title;return Object(j.jsx)("div",{children:Object(j.jsxs)(oe.a,{open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:n,children:[Object(j.jsx)(se.a,{children:i}),Object(j.jsx)(ue.a,{children:Object(j.jsx)(K.a,{children:a.map((function(e){return Object(j.jsx)(ee.a,{onClick:function(){return r(e.id)},children:Object(j.jsx)(Ae.a,{primary:e.label})},e.id)}))})})]})})},ki={isOpen:!1,title:"",selectionItems:[]},wi=function(e){var t=e.setState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ki;t((function(){return Object(s.a)({},n)}))},Ii=function(e){var t=e.setState,n=e.services.selectionDialogService;t((function(){return ki})),n.selectionChannel.unsubscribe()},yi=function(e){e.setState;var t=e.services.selectionDialogService,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.selectionChannel.next(n)},Ei=function(){var e=B(r.SelectionDialogService),t=S(ki,{selectionDialogService:e},fc),n=t.callbackFactory,i=t.externalCallbackSettings.state;O(e.openDialogChannel,n(wi));var c=Object(a.useCallback)(n(Ii),[]),o=Object(a.useCallback)(n(yi),[]);return Object(j.jsx)(Di,{isOpen:i.isOpen,onClickItem:o,onClose:c,title:i.title,selectionItems:i.selectionItems})},Ri=n(15),Gi=n(65),Bi=n(298),Ni=function(e){var t=e.value,n=e.other;return"object"!==typeof t?t===n:!(t instanceof Array&&n instanceof Array&&t.length!==n.length)&&JSON.stringify(t)===JSON.stringify(n)},Ti=n(24),Pi=function(e,t){var n=function(e){var t="(function worker() {\n            var self = this;\n            self.onmessage = function(e) {\n                const result = (".concat(e.toString(),")(e.data)\n                self.postMessage(result);\n            }\n        })()"),n=new Blob([t],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}(t);return new Ti.a((function(t){n.postMessage(e),n.onmessage=function(e){t.next(e.data),t.complete(),n.terminate()},n.onerror=function(e){t.error(e)}}))},Li=function(){function e(t){Object(Ri.a)(this,e),this.outputSubject=void 0,this.observableCreator=void 0,this.subscriptions=[],this.previousEmittedValue=null,this.outputSubject=new Bi.a,this.observableCreator=t}return Object(Gi.a)(e,[{key:"next",value:function(e){var t=this;this.subscriptions.push(this.observableCreator(e).subscribe((function(e){t.outputSubject.next(e)}),(function(e){t.outputSubject.error(e)})))}},{key:"subscribe",value:function(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.outputSubject.subscribe((function(n){t&&(a?r.deepEqual(t,n):(t(n),e.globalNextHandler()))}),(function(t){n&&n(t),e.globalErrorHandler(t)}));return this.subscriptions.push(i),i}},{key:"deepEqual",value:function(t,n){var r=this;this.previousEmittedValue||(t(n),e.globalNextHandler(),this.previousEmittedValue=n);var a=Pi({value:n,other:this.previousEmittedValue},Ni).subscribe((function(a){a||(t(n),e.globalNextHandler(),r.previousEmittedValue=n)}),(function(e){console.error(e)}));this.subscriptions.push(a)}},{key:"unsubscribe",value:function(){this.subscriptions.forEach((function(e){e.closed||e.unsubscribe()})),this.subscriptions=[],this.previousEmittedValue=null}}]),e}();Li.globalErrorHandler=function(e){},Li.globalNextHandler=function(){},Li.setGlobalErrorHandler=function(e){Li.globalErrorHandler=e},Li.setGlobalNextHandler=function(e){Li.globalNextHandler=e};var Ai,Fi={height:0,width:0},_i=n(4),Ki=n(292),Mi=n(280),Vi=n(162),qi=n(281),Qi=n(48),Ui=n.n(Qi),zi=n(74),Hi=n(59),Wi={dailyStatistic:[],cardsInProgressFrequency:{},cardsInDone:{}},Ji=function(){function e(t){var n=this;Object(Ri.a)(this,e),this.dataBaseService=t,this.cardsStorageID="cards-local-storage",this.authTokenLocalStorageID="auth-token",this.settingsID="settings",this.filterID="filter",this.statisticID="statistic",this.repeatersID="repeaters",this.getBackup=function(){return Object(Hi.a)(n.getBackupFromDataBase())},this.getBackupFromDataBase=Object(zi.a)(Ui.a.mark((function e(){var t;return Ui.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,n.dataBaseService.get(n.cardsStorageID);case 4:t=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",t);case 11:if(!t){e.next=15;break}return e.abrupt("return",t);case 15:return e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,7]])}))),this.setBackupToDataBase=function(){var e=Object(zi.a)(Ui.a.mark((function e(t){return Ui.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.dataBaseService.set(n.cardsStorageID,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}return Object(Gi.a)(e,[{key:"setBackup",value:function(e){return Object(Hi.a)(this.setBackupToDataBase(e))}},{key:"getAuthToken",value:function(){var e=this;return Object(Hi.a)(new Promise((function(t,n){var r=localStorage.getItem(e.authTokenLocalStorageID);r?t(r):n("Auth token is empty")})))}},{key:"setAuthToken",value:function(e){var t=this;return Object(Hi.a)(new Promise((function(n){localStorage.setItem(t.authTokenLocalStorageID,e),n(e)})))}},{key:"getSettings",value:function(){var e=this;return Object(Hi.a)(new Promise((function(t,n){var r=localStorage.getItem(e.settingsID);t(r?JSON.parse(r):ca)})))}},{key:"setSettings",value:function(e){var t=this;return Object(Hi.a)(new Promise((function(n){localStorage.setItem(t.settingsID,JSON.stringify(e)),n(e)})))}},{key:"getFilter",value:function(){var e=this;return Object(Hi.a)(new Promise((function(t){var n=localStorage.getItem(e.filterID);t(n?JSON.parse(n):{cards:Ct,cardsGroups:Ct})})))}},{key:"setFilter",value:function(e){var t=this;return Object(Hi.a)(new Promise((function(n){localStorage.setItem(t.filterID,JSON.stringify(e)),n(e)})))}},{key:"getStatistic",value:function(){var e=this;return Object(Hi.a)(new Promise((function(t){var n=localStorage.getItem(e.statisticID);t(n?JSON.parse(n):Wi)})))}},{key:"setStatistic",value:function(e){var t=this;return Object(Hi.a)(new Promise((function(n){localStorage.setItem(t.statisticID,JSON.stringify(e)),n(e)})))}},{key:"getRepeaters",value:function(){var e=this;return Object(Hi.a)(new Promise((function(t){var n=localStorage.getItem(e.repeatersID);t(n?JSON.parse(n):[])})))}},{key:"setRepeaters",value:function(e){var t=this;return Object(Hi.a)(new Promise((function(n){localStorage.setItem(t.repeatersID,JSON.stringify(e)),n(e)})))}}]),e}(),Yi=n(166),$i="cards-store",Xi=function(){function e(){var t=this;Object(Ri.a)(this,e),this.voices=[],speechSynthesis.addEventListener("voiceschanged",(function(){t.voices=speechSynthesis.getVoices().filter((function(e){return"en-US"===e.lang}))}))}return Object(Gi.a)(e,[{key:"getRandomVoice",value:function(){return this.voices[Math.floor(Math.random()*this.voices.length)]}}]),e}(),Zi=n(299),ec=n(282),tc=function(e){var t="".concat("https://www.googleapis.com/drive/v3/files/?q=name%20contains%20","'").concat("my-cards","'");return fetch(t,{headers:{Authorization:"Bearer "+e},method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.files.find((function(e){return"application/vnd.google-apps.folder"===e.mimeType}))||null}))},nc=function(e,t){var n=t.find((function(t){return t.id===e}));return n?n.cards:[]},rc=function(e,t){var n=t.findIndex((function(t){return t.cards.findIndex((function(t){return t.id===e}))>-1})),r=-1;return n>=0&&(r=t[n].cards.findIndex((function(t){return e===t.id}))),n>=0&&r>=0&&(t[n].cards=t[n].cards.filter((function(t){return t.id!==e}))),t},ac=function(e){var t=[];for(var n in e)e[n]&&t.push(Number(n));return t},ic=function(e){return e.map((function(e){return{id:e.id,label:e.nameCardsGroup}}))},cc=function(e,t){return t.forEach((function(t){e.cardsGroupID&&t.id!==e.cardsGroupID||t.cards.forEach((function(t){e.cardID&&t.id!==e.cardID||(e.isKnown&&t.rangeOfKnowledge===nt.IN_PROGRESS||e.isKnown&&t.rangeOfKnowledge===nt.TO_DO?t.rangeOfKnowledge=nt.DONE:e.isKnown||t.rangeOfKnowledge!==nt.TO_DO||(t.rangeOfKnowledge=nt.IN_PROGRESS))}))})),t},oc=function(e,t){var n;t===sn.RANDOM?n=function(e){for(var t,n=[],r=e.length;r;)(t=Math.floor(Math.random()*e.length))in e&&(n.push(e[t]),delete e[t],r--);return n}(e).filter((function(e){return e.rangeOfKnowledge!==nt.DONE}))[0]:((n=e.find((function(e){return e.rangeOfKnowledge===nt.TO_DO})))||(n=e.find((function(e){return e.rangeOfKnowledge===nt.IN_PROGRESS}))),1===e.length&&(n=e[0]));return n||sr},sc=function(e,t){return t.forEach((function(t){e.cardsGroupID&&t.id!==e.cardsGroupID||t.cards.forEach((function(t){e.cardID&&t.id!==e.cardID||(t.dateRepeating=(new Date).getTime())}))})),t},uc=function(e,t){var n=new Date,r=n.getDate(),a=n.getMonth(),i=n.getFullYear(),c=e.dailyStatistic.findIndex((function(e){return e.date===r&&e.year===i&&e.month===a}));if(c>=0){var o=e.dailyStatistic[c];t.isKnown?o.done[t.cardID]?o.done[t.cardID]=o.done[t.cardID]+1:o.done[t.cardID]=1:o.inProgress[t.cardID]?o.inProgress[t.cardID]=o.inProgress[t.cardID]+1:o.inProgress[t.cardID]=1}else e.dailyStatistic.push({date:r,year:i,month:a,inProgress:t.isKnown?{}:Object(_i.a)({},t.cardID,1),done:t.isKnown?Object(_i.a)({},t.cardID,1):{}});return t.isKnown||(e.cardsInProgressFrequency[t.cardID]?e.cardsInProgressFrequency[t.cardID]=e.cardsInProgressFrequency[t.cardID]+1:e.cardsInProgressFrequency[t.cardID]=1),e},lc=function(e,t){var n=window.speechSynthesis;if(n.speaking)return n.cancel(),e;var r=new SpeechSynthesisUtterance(e);return r.onerror=function(e){console.warn("Read text error",e)},r.voice=t,r.lang="en-US",r.rate=1,n.speak(r),e},dc=function(e){return e=(e=(e=(e=e.replace(/_/g,"")).replace(/=/g,"")).replace(/\+/g,"")).replace(/[\u0400-\u04FF]/gi,""),console.log(e),e},hc=function(e,t){for(var n={id:-1,question:"",answer:"",rangeOfKnowledge:nt.IN_PROGRESS,dateRepeating:0},r=0;r<e.length;r++){var a=e[r].cards.findIndex((function(e){return e.id===t}));if(a>-1)return n=e[r].cards[a]}return n},pc=function(e,t){var n=e.findIndex((function(e){return e.id===t}));return e[n]},bc=(Ai={},Object(_i.a)(Ai,r.GoogleAuthService,{dependencyConstructor:function e(t){Object(Ri.a)(this,e),this.loginChannel=void 0,this.loginChannel=new Li((function(e){return Object(Ki.a)("").pipe(Object(Mi.a)((function(){t.setAuthToken(e)})))}))},arguments:[r.StorageService]}),Object(_i.a)(Ai,r.ErrorService,{dependencyConstructor:function e(){Object(Ri.a)(this,e),this.errorChannel=void 0,this.errorChannel=new Li((function(e){return Object(Ki.a)(e)}))},arguments:[]}),Object(_i.a)(Ai,r.CardsEditorService,{dependencyConstructor:function e(t){Object(Ri.a)(this,e),this.cardEditingChannel=void 0,this.cardChannel=void 0,this.cardEditingChannel=new Li((function(e){var n=e.card,r=e.cardsGroupID;return t.getBackup().pipe(Object(Vi.a)((function(e){return function(e,t,n){-1===t.id&&(t.id=(new Date).getTime());var r=n.findIndex((function(t){return e===t.id})),a=-1;return r>=0&&(a=n[r].cards.findIndex((function(e){return t.id===e.id}))),r>=0&&a<0?n[r].cards.push(t):r>=0&&a>=0&&(n[r].cards[a]=t),n}(r,n,e)})),Object(Mi.a)((function(e){t.setBackup(e)})),Object(Vi.a)((function(){return n})))})),this.cardChannel=new Li((function(e){var n=e.cardID,r=e.cardsGroupID;return t.getBackup().pipe(Object(Vi.a)((function(e){return function(e,t,n){var r=n.find((function(t){return e===t.id})),a={rangeOfKnowledge:nt.TO_DO,answer:"",question:"",dateRepeating:0,id:(new Date).getTime()};return r&&(a=r.cards.find((function(e){return e.id===t}))),a}(r,n,e)})))}))},arguments:[r.StorageService]}),Object(_i.a)(Ai,r.LocalBackupsService,{dependencyConstructor:function e(t){var n=this;Object(Ri.a)(this,e),this.storageService=t,this.localBackupChannel=void 0,this.loadBackupChannel=void 0,this.localBackupChannel=new Li((function(){return n.storageService.getBackup().pipe(Object(Mi.a)((function(e){return function(e){var t=JSON.stringify(e,null,4),n=new Blob([t],{type:"octet/stream"}),r=window.URL.createObjectURL(n),a=document.createElement("a");a&&(a.href=r,a.download="My Cards.txt",a.click()),window.URL.revokeObjectURL(r)}(e)})))})),this.loadBackupChannel=new Li((function(e){return Object(Ki.a)("").pipe(Object(qi.a)((function(){return n.storageService.setBackup(JSON.parse(e))})))}))},arguments:[r.StorageService]}),Object(_i.a)(Ai,r.SpinnerService,{dependencyConstructor:function e(){var t=this;Object(Ri.a)(this,e),this.spinnerCounterChannel=void 0,this.spinnerCounter=0,this.spinnerCounterChannel=new Li((function(e){return Object(Ki.a)("").pipe(Object(Vi.a)((function(){return t.spinnerCounter+e>=0&&(t.spinnerCounter=t.spinnerCounter+e),t.spinnerCounter})))}))},arguments:[]}),Object(_i.a)(Ai,r.ConfirmDialogService,{dependencyConstructor:function e(){var t=this;Object(Ri.a)(this,e),this.openDialogChannel=new Li((function(e){return Object(Ki.a)(e).pipe(Object(Mi.a)((function(e){e.isOpen||t.confirmationChannel.unsubscribe()})))})),this.confirmationChannel=new Li((function(e){return Object(Ki.a)(e)}))},arguments:[]}),Object(_i.a)(Ai,r.StorageService,{dependencyConstructor:Ji,arguments:[r.DataBaseService]}),Object(_i.a)(Ai,r.DataBaseService,{dependencyConstructor:function e(){var t=this;Object(Ri.a)(this,e),this.dataBase=void 0,this.DATA_BASE_NAME="my-cards-data-base",this.get=function(){var e=Object(zi.a)(Ui.a.mark((function e(n){return Ui.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dataBase;case 2:return e.abrupt("return",e.sent.get($i,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.set=function(){var e=Object(zi.a)(Ui.a.mark((function e(n,r){return Ui.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dataBase;case 2:return e.abrupt("return",e.sent.put($i,r,n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.dataBase=Object(Yi.a)(this.DATA_BASE_NAME,1,{upgrade:function(e){e.createObjectStore($i)}})},arguments:[]}),Object(_i.a)(Ai,r.SelectionDialogService,{dependencyConstructor:function e(){var t=this;Object(Ri.a)(this,e),this.openDialogChannel=new Li((function(e){return Object(Ki.a)(e).pipe(Object(Mi.a)((function(e){e.isOpen||t.selectionChannel.unsubscribe()})))})),this.selectionChannel=new Li((function(e){return Object(Ki.a)(e)}))},arguments:[]}),Object(_i.a)(Ai,r.NavigationPanelService,{dependencyConstructor:function e(){Object(Ri.a)(this,e),this.navigationPanelOpenChannel=void 0,this.navigationPanelOpenChannel=new Li((function(){return Object(Ki.a)(x)}))},arguments:[]}),Object(_i.a)(Ai,r.ToolbarService,{dependencyConstructor:function e(t){Object(Ri.a)(this,e),this.pageLabelChannel=void 0,this.cardsCountInGroupChannel=void 0,this.cardsCountInGroupChannel=new Li((function(e){var n=e.path,r=e.cardsGroupsId;return Object(Ki.a)({path:n,cardsGroupsId:r}).pipe(Object(qi.a)((function(e){var n=e.path,r=e.cardsGroupsId;return n===Q.path||n===U.path?t.getBackup().pipe(Object(Vi.a)((function(e){return function(e,t){var n=e.findIndex((function(e){return e.id===t}));return n>-1?e[n].cards.length:-1}(e,r)}))):Object(Ki.a)(-1)})))})),this.pageLabelChannel=new Li((function(e){var n=e.path,r=e.cardsGroupsId;return Object(Ki.a)({path:n,cardsGroupsId:r}).pipe(Object(qi.a)((function(e){var n=e.path,r=e.cardsGroupsId;return n===Q.path||n===U.path||n===Y.path?t.getBackup().pipe(Object(Vi.a)((function(e){return function(e,t){var n=e.findIndex((function(e){return e.id===t}));return n>-1?e[n].nameCardsGroup:""}(e,r)}))):Object(Ki.a)(function(e){return e===M.path?M.name:e===V.path?V.name:e===q.path?q.name:e===Q.path?Q.name:e===U.path?U.name:e===H.path?H.name:e===J.path?J.name:e===Y.path?Y.name:e===$.path?$.name:"My Cards"}(n))})))}))},arguments:[r.StorageService]}),Object(_i.a)(Ai,r.VoiceService,{dependencyConstructor:Xi,arguments:[]}),Object(_i.a)(Ai,r.CardsGroupsEditorService,{dependencyConstructor:function e(t){Object(Ri.a)(this,e),this.groupEditingChannel=void 0,this.groupChannel=void 0,this.groupEditingChannel=new Li((function(e){return t.getBackup().pipe(Object(Vi.a)((function(t){return function(e,t){var n=t.findIndex((function(t){return e.id===t.id}));return n<0?t.push(e):t[n]=e,t}(e,t)})),Object(Mi.a)((function(e){t.setBackup(e)})))})),this.groupChannel=new Li((function(e){return t.getBackup().pipe(Object(Vi.a)((function(t){return function(e,t){var n=t.find((function(t){return e===t.id}));return n||(n={cards:[],nameCardsGroup:"",repeatingDate:(new Date).getTime(),id:(new Date).getTime(),percentRepeatedCards:0}),n}(e,t)})))}))},arguments:[r.StorageService]}),Object(_i.a)(Ai,r.CardsGroupsListService,{dependencyConstructor:function e(t){Object(Ri.a)(this,e),this.groupsListChannel=void 0,this.groupDeleteChannel=void 0,this.resetProgressChannel=void 0,this.changeFilterChannel=void 0,this.filterChannel=void 0,this.startRepeatingDifficultCardsChannel=void 0,this.startRepeatingDifficultCardsChannel=new Li((function(e){return t.getStatistic().pipe(Object(qi.a)((function(n){return t.getSettings().pipe(Object(qi.a)((function(r){return t.getBackup().pipe(Object(Vi.a)((function(t){return function(e,t,n,r){var a=new Map(Object.entries(n.cardsInProgressFrequency).filter((function(t){var n=e.findIndex((function(e){return e.id===r}));return e[n].cards.findIndex((function(e){return e.id===Number(t[0])}))>=0})).sort((function(e,t){return e[1]>t[1]?-1:e[1]<t[1]?1:0}))),i=[];return Object(E.a)(a.entries()).forEach((function(e){i.length<=t.difficultCardsAmountForRepeating-1&&i.push(Number(e[0]))})),i}(t,r,n,e)})))})))})))})),this.groupsListChannel=new Li((function(){return t.getBackup().pipe(Object(qi.a)((function(e){return t.getSettings().pipe(Object(qi.a)((function(n){return Object(ec.a)((function(){return n.autoObsolete&&n.autoObsolete.isEnable?Object(Ki.a)(function(e,t,n){if(t<1&&n<1)return e;var r=864e5,a=(new Date).getTime(),i=t*r,c=n*r;return e.forEach((function(e){e.cards.forEach((function(e){var t=a-e.dateRepeating;e.rangeOfKnowledge===nt.DONE&&t>c&&(e.rangeOfKnowledge=nt.IN_PROGRESS),e.rangeOfKnowledge===nt.IN_PROGRESS&&t>i&&(e.rangeOfKnowledge=nt.TO_DO)}))})),e}(e,n.autoObsolete.timeInProgress,n.autoObsolete.timeInDone)).pipe(Object(Mi.a)((function(e){return t.setBackup(e)}))):Object(Ki.a)(e)}))})))})),Object(Vi.a)((function(e){return function(e){return e.map((function(e){var t=0;return e.cards.forEach((function(e){e.dateRepeating>t&&(t=e.dateRepeating)})),e.repeatingDate=t,e})),e}(e)})),Object(Vi.a)((function(e){return function(e){return e.map((function(e){var t=0;return e.cards.forEach((function(e){e.rangeOfKnowledge===nt.DONE&&t++})),e.percentRepeatedCards=t/e.cards.length*100,e})),e}(e)})),Object(Zi.a)((function(e){return t.getFilter().pipe(Object(Vi.a)((function(t){return function(e,t){var n=e.filter((function(e){return e.nameCardsGroup.toLowerCase().indexOf(t.searchableText.toLowerCase())>-1}));return t.sort===A.NAME_DESK?n=n&&n.sort((function(e,t){return e.nameCardsGroup>t.nameCardsGroup?1:e.nameCardsGroup<t.nameCardsGroup?-1:0})):t.sort===A.NAME_ASK?n=n&&n.sort((function(e,t){return e.nameCardsGroup>t.nameCardsGroup?-1:e.nameCardsGroup<t.nameCardsGroup?1:0})):t.sort===A.DATE_ASK?n=n&&n.sort((function(e,t){if(e.repeatingDate&&t.repeatingDate){if(e.repeatingDate>t.repeatingDate)return 1;if(e.repeatingDate<t.repeatingDate)return-1}return 0})):t.sort===A.DATE_DESK?n=n&&n.sort((function(e,t){if(e.repeatingDate&&t.repeatingDate){if(e.repeatingDate<t.repeatingDate)return 1;if(e.repeatingDate>t.repeatingDate)return-1}return 0})):t.sort===A.PROGRESS_DESC?n=n&&n.sort((function(e,t){if("number"===typeof e.percentRepeatedCards&&"number"===typeof t.percentRepeatedCards){if(e.percentRepeatedCards<t.percentRepeatedCards)return 1;if(e.percentRepeatedCards>t.percentRepeatedCards)return-1}return 0})):t.sort===A.PROGRESS_ASK&&(n=n&&n.sort((function(e,t){if("number"===typeof e.percentRepeatedCards&&"number"===typeof t.percentRepeatedCards){if(e.percentRepeatedCards>t.percentRepeatedCards)return 1;if(e.percentRepeatedCards<t.percentRepeatedCards)return-1}return 0}))),n}(e,t.cardsGroups)})))})))})),this.groupDeleteChannel=new Li((function(e){return t.getBackup().pipe(Object(Vi.a)((function(t){return function(e,t){return t.filter((function(t){return t.id!==e}))}(e,t)})),Object(Mi.a)((function(e){return t.setBackup(e)})))})),this.resetProgressChannel=new Li((function(e){return t.getBackup().pipe(Object(Vi.a)((function(t){return function(e,t){var n=t.findIndex((function(t){return e===t.id}));return n<0||(t[n].cards=t[n].cards.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{rangeOfKnowledge:nt.TO_DO})}))),t}(e,t)})),Object(Mi.a)((function(e){return t.setBackup(e)})))})),this.filterChannel=new Li((function(){return t.getFilter().pipe(Object(Vi.a)((function(e){return e.cardsGroups})))})),this.changeFilterChannel=new Li((function(e){return t.getFilter().pipe(Object(Vi.a)((function(t){return Object(s.a)(Object(s.a)({},t),{},{cardsGroups:e})})),Object(Mi.a)((function(e){t.setFilter(e)})))}))},arguments:[r.StorageService]}),Object(_i.a)(Ai,r.GoogleBackupsService,{dependencyConstructor:function e(t){Object(Ri.a)(this,e),this.storageService=t,this.backupsNameLoadChannel=void 0,this.backupLoadChannel=void 0,this.backupUploadChannel=void 0,this.backupDeleteChannel=void 0,this.backupsNameLoadChannel=new Li((function(){return t.getAuthToken().pipe(Object(Zi.a)((function(e){return Object(Ki.a)(e).pipe(Object(qi.a)((function(){return Object(Hi.a)(tc(e))})),Object(qi.a)((function(t){return Object(Hi.a)(function(e,t){var n="".concat("https://www.googleapis.com/drive/v3/files/",'?q="').concat(t?t.id:-1,'"+in+parents&fields=files(id,createdTime,name)');return fetch(n,{headers:{Authorization:"Bearer "+e},method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.files}))}(e,t))})),Object(Vi.a)((function(e){return function(e){return e?e.map((function(e){var t=new Date(e.createdTime),n="".concat(t.getFullYear(),"-").concat(t.getMonth(),"-").concat(t.getDate()," ").concat(t.getHours(),":").concat(t.getMinutes());return Object(s.a)(Object(s.a)({},e),{},{createdTime:n})})):[]}(e)})))})))})),this.backupLoadChannel=new Li((function(e){return t.getAuthToken().pipe(Object(qi.a)((function(t){return Object(Hi.a)(function(e,t){return fetch("https://www.googleapis.com/drive/v3/files/"+t+"?alt=media",{headers:{Authorization:"Bearer "+e},method:"GET"}).then((function(e){return e.json()}))}(t,e))})),Object(Mi.a)((function(e){t.setBackup(e)})))})),this.backupUploadChannel=new Li((function(){return t.getAuthToken().pipe(Object(Zi.a)((function(e){return Object(Ki.a)(e).pipe(Object(qi.a)((function(){return Object(Hi.a)(tc(e))})),Object(Zi.a)((function(t){return Object(ec.a)((function(){return t?Object(Ki.a)(t.id):Object(Hi.a)(function(e){var t={headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:JSON.stringify({name:"my-cards",mimeType:"application/vnd.google-apps.folder"}),method:"POST"};return fetch("https://www.googleapis.com/drive/v3/files/",t).then((function(e){return e.json()})).then((function(e){return e.id}))}(e))}))})),Object(Zi.a)((function(n){return t.getBackup().pipe(Object(Vi.a)((function(e){return function(e){var t=0;return e.forEach((function(e){t+=e.cards.length})),"groups(".concat(e.length,")cards(").concat(t,")")}(e)})),Object(qi.a)((function(t){return Object(Hi.a)(function(e,t,n){var r={headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:JSON.stringify({parents:[t],name:n}),method:"POST"};return fetch("https://www.googleapis.com/drive/v3/files/",r).then((function(e){return e.json()})).then((function(e){return e.id}))}(e,n,t))})))})),Object(qi.a)((function(n){return t.getBackup().pipe(Object(qi.a)((function(t){return function(e,t,n){var r="https://www.googleapis.com/upload/drive/v3/files/"+t,a={headers:{Authorization:"Bearer "+e},body:JSON.stringify(n,null,4),responseType:"text",method:"PATCH"};return fetch(r,a).then((function(){return t}))}(e,n,t)})))})))})))})),this.backupDeleteChannel=new Li((function(e){return t.getAuthToken().pipe(Object(qi.a)((function(t){return function(e,t){return fetch("https://www.googleapis.com/drive/v3/files/"+t,{headers:{Authorization:"Bearer "+e},method:"DELETE"}).then((function(){return t}))}(t,e)})))}))},arguments:[r.StorageService]}),Object(_i.a)(Ai,r.CardsService,{dependencyConstructor:function e(t){var n=this;Object(Ri.a)(this,e),this.storageService=t,this.cardsChannel=void 0,this.resetCardProgressChannel=void 0,this.deleteSingleCardChannel=void 0,this.movingCardsChannel=void 0,this.copyCardsChannel=void 0,this.deleteCardsChannel=void 0,this.existedGroupsIDsChannel=void 0,this.cardsIDsByGroupIDsChannel=void 0,this.cardsIDsBySelectedItemsChannel=void 0,this.filterChannel=void 0,this.changeFilterChannel=void 0,this.cardsChannel=new Li((function(e){var t=e.cardsGroupID,r=e.filter;return n.storageService.getBackup().pipe(Object(Vi.a)((function(e){return nc(t,e)})),Object(Vi.a)((function(e){return function(e,t){var n=e.filter((function(e){return e.question.toLowerCase().indexOf(t.searchableText.toLowerCase())>-1||e.answer.toLowerCase().indexOf(t.searchableText.toLowerCase())>-1}));return t.sort===A.QUESTION_DESK?n.sort((function(e,t){return e.question===t.question?0:e.question>t.question?1:-1})):t.sort===A.QUESTION_ASK?n.sort((function(e,t){return e.question===t.question?0:e.question>t.question?-1:1})):t.sort===A.STATUS_ASK?n.sort((function(e,t){return e.rangeOfKnowledge===t.rangeOfKnowledge?0:e.rangeOfKnowledge>t.rangeOfKnowledge?-1:1})):t.sort===A.STATUS_DESK?n.sort((function(e,t){return e.rangeOfKnowledge===t.rangeOfKnowledge?0:e.rangeOfKnowledge>t.rangeOfKnowledge?1:-1})):t.sort===A.DATE_DESK?n.sort((function(e,t){return e.dateRepeating===t.dateRepeating?0:e.dateRepeating>t.dateRepeating?1:-1})):t.sort===A.DATE_ASK?n.sort((function(e,t){return e.dateRepeating===t.dateRepeating?0:e.dateRepeating<t.dateRepeating?1:-1})):t.sort===A.ANSWER_ASK?n.sort((function(e,t){return e.answer===t.answer?0:e.answer<t.answer?1:-1})):t.sort===A.ANSWER_DESK?n.sort((function(e,t){return e.answer===t.answer?0:e.answer<t.answer?-1:1})):t.sort===A.PROGRESS_ASK?n.sort((function(e,t){return e.rangeOfKnowledge>t.rangeOfKnowledge?0:e.rangeOfKnowledge<t.rangeOfKnowledge?-1:1})):t.sort===A.PROGRESS_DESC?n.sort((function(e,t){return e.rangeOfKnowledge<t.rangeOfKnowledge?0:e.rangeOfKnowledge>t.rangeOfKnowledge?-1:1})):n}(e,r)})))})),this.resetCardProgressChannel=new Li((function(e){var n=e.cardID,r=e.cardsGroupID;return t.getBackup().pipe(Object(Vi.a)((function(e){return function(e,t,n){var r=n.findIndex((function(t){return e===t.id})),a=-1;return r>=0&&(a=n[r].cards.findIndex((function(e){return t===e.id}))),r>=0&&a>=0&&(n[r].cards[a].rangeOfKnowledge=nt.TO_DO),n}(r,n,e)})),Object(Mi.a)((function(e){t.setBackup(e)})))})),this.deleteSingleCardChannel=new Li((function(e){return t.getBackup().pipe(Object(Vi.a)((function(t){return rc(e,t)})),Object(Mi.a)((function(e){t.setBackup(e)})))})),this.movingCardsChannel=new Li((function(e){var n=e.selectedItems,r=e.destinationGroupID;return t.getBackup().pipe(Object(Zi.a)((function(e){return Object(Ki.a)(e).pipe(Object(Vi.a)((function(){return ac(n)})),Object(Vi.a)((function(t){return function(e,t,n){var r=[];return e.forEach((function(e){e.cards.forEach((function(e){t.findIndex((function(t){return t===e.id}))>-1&&r.push(e)})),e.cards=e.cards.filter((function(e){return t.findIndex((function(t){return t===e.id}))<0}))})),e.forEach((function(e){var t;e.id===n&&(t=e.cards).push.apply(t,r)})),e}(e,t,r)})),Object(Mi.a)((function(e){t.setBackup(e)})))})))})),this.existedGroupsIDsChannel=new Li((function(){return t.getBackup().pipe(Object(Vi.a)(ic))})),this.copyCardsChannel=new Li((function(e){var n=e.selectedItems,r=e.destinationGroupID;return t.getBackup().pipe(Object(Zi.a)((function(e){return Object(Ki.a)(e).pipe(Object(Vi.a)((function(){return ac(n)})),Object(Vi.a)((function(t){return function(e,t,n){var r=[];return e.forEach((function(e){e.cards.forEach((function(e,n){t.findIndex((function(t){return t===e.id}))>-1&&r.push(Object(s.a)(Object(s.a)({},e),{},{id:(new Date).getTime()+1e3*n}))}))})),e.forEach((function(e){var t;e.id===n&&(t=e.cards).push.apply(t,r)})),e}(e,t,r)})),Object(Mi.a)((function(e){t.setBackup(e)})))})))})),this.deleteCardsChannel=new Li((function(e){return t.getBackup().pipe(Object(Zi.a)((function(n){return Object(Ki.a)(n).pipe(Object(Vi.a)((function(){return ac(e)})),Object(Vi.a)((function(e){return function(e,t){return e.forEach((function(e){e.cards=e.cards.filter((function(e){return t.findIndex((function(t){return t===e.id}))<0}))})),e}(n,e)})),Object(Mi.a)((function(e){t.setBackup(e)})))})))})),this.cardsIDsByGroupIDsChannel=new Li((function(e){return t.getBackup().pipe(Object(Vi.a)((function(t){return nc(e,t)})),Object(Vi.a)((function(e){return function(e){return e.map((function(e){return e.id}))}(e)})))})),this.cardsIDsBySelectedItemsChannel=new Li((function(e){return Object(Ki.a)(e).pipe(Object(Vi.a)((function(){return function(e){var t=[];for(var n in e)e[n]&&t.push(Number(n));return t}(e)})))})),this.filterChannel=new Li((function(){return t.getFilter().pipe(Object(Vi.a)((function(e){return e.cards})))})),this.changeFilterChannel=new Li((function(e){return t.getFilter().pipe(Object(Vi.a)((function(t){return Object(s.a)(Object(s.a)({},t),{},{cards:e})})),Object(Mi.a)((function(e){t.setFilter(e)})))}))},arguments:[r.StorageService]}),Object(_i.a)(Ai,r.CardsRepeaterService,{dependencyConstructor:function e(t,n){var r=this;Object(Ri.a)(this,e),this.storageService=t,this.voiceService=n,this.cardChannel=void 0,this.repeatingResultChannel=void 0,this.repeatingProgressChannel=void 0,this.deleteSingleCardChannel=void 0,this.readByVoiceEngineChannel=void 0,this.statisticValue={inProgress:0,todo:0,done:0},this.cardChannel=new Li((function(e){return r.storageService.getBackup().pipe(Object(Vi.a)((function(t){return function(e,t){var n=[];return e.forEach((function(e){e.cards.forEach((function(e){t.findIndex((function(t){return t===e.id}))>-1&&n.push(e)}))})),n}(t,e)})),Object(Mi.a)((function(e){r.statisticValue=function(e){var t={inProgress:0,todo:0,done:0};return e.forEach((function(e){e.rangeOfKnowledge===nt.IN_PROGRESS?t.inProgress=t.inProgress+1:e.rangeOfKnowledge===nt.TO_DO?t.todo=t.todo+1:t.done=t.done+1})),t}(e)})),Object(qi.a)((function(e){return r.storageService.getSettings().pipe(Object(Vi.a)((function(t){return oc(e,t.repeatingType)})))})))})),this.repeatingResultChannel=new Li((function(e){return r.storageService.getStatistic().pipe(Object(Vi.a)((function(t){return uc(t,e)})),Object(Vi.a)((function(e){return r.storageService.setStatistic(e)})),Object(qi.a)((function(){return r.storageService.getBackup()})),Object(Vi.a)((function(t){return cc(e,t)})),Object(Vi.a)((function(t){return sc(e,t)})),Object(qi.a)((function(e){return r.storageService.setBackup(e)})))})),this.repeatingProgressChannel=new Li((function(){return Object(Ki.a)(r.statisticValue)})),this.deleteSingleCardChannel=new Li((function(e){return t.getBackup().pipe(Object(Vi.a)((function(t){return rc(e,t)})),Object(Mi.a)((function(e){t.setBackup(e)})))})),this.readByVoiceEngineChannel=new Li((function(e){return Object(Ki.a)(e).pipe(Object(Vi.a)((function(e){return dc(e)})),Object(Vi.a)((function(e){return lc(e,n.getRandomVoice())})))}))},arguments:[r.StorageService,r.VoiceService]}),Object(_i.a)(Ai,r.SettingsService,{dependencyConstructor:function e(t){Object(Ri.a)(this,e),this.settingsChannel=void 0,this.changeSettingsChannel=void 0,this.settingsChannel=new Li((function(){return t.getSettings()})),this.changeSettingsChannel=new Li((function(e){return t.setSettings(e)}))},arguments:[r.StorageService]}),Object(_i.a)(Ai,r.CardViewerService,{dependencyConstructor:function e(t,n){var r=this;Object(Ri.a)(this,e),this.storageService=t,this.voiceService=n,this.cardChannel=void 0,this.repeatingResultChannel=void 0,this.deleteSingleCardChannel=void 0,this.readByVoiceEngineChannel=void 0,this.cardChannel=new Li((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return r.storageService.getBackup().pipe(Object(Vi.a)((function(t){return hc(t,e)})))})),this.repeatingResultChannel=new Li((function(e){return r.storageService.getStatistic().pipe(Object(Vi.a)((function(t){return uc(t,e)})),Object(Vi.a)((function(e){return r.storageService.setStatistic(e)})),Object(qi.a)((function(){return r.storageService.getBackup()})),Object(Vi.a)((function(t){return cc(e,t)})),Object(Vi.a)((function(t){return sc(e,t)})),Object(qi.a)((function(e){return r.storageService.setBackup(e)})))})),this.deleteSingleCardChannel=new Li((function(e){return t.getBackup().pipe(Object(Vi.a)((function(t){return rc(e,t)})),Object(Mi.a)((function(e){t.setBackup(e)})))})),this.readByVoiceEngineChannel=new Li((function(e){return Object(Ki.a)(e).pipe(Object(Vi.a)((function(e){return dc(e)})),Object(Vi.a)((function(e){return lc(e,n.getRandomVoice())})))}))},arguments:[r.StorageService,r.VoiceService]}),Object(_i.a)(Ai,r.StatisticService,{dependencyConstructor:function e(t){Object(Ri.a)(this,e),this.storageService=t,this.statisticChannel=void 0,this.removeStatisticChannel=void 0,this.statisticChannel=new Li((function(){return t.getStatistic().pipe(Object(Vi.a)((function(e){return function(e){return e.dailyStatistic.reverse().map((function(e){var t=e.date,n=e.done,r=e.inProgress,a=e.year,i=e.month,c=t>0&&t<10?"0"+t:t,o=(i+=1)>0&&i<10?"0"+i:i,s=0;Object.keys(r).forEach((function(e){s+=r[Number(e)]}));var u=0;return Object.keys(n).forEach((function(e){u+=n[Number(e)]})),{date:"".concat(c,"-").concat(o,"-").concat(a),inProgress:s,done:u}}))}(e)})))})),this.removeStatisticChannel=new Li((function(){return t.setStatistic(Wi)}))},arguments:[r.StorageService]}),Object(_i.a)(Ai,r.RepeaterListService,{dependencyConstructor:function e(t){Object(Ri.a)(this,e),this.repeaterListChannel=void 0,this.startRepeatingChannel=void 0,this.removingRepeaterChannel=void 0,this.resetProgressChannel=void 0,this.repeaterListChannel=new Li((function(){return t.getRepeaters().pipe(Object(qi.a)((function(e){return t.getBackup().pipe(Object(qi.a)((function(t){return Object(Ki.a)(t).pipe(Object(Vi.a)((function(){return function(e,t){return t.map((function(t){var n=[];return e.forEach((function(e){t.cardsGroupsIDs.findIndex((function(t){return t===e.id}))>-1&&n.push(e.nameCardsGroup)})),Object(s.a)(Object(s.a)({},t),{},{groupsNames:n})}))}(t,e)})),Object(Vi.a)((function(e){return function(e,t){return t.forEach((function(t){var n=0,r=0;e.forEach((function(e){t.cardsGroupsIDs.findIndex((function(t){return e.id===t}))>-1&&(n+=e.cards.length,e.cards.forEach((function(e){e.rangeOfKnowledge===nt.DONE&&r++})))})),t.percentRepeatedCards=r/n*100})),t}(t,e)})))})))})))})),this.startRepeatingChannel=new Li((function(e){return t.getRepeaters().pipe(Object(Vi.a)((function(t){return pc(t,e)})),Object(qi.a)((function(e){return t.getBackup().pipe(Object(Vi.a)((function(t){return function(e,t){var n=[];return e.forEach((function(e){t.cardsGroupsIDs.findIndex((function(t){return t===e.id}))>=0&&n.push.apply(n,Object(E.a)(e.cards.map((function(e){return e.id}))))})),n}(t,e)})))})))})),this.removingRepeaterChannel=new Li((function(e){return t.getRepeaters().pipe(Object(Vi.a)((function(t){return function(e,t){var n=e.findIndex((function(e){return e.id===t}));return e.filter((function(t){return t.id!==e[n].id}))}(t,e)})),Object(Mi.a)((function(e){return t.setRepeaters(e)})))})),this.resetProgressChannel=new Li((function(e){return t.getRepeaters().pipe(Object(Vi.a)((function(t){return pc(t,e)})),Object(qi.a)((function(e){return t.getBackup().pipe(Object(Vi.a)((function(t){return function(e,t){return e.forEach((function(e){t.cardsGroupsIDs.findIndex((function(t){return e.id===t}))>-1&&e.cards.forEach((function(e){e.rangeOfKnowledge!==nt.TO_DO&&(e.rangeOfKnowledge=nt.TO_DO)}))})),e}(t,e)})),Object(qi.a)((function(e){return t.setBackup(e)})))})))}))},arguments:[r.StorageService]}),Object(_i.a)(Ai,r.RepeaterEditorService,{dependencyConstructor:function e(t){Object(Ri.a)(this,e),this.storageService=t,this.groupsListChannel=void 0,this.saveRepeaterChannel=void 0,this.updateGroupsIDsChannel=void 0,this.repeaterChannel=void 0,this.selectedGroupsChannel=void 0,this.groupsListChannel=new Li((function(){return t.getBackup()})),this.saveRepeaterChannel=new Li((function(e){return t.getRepeaters().pipe(Object(Vi.a)((function(t){return-1===e.id?(e.id=(new Date).getTime(),t.push(e)):function(e,t){var n=e.findIndex((function(e){return e.id===t.id}));e[n]=Object(s.a)(Object(s.a)({},e[n]),{},{cardsGroupsIDs:t.cardsGroupsIDs,name:t.name})}(t,e),t})),Object(qi.a)((function(e){return t.setRepeaters(e)})))})),this.updateGroupsIDsChannel=new Li((function(e){var t=e.repeater,n=e.selectedGroups;return Object(Ki.a)(t).pipe(Object(Vi.a)((function(){return function(e,t){var n=[];return Object.keys(e).forEach((function(t){var r=Number(t);e[r]&&n.push(r)})),Object(s.a)(Object(s.a)({},t),{},{cardsGroupsIDs:n})}(n,t)})))})),this.repeaterChannel=new Li((function(e){return t.getRepeaters().pipe(Object(Vi.a)((function(t){return function(e,t){var n=e.findIndex((function(e){return e.id===t}));return e[n]}(t,e)})))})),this.selectedGroupsChannel=new Li((function(e){return Object(Ki.a)(e).pipe(Object(Vi.a)((function(){return function(e){var t={};return e.cardsGroupsIDs.forEach((function(e){t[e]=!0})),t}(e)})))}))},arguments:[r.StorageService]}),Ai),fc=i.a.createContext(Fi);Li.setGlobalErrorHandler((function(e){console.error(e)}));var gc=function(){var e=Object(a.useState)(Fi),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=window.screen.height;n.height!==e&&r(Object(s.a)(Object(s.a)({},n),{},{height:e}))}),[n]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(I,{dependenciesMap:bc,children:Object(j.jsx)(fc.Provider,{value:n,children:Object(j.jsx)(l.a,{children:Object(j.jsxs)("div",{children:[Object(j.jsx)(je,{}),Object(j.jsx)(F,{}),Object(j.jsx)(ce,{}),Object(j.jsx)(Ee,{}),Object(j.jsx)(Ei,{}),Object(j.jsxs)("div",{className:"page-container",style:{height:n.height-110,width:"100%"},children:[Object(j.jsx)(Se,{}),Object(j.jsx)(xi,{})]})]})})})})})},jc=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,329)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},vc=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Oc(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(j.jsx)(gc,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/MyCardsWeb",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/MyCardsWeb","/service-worker.js");vc?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Oc(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Oc(t,e)}))}}(),jc()}},[[222,1,2]]]);
//# sourceMappingURL=main.8fd0ec7a.chunk.js.map